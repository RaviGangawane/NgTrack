(self.webpackChunkngTrack=self.webpackChunkngTrack||[]).push([[179],{796:(vh,wh,V)=>{"use strict";function Ge(t){return"function"==typeof t}function Be(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const vs=Be(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function $e(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Dn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Ge(r))try{r()}catch(s){e=s instanceof vs?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{ws(s)}catch(o){e=e??[],o instanceof vs?e=[...e,...o.errors]:e.push(o)}}if(e)throw new vs(e)}}add(e){var n;if(e&&e!==this)if(this.closed)ws(e);else{if(e instanceof Dn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&$e(n,e)}remove(e){const{_finalizers:n}=this;n&&$e(n,e),e instanceof Dn&&e._removeParent(this)}}Dn.EMPTY=(()=>{const t=new Dn;return t.closed=!0,t})();const xe=Dn.EMPTY;function Pc(t){return t instanceof Dn||t&&"closed"in t&&Ge(t.remove)&&Ge(t.add)&&Ge(t.unsubscribe)}function ws(t){Ge(t)?t():t.unsubscribe()}const Ze={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ln={setTimeout(t,e,...n){const{delegate:r}=Ln;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Ln;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function xa(t){Ln.setTimeout(()=>{const{onUnhandledError:e}=Ze;if(!e)throw t;e(t)})}function Li(){}const ot=Ma("C",void 0,void 0);function Ma(t,e,n){return{kind:t,value:e,error:n}}let Jt=null;function Is(t){if(Ze.useDeprecatedSynchronousErrorHandling){const e=!Jt;if(e&&(Jt={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Jt;if(Jt=null,n)throw r}}else t()}class go extends Dn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Pc(e)&&e.add(this)):this.destination=Gr}static create(e,n,r){return new mo(e,n,r)}next(e){this.isStopped?Nc(function Fm(t){return Ma("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Nc(function Ih(t){return Ma("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Nc(ot,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Eh=Function.prototype.bind;function Pa(t,e){return Eh.call(t,e)}class Rc{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ut(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ut(r)}else Ut(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ut(n)}}}class mo extends go{constructor(e,n,r){let i;if(super(),Ge(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Ze.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Pa(e.next,s),error:e.error&&Pa(e.error,s),complete:e.complete&&Pa(e.complete,s)}):i=e}this.destination=new Rc(i)}}function Ut(t){Ze.useDeprecatedSynchronousErrorHandling?function ka(t){Ze.useDeprecatedSynchronousErrorHandling&&Jt&&(Jt.errorThrown=!0,Jt.error=t)}(t):xa(t)}function Nc(t,e){const{onStoppedNotification:n}=Ze;n&&Ln.setTimeout(()=>n(t,e))}const Gr={closed:!0,next:Li,error:function Jn(t){throw t},complete:Li},Oc="function"==typeof Symbol&&Symbol.observable||"@@observable";function bt(t){return t}let Xe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function lr(t){return t&&t instanceof go||function at(t){return t&&Ge(t.next)&&Ge(t.error)&&Ge(t.complete)}(t)&&Pc(t)}(n)?n:new mo(n,r,i);return Is(()=>{const{operator:o,source:u}=this;s.add(o?o.call(s,u):u?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Ie(r))((i,s)=>{const o=new mo({next:u=>{try{n(u)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Oc](){return this}pipe(...n){return function ue(t){return 0===t.length?bt:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=Ie(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Ie(t){var e;return null!==(e=t??Ze.Promise)&&void 0!==e?e:Promise}const Cn=Be(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let qe=(()=>{class t extends Xe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new ze(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Cn}next(n){Is(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Is(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Is(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?xe:(this.currentObservers=null,s.push(n),new Dn(()=>{this.currentObservers=null,$e(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new Xe;return n.source=this,n}}return t.create=(e,n)=>new ze(e,n),t})();class ze extends qe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:xe}}function et(t){return Ge(t?.lift)}function Je(t){return e=>{if(et(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function tt(t,e,n,r,i){return new Th(t,e,n,r,i)}class Th extends go{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(u){try{n(u)}catch(c){e.error(c)}}:super._next,this._error=i?function(u){try{i(u)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ve(t,e){return Je((n,r)=>{let i=0;n.subscribe(tt(r,s=>{r.next(t.call(e,s,i++))}))})}function bh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function ci(t){return this instanceof ci?(this.v=t,this):new ci(t)}function xh(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(_){r[_]&&(i[_]=function(y){return new Promise(function(w,E){s.push([_,y,w,E])>1||u(_,y)})})}function u(_,y){try{!function c(_){_.value instanceof ci?Promise.resolve(_.value.v).then(d,f):p(s[0][2],_)}(r[_](y))}catch(w){p(s[0][3],w)}}function d(_){u("next",_)}function f(_){u("throw",_)}function p(_,y){_(y),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Mh(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function Fc(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(u,c){!function i(s,o,u,c){Promise.resolve(c).then(function(d){s({value:d,done:u})},o)}(u,c,(o=t[s](o)).done,o.value)})}}}const Ph=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Rh(t){return Ge(t?.then)}function Vc(t){return Ge(t[Oc])}function Bc(t){return Symbol.asyncIterator&&Ge(t?.[Symbol.asyncIterator])}function Uc(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Nh=function Hm(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Oh(t){return Ge(t?.[Nh])}function Lh(t){return xh(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield ci(n.read());if(i)return yield ci(void 0);yield yield ci(r)}}finally{n.releaseLock()}})}function Fh(t){return Ge(t?.getReader)}function qr(t){if(t instanceof Xe)return t;if(null!=t){if(Vc(t))return function jc(t){return new Xe(e=>{const n=t[Oc]();if(Ge(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Ph(t))return function Gm(t){return new Xe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Rh(t))return function qm(t){return new Xe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,xa)})}(t);if(Bc(t))return Z(t);if(Oh(t))return function xr(t){return new Xe(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Fh(t))return function Vh(t){return Z(Lh(t))}(t)}throw Uc(t)}function Z(t){return new Xe(e=>{(function Bh(t,e){var n,r,i,s;return function La(t,e,n,r){return new(n||(n=Promise))(function(s,o){function u(f){try{d(r.next(f))}catch(p){o(p)}}function c(f){try{d(r.throw(f))}catch(p){o(p)}}function d(f){f.done?s(f.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(f.value).then(u,c)}d((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Mh(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Mr(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Dt(t,e,n=1/0){return Ge(e)?Dt((r,i)=>Ve((s,o)=>e(r,s,i,o))(qr(t(r,i))),n):("number"==typeof e&&(n=e),Je((r,i)=>function Uh(t,e,n,r,i,s,o,u){const c=[];let d=0,f=0,p=!1;const _=()=>{p&&!c.length&&!d&&e.complete()},y=E=>d<r?w(E):c.push(E),w=E=>{s&&e.next(E),d++;let b=!1;qr(n(E,f++)).subscribe(tt(e,M=>{i?.(M),s?y(M):e.next(M)},()=>{b=!0},void 0,()=>{if(b)try{for(d--;c.length&&d<r;){const M=c.shift();o?Mr(e,o,()=>w(M)):w(M)}_()}catch(M){e.error(M)}}))};return t.subscribe(tt(e,y,()=>{p=!0,_()})),()=>{u?.()}}(r,i,t,n)))}function Fi(t=1/0){return Dt(bt,t)}const Sn=new Xe(t=>t.complete());function $c(t){return t[t.length-1]}function Es(t){return function Zm(t){return t&&Ge(t.schedule)}($c(t))?t.pop():void 0}function Vi(t,e=0){return Je((n,r)=>{n.subscribe(tt(r,i=>Mr(r,t,()=>r.next(i),e),()=>Mr(r,t,()=>r.complete(),e),i=>Mr(r,t,()=>r.error(i),e)))})}function Va(t,e=0){return Je((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Ba(t,e){if(!t)throw new Error("Iterable cannot be null");return new Xe(n=>{Mr(n,e,()=>{const r=t[Symbol.asyncIterator]();Mr(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Ct(t,e){return e?function jh(t,e){if(null!=t){if(Vc(t))return function Jm(t,e){return qr(t).pipe(Va(e),Vi(e))}(t,e);if(Ph(t))return function e_(t,e){return new Xe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Rh(t))return function Xm(t,e){return qr(t).pipe(Va(e),Vi(e))}(t,e);if(Bc(t))return Ba(t,e);if(Oh(t))return function t_(t,e){return new Xe(n=>{let r;return Mr(n,e,()=>{r=t[Nh](),Mr(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>Ge(r?.return)&&r.return()})}(t,e);if(Fh(t))return function yo(t,e){return Ba(Lh(t),e)}(t,e)}throw Uc(t)}(t,e):qr(t)}function De(t){return t<=0?()=>Sn:Je((e,n)=>{let r=0;e.subscribe(tt(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Ts(t,e,...n){return!0===e?(t(),null):!1===e?null:e(...n).pipe(De(1)).subscribe(()=>t())}function Me(t){for(let e in t)if(t[e]===Me)return e;throw Error("Could not find renamed property on target object.")}function Ue(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ue).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function de(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const pt=Me({__forward_ref__:Me});function wo(t){return t.__forward_ref__=wo,t.toString=function(){return Ue(this())},t}function te(t){return function An(t){return"function"==typeof t&&t.hasOwnProperty(pt)&&t.__forward_ref__===wo}(t)?t():t}class pe extends Error{constructor(e,n){super(function kr(t,e){return`NG0${Math.abs(t)}${e?": "+e.trim():""}`}(e,n)),this.code=e}}function q(t){return"string"==typeof t?t:null==t?"":String(t)}function di(t,e){throw new pe(-201,!1)}function hn(t,e){null==t&&function ke(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function ce(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Xt(t){return{providers:t.providers||[],imports:t.imports||[]}}function $a(t){return Wh(t,Eo)||Wh(t,Qh)}function Wh(t,e){return t.hasOwnProperty(e)?t[e]:null}function Zh(t){return t&&(t.hasOwnProperty(Ce)||t.hasOwnProperty(hr))?t[Ce]:null}const Eo=Me({\u0275prov:Me}),Ce=Me({\u0275inj:Me}),Qh=Me({ngInjectableDef:Me}),hr=Me({ngInjectorDef:Me});var X=(()=>((X=X||{})[X.Default=0]="Default",X[X.Host=1]="Host",X[X.Self=2]="Self",X[X.SkipSelf=4]="SkipSelf",X[X.Optional=8]="Optional",X))();let za;function Xn(t){const e=za;return za=t,e}function Yh(t,e,n){const r=$a(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&X.Optional?null:void 0!==e?e:void di(Ue(t))}function hi(t){return{toString:t}.toString()}var fr=(()=>((fr=fr||{})[fr.OnPush=0]="OnPush",fr[fr.Default=1]="Default",fr))(),St=(()=>{return(t=St||(St={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",St;var t})();const He=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ui={},Pe=[],Ha=Me({\u0275cmp:Me}),qc=Me({\u0275dir:Me}),To=Me({\u0275pipe:Me}),Xh=Me({\u0275mod:Me}),Pr=Me({\u0275fac:Me}),Ds=Me({__NG_ELEMENT_ID__:Me});let Ga=0;function Rr(t){return hi(()=>{const n=!0===t.standalone,r={},i={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===fr.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&t.dependencies||null,getStandaloneInjector:null,selectors:t.selectors||Pe,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||St.Emulated,id:"c"+Ga++,styles:t.styles||Pe,_:null,setInput:null,schemas:t.schemas||null,tView:null},s=t.dependencies,o=t.features;return i.inputs=nf(t.inputs,r),i.outputs=nf(t.outputs),o&&o.forEach(u=>u(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(Cs).filter(Nr):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(tn).filter(Nr):null,i})}function Cs(t){return We(t)||pn(t)}function Nr(t){return null!==t}const ef={};function Kr(t){return hi(()=>{const e={type:t.type,bootstrap:t.bootstrap||Pe,declarations:t.declarations||Pe,imports:t.imports||Pe,exports:t.exports||Pe,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(ef[t.id]=t.type),e})}function nf(t,e){if(null==t)return Ui;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const kt=Rr;function en(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function We(t){return t[Ha]||null}function pn(t){return t[qc]||null}function tn(t){return t[To]||null}function Fn(t,e){const n=t[Xh]||null;if(!n&&!0===e)throw new Error(`Type ${Ue(t)} does not have '\u0275mod' property.`);return n}function $t(t){return Array.isArray(t)&&"object"==typeof t[1]}function _r(t){return Array.isArray(t)&&!0===t[1]}function Ka(t){return 0!=(8&t.flags)}function Za(t){return 2==(2&t.flags)}function Co(t){return 1==(1&t.flags)}function yr(t){return null!==t.template}function Lr(t){return 0!=(256&t[2])}function gi(t,e){return t.hasOwnProperty(Pr)?t[Pr]:null}class rf{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Zc(t){return t.type.prototype.ngOnChanges&&(t.setInput=__),sf}function sf(){const t=Yc(this),e=t?.current;if(e){const n=t.previous;if(n===Ui)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function __(t,e,n,r){const i=Yc(t)||function y_(t,e){return t[Qc]=e}(t,{previous:Ui,current:null}),s=i.current||(i.current={}),o=i.previous,u=this.declaredInputs[n],c=o[u];s[u]=new rf(c&&c.currentValue,e,o===Ui),t[r]=e}const Qc="__ngSimpleChanges__";function Yc(t){return t[Qc]||null}const v="math";let x;function J(t){return!!t.listen}const Fr={createRenderer:(t,e)=>function W(){return void 0!==x?x:typeof document<"u"?document:void 0}()};function ct(t){for(;Array.isArray(t);)t=t[0];return t}function tr(t,e){return ct(e[t.index])}function eu(t,e){return t.data[e]}function Mn(t,e){const n=e[t];return $t(n)?n:n[0]}function Ps(t){return 64==(64&t[2])}function yi(t,e){return null==e?null:t[e]}function af(t){t[18]=0}function xo(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const oe={lFrame:AS(null),bindingsEnabled:!0};function IS(){return oe.bindingsEnabled}function k(){return oe.lFrame.lView}function Re(){return oe.lFrame.tView}function zt(){let t=ES();for(;null!==t&&64===t.type;)t=t.parent;return t}function ES(){return oe.lFrame.currentTNode}function vi(t,e){const n=oe.lFrame;n.currentTNode=t,n.isParent=e}function I_(){return oe.lFrame.isParent}function tu(){return oe.lFrame.bindingIndex++}function mU(t,e){const n=oe.lFrame;n.bindingIndex=n.bindingRootIndex=t,T_(e)}function T_(t){oe.lFrame.currentDirectiveIndex=t}function D_(t){oe.lFrame.currentQueryIndex=t}function yU(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function CS(t,e,n){if(n&X.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&X.Host||(i=yU(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,t=s}const r=oe.lFrame=SS();return r.currentTNode=e,r.lView=t,!0}function lf(t){const e=SS(),n=t[1];oe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function SS(){const t=oe.lFrame,e=null===t?null:t.child;return null===e?AS(t):e}function AS(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function xS(){const t=oe.lFrame;return oe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const MS=xS;function df(){const t=xS();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Un(){return oe.lFrame.selectedIndex}function Rs(t){oe.lFrame.selectedIndex=t}function hf(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:u,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:f}=s;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),u&&((t.contentHooks||(t.contentHooks=[])).push(n,u),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,u)),c&&(t.viewHooks||(t.viewHooks=[])).push(-n,c),d&&((t.viewHooks||(t.viewHooks=[])).push(n,d),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,d)),null!=f&&(t.destroyHooks||(t.destroyHooks=[])).push(n,f)}}function ff(t,e,n){kS(t,e,3,n)}function pf(t,e,n,r){(3&t[2])===n&&kS(t,e,n,r)}function C_(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function kS(t,e,n,r){const s=r??-1,o=e.length-1;let u=0;for(let c=void 0!==r?65535&t[18]:0;c<o;c++)if("number"==typeof e[c+1]){if(u=e[c],null!=r&&u>=r)break}else e[c]<0&&(t[18]+=65536),(u<s||-1==s)&&(SU(t,n,e,c),t[18]=(4294901760&t[18])+c+2),c++}function SU(t,e,n,r){const i=n[r]<0,s=n[r+1],u=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(u)}finally{}}}else try{s.call(u)}finally{}}class Xc{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function gf(t,e,n){const r=J(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],u=n[i++],c=n[i++];r?t.setAttribute(e,u,c,o):e.setAttributeNS(o,u,c)}else{const o=s,u=n[++i];A_(o)?r&&t.setProperty(e,o,u):r?t.setAttribute(e,o,u):e.setAttribute(o,u),i++}}return i}function PS(t){return 3===t||4===t||6===t}function A_(t){return 64===t.charCodeAt(0)}function mf(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||RS(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function RS(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const u=t[s++];if("number"==typeof u){if(u===e){o=-1;break}if(u>e){o=s-1;break}}}for(;s<t.length;){const u=t[s];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function NS(t){return-1!==t}function nu(t){return 32767&t}function ru(t,e){let n=function PU(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let x_=!0;function _f(t){const e=x_;return x_=t,e}let RU=0;const wi={};function tl(t,e){const n=k_(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,M_(r.data,t),M_(e,null),M_(r.blueprint,null));const i=yf(t,e),s=t.injectorIndex;if(NS(i)){const o=nu(i),u=ru(i,e),c=u[1].data;for(let d=0;d<8;d++)e[s+d]=u[o+d]|c[o+d]}return e[s+8]=i,s}function M_(t,e){t.push(0,0,0,0,0,0,0,0,e)}function k_(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function yf(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=zS(i),null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function vf(t,e,n){!function NU(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ds)&&(r=n[Ds]),null==r&&(r=n[Ds]=RU++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function FS(t,e,n){if(n&X.Optional)return t;di()}function VS(t,e,n,r){if(n&X.Optional&&void 0===r&&(r=null),0==(n&(X.Self|X.Host))){const i=t[9],s=Xn(void 0);try{return i?i.get(e,r,n&X.Optional):Yh(e,r,n&X.Optional)}finally{Xn(s)}}return FS(r,0,n)}function BS(t,e,n,r=X.Default,i){if(null!==t){if(1024&e[2]){const o=function UU(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const u=US(s,o,n,r|X.Self,wi);if(u!==wi)return u;let c=s.parent;if(!c){const d=o[21];if(d){const f=d.get(n,wi,r);if(f!==wi)return f}c=zS(o),o=o[15]}s=c}return i}(t,e,n,r,wi);if(o!==wi)return o}const s=US(t,e,n,r,wi);if(s!==wi)return s}return VS(e,n,r,i)}function US(t,e,n,r,i){const s=function FU(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Ds)?t[Ds]:void 0;return"number"==typeof e?e>=0?255&e:VU:e}(n);if("function"==typeof s){if(!CS(e,t,r))return r&X.Host?FS(i,0,r):VS(e,n,r,i);try{const o=s(r);if(null!=o||r&X.Optional)return o;di()}finally{MS()}}else if("number"==typeof s){let o=null,u=k_(t,e),c=-1,d=r&X.Host?e[16][6]:null;for((-1===u||r&X.SkipSelf)&&(c=-1===u?yf(t,e):e[u+8],-1!==c&&$S(r,!1)?(o=e[1],u=nu(c),e=ru(c,e)):u=-1);-1!==u;){const f=e[1];if(jS(s,u,f.data)){const p=LU(u,e,n,o,r,d);if(p!==wi)return p}c=e[u+8],-1!==c&&$S(r,e[1].data[u+8]===d)&&jS(s,u,e)?(o=f,u=nu(c),e=ru(c,e)):u=-1}}return i}function LU(t,e,n,r,i,s){const o=e[1],u=o.data[t+8],f=function wf(t,e,n,r,i){const s=t.providerIndexes,o=e.data,u=1048575&s,c=t.directiveStart,f=s>>20,_=i?u+f:t.directiveEnd;for(let y=r?u:u+f;y<_;y++){const w=o[y];if(y<c&&n===w||y>=c&&w.type===n)return y}if(i){const y=o[c];if(y&&yr(y)&&y.type===n)return c}return null}(u,o,n,null==r?Za(u)&&x_:r!=o&&0!=(3&u.type),i&X.Host&&s===u);return null!==f?nl(e,o,f,u):wi}function nl(t,e,n,r){let i=t[n];const s=e.data;if(function AU(t){return t instanceof Xc}(i)){const o=i;o.resolving&&function Io(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new pe(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Ee(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():q(t)}(s[n]));const u=_f(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Xn(o.injectImpl):null;CS(t,r,X.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function CU(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Zc(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==c&&Xn(c),_f(u),o.resolving=!1,MS()}}return i}function jS(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function $S(t,e){return!(t&X.Self||t&X.Host&&e)}class iu{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return BS(this._tNode,this._lView,e,r,n)}}function VU(){return new iu(zt(),k())}function zS(t){const e=t[1],n=e.type;return 2===n?e.declTNode:1===n?t[6]:null}const ou="__parameters__";function uu(t,e,n){return hi(()=>{const r=function R_(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return u.annotation=o,u;function u(c,d,f){const p=c.hasOwnProperty(ou)?c[ou]:Object.defineProperty(c,ou,{value:[]})[ou];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class me{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=ce({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const $U=new me("AnalyzeForEntryComponents");function Ki(t,e){t.forEach(n=>Array.isArray(n)?Ki(n,e):e(n))}function GS(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function If(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const al={},F_="__NG_DI_FLAG__",Tf="ngTempTokenPath",XU=/\n/gm,ZS="__source";let ul;function bf(t){const e=ul;return ul=t,e}function tj(t,e=X.Default){if(void 0===ul)throw new pe(-203,"");return null===ul?Yh(t,void 0,e):ul.get(t,e&X.Optional?null:void 0,e)}function Q(t,e=X.Default){return(function i_(){return za}()||tj)(te(t),e)}function V_(t){const e=[];for(let n=0;n<t.length;n++){const r=te(t[n]);if(Array.isArray(r)){if(0===r.length)throw new pe(900,"");let i,s=X.Default;for(let o=0;o<r.length;o++){const u=r[o],c=rj(u);"number"==typeof c?-1===c?i=u.token:s|=c:i=u}e.push(Q(i,s))}else e.push(Q(r))}return e}function cl(t,e){return t[F_]=e,t.prototype[F_]=e,t}function rj(t){return t[F_]}const Df=cl(uu("Inject",t=>({token:t})),-1),Gt=cl(uu("Optional"),8),ll=cl(uu("SkipSelf"),4);function W_(t){return t.ngOriginalError}class hu{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&W_(e);for(;n&&W_(n);)n=W_(n);return n||null}}const K_=new Map;let Zj=0;const Q_="__ngContext__";function kn(t,e){$t(e)?(t[Q_]=e[20],function Yj(t){K_.set(t[20],t)}(e)):t[Q_]=e}function ml(t){const e=t[Q_];return"number"==typeof e?function _A(t){return K_.get(t)||null}(e):e||null}function Y_(t){const e=ml(t);return e?$t(e)?e:e.lView:null}const o$=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(He))();function Zi(t){return t instanceof Function?t():t}var Ir=(()=>((Ir=Ir||{})[Ir.Important=1]="Important",Ir[Ir.DashCase=2]="DashCase",Ir))();function X_(t,e){return undefined(t,e)}function _l(t){const e=t[3];return _r(e)?e[3]:e}function ey(t){return CA(t[13])}function ty(t){return CA(t[4])}function CA(t){for(;null!==t&&!_r(t);)t=t[4];return t}function pu(t,e,n,r,i){if(null!=r){let s,o=!1;_r(r)?s=r:$t(r)&&(o=!0,r=r[0]);const u=ct(r);0===t&&null!==n?null==i?PA(e,n,u):Mo(e,n,u,i||null,!0):1===t&&null!==n?Mo(e,n,u,i||null,!0):2===t?function UA(t,e,n){const r=Pf(t,e);r&&function I$(t,e,n,r){J(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,u,o):3===t&&e.destroyNode(u),null!=s&&function b$(t,e,n,r,i){const s=n[7];s!==ct(n)&&pu(e,t,r,s,i);for(let u=10;u<n.length;u++){const c=n[u];yl(c[1],c,t,e,r,s)}}(e,t,s,n,i)}}function ry(t,e,n){if(J(t))return t.createElement(e,n);{const r=null!==n?function D(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":e===v?"http://www.w3.org/1998/MathML/":null}(n):null;return null===r?t.createElement(e):t.createElementNS(r,e)}}function AA(t,e){const n=t[9],r=n.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,xo(i,-1)),n.splice(r,1)}function iy(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&AA(i,r),e>0&&(t[n-1][4]=r[4]);const s=If(t,10+e);!function f$(t,e){yl(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function xA(t,e){if(!(128&e[2])){const n=e[11];J(n)&&n.destroyNode&&yl(t,e,n,3,null,null),function m$(t){let e=t[13];if(!e)return sy(t[1],t);for(;e;){let n=null;if($t(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)$t(e)&&sy(e[1],e),e=e[3];null===e&&(e=t),$t(e)&&sy(e[1],e),n=e&&e[4]}e=n}}(e)}}function sy(t,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function w$(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Xc)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const u=i[s[o]],c=s[o+1];try{c.call(u)}finally{}}else try{s.call(i)}finally{}}}}(t,e),function v$(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+1],u="function"==typeof o?o(e):ct(e[o]),c=r[i=n[s+2]],d=n[s+3];"boolean"==typeof d?u.removeEventListener(n[s],c,d):d>=0?r[i=d]():r[i=-d].unsubscribe(),s+=2}else{const o=r[i=n[s+1]];n[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)r[s]();e[7]=null}}(t,e),1===e[1].type&&J(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&_r(e[3])){n!==e[3]&&AA(n,e);const r=e[19];null!==r&&r.detachView(t)}!function Jj(t){K_.delete(t[20])}(e)}}function MA(t,e,n){return function kA(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const i=t.data[r.directiveStart].encapsulation;if(i===St.None||i===St.Emulated)return null}return tr(r,n)}(t,e.parent,n)}function Mo(t,e,n,r,i){J(t)?t.insertBefore(e,n,r,i):(NA(e)?e.content:e).insertBefore(n,r,i)}function PA(t,e,n){J(t)?t.appendChild(e,n):(NA(e)?e.content:e).appendChild(n)}function RA(t,e,n,r,i){null!==r?Mo(t,e,n,r,i):PA(t,e,n)}function NA(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}function Pf(t,e){return J(t)?t.parentNode(e):e.parentNode}let FA=function LA(t,e,n){return 40&t.type?tr(t,n):null};function Rf(t,e,n,r){const i=MA(t,r,e),s=e[11],u=function OA(t,e,n){return FA(t,e,n)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let c=0;c<n.length;c++)RA(s,i,n[c],u,!1);else RA(s,i,n,u,!1)}function Nf(t,e){if(null!==e){const n=e.type;if(3&n)return tr(e,t);if(4&n)return ay(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Nf(t,r);{const i=t[e.index];return _r(i)?ay(-1,i):ct(i)}}if(32&n)return X_(e,t)()||ct(t[e.index]);{const r=BA(t,e);return null!==r?Array.isArray(r)?r[0]:Nf(_l(t[16]),r):Nf(t,e.next)}}return null}function BA(t,e){return null!==e?t[16][6].projection[e.projection]:null}function ay(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return Nf(r,i)}return e[7]}function uy(t,e,n,r,i,s,o){for(;null!=n;){const u=r[n.index],c=n.type;if(o&&0===e&&(u&&kn(ct(u),r),n.flags|=4),64!=(64&n.flags))if(8&c)uy(t,e,n.child,r,i,s,!1),pu(e,t,i,u,s);else if(32&c){const d=X_(n,r);let f;for(;f=d();)pu(e,t,i,f,s);pu(e,t,i,u,s)}else 16&c?jA(t,e,r,n,i,s):pu(e,t,i,u,s);n=o?n.projectionNext:n.next}}function yl(t,e,n,r,i,s){uy(n,r,t.firstChild,e,i,s,!1)}function jA(t,e,n,r,i,s){const o=n[16],c=o[6].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++)pu(e,t,i,c[d],s);else uy(t,e,c,o[3],i,s,!0)}function $A(t,e,n){J(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function cy(t,e,n){J(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function zA(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}const HA="ng-template";function C$(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==zA(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function GA(t){return 4===t.type&&t.value!==HA}function S$(t,e,n){return e===(4!==t.type||n?t.value:HA)}function A$(t,e,n){let r=4;const i=t.attrs||[],s=function k$(t){for(let e=0;e<t.length;e++)if(PS(t[e]))return e;return t.length}(i);let o=!1;for(let u=0;u<e.length;u++){const c=e[u];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!S$(t,c,n)||""===c&&1===e.length){if(Qr(r))return!1;o=!0}}else{const d=8&r?c:e[++u];if(8&r&&null!==t.attrs){if(!C$(t.attrs,d,n)){if(Qr(r))return!1;o=!0}continue}const p=x$(8&r?"class":c,i,GA(t),n);if(-1===p){if(Qr(r))return!1;o=!0;continue}if(""!==d){let _;_=p>s?"":i[p+1].toLowerCase();const y=8&r?_:null;if(y&&-1!==zA(y,d,0)||2&r&&d!==_){if(Qr(r))return!1;o=!0}}}}else{if(!o&&!Qr(r)&&!Qr(c))return!1;if(o&&Qr(c))continue;o=!1,r=c|1&r}}return Qr(r)||o}function Qr(t){return 0==(1&t)}function x$(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let u=e[++i];for(;"string"==typeof u;)u=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function P$(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function qA(t,e,n=!1){for(let r=0;r<e.length;r++)if(A$(t,e[r],n))return!0;return!1}function WA(t,e){return t?":not("+e.trim()+")":e}function N$(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const u=t[++n];i+="["+o+(u.length>0?'="'+u+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Qr(o)&&(e+=WA(s,i),i=""),r=o,s=s||!Qr(r);n++}return""!==i&&(e+=WA(s,i)),e}const fe={};function gu(t){KA(Re(),k(),Un()+t,!1)}function KA(t,e,n,r){if(!r)if(3==(3&e[2])){const s=t.preOrderCheckHooks;null!==s&&ff(e,s,n)}else{const s=t.preOrderHooks;null!==s&&pf(e,s,0,n)}Rs(n)}const JA=new me("ENVIRONMENT_INITIALIZER"),XA=new me("INJECTOR_DEF_TYPES");function $$(...t){return{\u0275providers:ex(0,t)}}function ex(t,...e){const n=[],r=new Set;let i;return Ki(e,s=>{const o=s;ly(o,n,[],r)&&(i||(i=[]),i.push(o))}),void 0!==i&&tx(i,n),n}function tx(t,e){for(let n=0;n<t.length;n++){const{providers:i}=t[n];Ki(i,s=>{e.push(s)})}}function ly(t,e,n,r){if(!(t=te(t)))return!1;let i=null,s=Zh(t);const o=!s&&We(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const c=t.ngModule;if(s=Zh(c),!s)return!1;i=c}const u=r.has(i);if(o){if(u)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of c)ly(d,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!u){let d;r.add(i);try{Ki(s.imports,f=>{ly(f,e,n,r)&&(d||(d=[]),d.push(f))})}finally{}void 0!==d&&tx(d,e)}if(!u){const d=gi(i)||(()=>new i);e.push({provide:i,useFactory:d,deps:Pe},{provide:XA,useValue:i,multi:!0},{provide:JA,useValue:()=>Q(i),multi:!0})}const c=s.providers;null==c||u||Ki(c,f=>{e.push(f)})}}return i!==t&&void 0!==t.providers}const z$=Me({provide:String,useValue:Me});function dy(t){return null!==t&&"object"==typeof t&&z$ in t}function ko(t){return"function"==typeof t}const hy=new me("INJECTOR",-1);class ix{get(e,n=al){if(n===al){const r=new Error(`NullInjectorError: No provider for ${Ue(e)}!`);throw r.name="NullInjectorError",r}return n}}const fy=new me("Set Injector scope."),Of={},G$={};let py;function gy(){return void 0===py&&(py=new ix),py}class Po{}class sx extends Po{constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_y(e,o=>this.processProvider(o)),this.records.set(hy,mu(void 0,this)),i.has("environment")&&this.records.set(Po,mu(void 0,this));const s=this.records.get(fy);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(XA.multi,Pe,X.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}get(e,n=al,r=X.Default){this.assertNotDestroyed();const i=bf(this),s=Xn(void 0);try{if(!(r&X.SkipSelf)){let u=this.records.get(e);if(void 0===u){const c=function Q$(t){return"function"==typeof t||"object"==typeof t&&t instanceof me}(e)&&$a(e);u=c&&this.injectableDefInScope(c)?mu(my(e),Of):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&X.Self?gy():this.parent).get(e,n=r&X.Optional&&n===al?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[Tf]=o[Tf]||[]).unshift(Ue(e)),i)throw o;return function ij(t,e,n,r){const i=t[Tf];throw e[ZS]&&i.unshift(e[ZS]),t.message=function sj(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Ue(e);if(Array.isArray(e))i=e.map(Ue).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let u=e[o];s.push(o+":"+("string"==typeof u?JSON.stringify(u):Ue(u)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(XU,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Tf]=null,t}(o,e,"R3InjectorError",this.source)}throw o}finally{Xn(s),bf(i)}}resolveInjectorInitializers(){const e=bf(this),n=Xn(void 0);try{const r=this.get(JA.multi,Pe,X.Self);for(const i of r)i()}finally{bf(e),Xn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Ue(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,!1)}processProvider(e){let n=ko(e=te(e))?e:te(e&&e.provide);const r=function W$(t){return dy(t)?mu(void 0,t.useValue):mu(function ox(t,e,n){let r;if(ko(t)){const i=te(t);return gi(i)||my(i)}if(dy(t))r=()=>te(t.useValue);else if(function rx(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...V_(t.deps||[]));else if(function nx(t){return!(!t||!t.useExisting)}(t))r=()=>Q(te(t.useExisting));else{const i=te(t&&(t.useClass||t.provide));if(!function K$(t){return!!t.deps}(t))return gi(i)||my(i);r=()=>new i(...V_(t.deps))}return r}(t),Of)}(e);if(ko(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=mu(void 0,Of,!0),i.factory=()=>V_(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Of&&(n.value=G$,n.value=n.factory()),"object"==typeof n.value&&n.value&&function Z$(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=te(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function my(t){const e=$a(t),n=null!==e?e.factory:gi(t);if(null!==n)return n;if(t instanceof me)throw new pe(204,!1);if(t instanceof Function)return function q$(t){const e=t.length;if(e>0)throw function ol(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new pe(204,!1);const n=function Kh(t){const e=t&&(t[Eo]||t[Qh]);if(e){const n=function Gc(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new pe(204,!1)}function mu(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Y$(t){return!!t.\u0275providers}function _y(t,e){for(const n of t)Array.isArray(n)?_y(n,e):Y$(n)?_y(n.\u0275providers,e):e(n)}function ax(t,e=null,n=null,r){const i=ux(t,e,n,r);return i.resolveInjectorInitializers(),i}function ux(t,e=null,n=null,r,i=new Set){const s=[n||Pe,$$(t)];return r=r||("object"==typeof t?void 0:Ue(t)),new sx(s,e||gy(),r||null,i)}let $n=(()=>{class t{static create(n,r){if(Array.isArray(n))return ax({name:""},r,n,"");{const i=n.name??"";return ax({name:i},n.parent,n.providers,i)}}}return t.THROW_IF_NOT_FOUND=al,t.NULL=new ix,t.\u0275prov=ce({token:t,providedIn:"any",factory:()=>Q(hy)}),t.__NG_ELEMENT_ID__=-1,t})();function Y(t,e=X.Default){const n=k();return null===n?Q(t,e):BS(zt(),n,te(t),e)}function Ey(){throw new Error("invalid")}function Ax(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const o=t.data[s];D_(i),o.contentQueries(2,e[s],s)}}}function vl(t,e,n,r,i,s,o,u,c,d,f){const p=e.blueprint.slice();return p[0]=i,p[2]=76|r,(null!==f||t&&1024&t[2])&&(p[2]|=1024),af(p),p[3]=p[15]=t,p[8]=n,p[10]=o||t&&t[10],p[11]=u||t&&t[11],p[12]=c||t&&t[12]||null,p[9]=d||t&&t[9]||null,p[6]=s,p[20]=function Qj(){return Zj++}(),p[21]=f,p[16]=2==e.type?t[16]:p,p}function yu(t,e,n,r,i){let s=t.data[e];if(null===s)s=function Fy(t,e,n,r,i){const s=ES(),o=I_(),c=t.data[e]=function xz(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c)),c}(t,e,n,r,i),function gU(){return oe.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function Jc(){const t=oe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return vi(s,!0),s}function vu(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function wl(t,e,n){lf(e);try{const r=t.viewQuery;null!==r&&qy(1,r,n);const i=t.template;null!==i&&xx(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ax(t,e),t.staticViewQueries&&qy(2,t.viewQuery,n);const s=t.components;null!==s&&function Cz(t,e){for(let n=0;n<e.length;n++)Wz(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,df()}}function wu(t,e,n,r){const i=e[2];if(128!=(128&i)){lf(e);try{af(e),function TS(t){return oe.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&xx(t,e,n,2,r);const o=3==(3&i);if(o){const d=t.preOrderCheckHooks;null!==d&&ff(e,d,null)}else{const d=t.preOrderHooks;null!==d&&pf(e,d,0,null),C_(e,0)}if(function Gz(t){for(let e=ey(t);null!==e;e=ty(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const i=n[r],s=i[3];0==(512&i[2])&&xo(s,1),i[2]|=512}}}(e),function Hz(t){for(let e=ey(t);null!==e;e=ty(e))for(let n=10;n<e.length;n++){const r=e[n],i=r[1];Ps(r)&&wu(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&Ax(t,e),o){const d=t.contentCheckHooks;null!==d&&ff(e,d)}else{const d=t.contentHooks;null!==d&&pf(e,d,1),C_(e,1)}!function bz(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)Rs(~i);else{const s=i,o=n[++r],u=n[++r];mU(o,s),u(2,e[s])}}}finally{Rs(-1)}}(t,e);const u=t.components;null!==u&&function Dz(t,e){for(let n=0;n<e.length;n++)qz(t,e[n])}(e,u);const c=t.viewQuery;if(null!==c&&qy(2,c,r),o){const d=t.viewCheckHooks;null!==d&&ff(e,d)}else{const d=t.viewHooks;null!==d&&pf(e,d,2),C_(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,xo(e[3],-1))}finally{df()}}}function Sz(t,e,n,r){const i=e[10],o=function gt(t){return 4==(4&t[2])}(e);try{!o&&i.begin&&i.begin(),o&&wl(t,e,r),wu(t,e,n,r)}finally{!o&&i.end&&i.end()}}function xx(t,e,n,r,i){const s=Un(),o=2&r;try{Rs(-1),o&&e.length>22&&KA(t,e,22,!1),n(r,i)}finally{Rs(s)}}function Vy(t,e,n){!IS()||(function Lz(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||tl(n,e),kn(r,e);const o=n.initialInputs;for(let u=i;u<s;u++){const c=t.data[u],d=yr(c);d&&jz(e,n,c);const f=nl(e,t,u,n);kn(f,e),null!==o&&$z(0,u-i,f,c,0,o),d&&(Mn(n.index,e)[8]=f)}}(t,e,n,tr(n,e)),128==(128&n.flags)&&function Fz(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function _U(){return oe.lFrame.currentDirectiveIndex}();try{Rs(s);for(let u=r;u<i;u++){const c=t.data[u],d=e[u];T_(u),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&Fx(c,d)}}finally{Rs(-1),T_(o)}}(t,e,n))}function By(t,e,n=tr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],u=-1===o?n(e,t):t[o];t[i++]=u}}}function kx(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Uf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Uf(t,e,n,r,i,s,o,u,c,d){const f=22+r,p=f+i,_=function Az(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:fe);return n}(f,p),y="function"==typeof d?d():d;return _[1]={type:t,blueprint:_,template:n,queries:null,viewQuery:u,declTNode:e,data:_.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:y,incompleteFirstPass:!1}}function Ox(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Uy(t,e,n,r){let i=!1;if(IS()){const s=function Vz(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];qA(n,o.selectors,!1)&&(i||(i=[]),vf(tl(n,e),t,o.type),yr(o)?(Vx(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){i=!0,Bx(n,t.data.length,s.length);for(let f=0;f<s.length;f++){const p=s[f];p.providersResolver&&p.providersResolver(p)}let u=!1,c=!1,d=vu(t,e,s.length,null);for(let f=0;f<s.length;f++){const p=s[f];n.mergedAttrs=mf(n.mergedAttrs,p.hostAttrs),Ux(t,n,e,d,p),Uz(d,p,o),null!==p.contentQueries&&(n.flags|=8),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(n.flags|=128);const _=p.type.prototype;!u&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),u=!0),!c&&(_.ngOnChanges||_.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),c=!0),d++}!function Mz(t,e){const r=e.directiveEnd,i=t.data,s=e.attrs,o=[];let u=null,c=null;for(let d=e.directiveStart;d<r;d++){const f=i[d],p=f.inputs,_=null===s||GA(e)?null:zz(p,s);o.push(_),u=Ox(p,d,u),c=Ox(f.outputs,d,c)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=16),u.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=u,e.outputs=c}(t,n)}o&&function Bz(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new pe(-301,!1);r.push(e[i],s)}}}(n,r,o)}return n.mergedAttrs=mf(n.mergedAttrs,n.attrs),i}function Lx(t,e,n,r,i,s){const o=s.hostBindings;if(o){let u=t.hostBindingOpCodes;null===u&&(u=t.hostBindingOpCodes=[]);const c=~e.index;(function Oz(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(u)!=c&&u.push(c),u.push(r,i,o)}}function Fx(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Vx(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Uz(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;yr(e)&&(n[""]=t)}}function Bx(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Ux(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=gi(i.type)),o=new Xc(s,yr(i),Y);t.blueprint[r]=o,n[r]=o,Lx(t,e,0,r,vu(t,n,i.hostVars,fe),i)}function jz(t,e,n){const r=tr(e,t),i=kx(n),s=t[10],o=jf(t,vl(t,i,null,n.onPush?32:16,r,e,s,s.createRenderer(r,n),null,null,null));t[e.index]=o}function $z(t,e,n,r,i,s){const o=s[e];if(null!==o){const u=r.setInput;for(let c=0;c<o.length;){const d=o[c++],f=o[c++],p=o[c++];null!==u?r.setInput(n,p,d,f):n[f]=p}}}function zz(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function jx(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function qz(t,e){const n=Mn(e,t);if(Ps(n)){const r=n[1];48&n[2]?wu(r,n,r.template,n[8]):n[5]>0&&$y(n)}}function $y(t){for(let r=ey(t);null!==r;r=ty(r))for(let i=10;i<r.length;i++){const s=r[i];if(512&s[2]){const o=s[1];wu(o,s,o.template,s[8])}else s[5]>0&&$y(s)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Mn(n[r],t);Ps(i)&&i[5]>0&&$y(i)}}function Wz(t,e){const n=Mn(e,t),r=n[1];(function Kz(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),wl(r,n,n[8])}function jf(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Gy(t,e,n){const r=e[10];r.begin&&r.begin();try{wu(t,e,t.template,n)}catch(i){throw function qx(t,e){const n=t[9],r=n?n.get(hu,null):null;r&&r.handleError(e)}(e,i),i}finally{r.end&&r.end()}}function $x(t){!function Hy(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Y_(n);if(null!==r){const i=r[1];Sz(i,r,i.template,n)}}}(t[8])}function qy(t,e,n){D_(0),e(t,n)}const Qz=(()=>Promise.resolve(null))();function Wx(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],u=n[s++],c=e[o],d=t.data[o];null!==d.setInput?d.setInput(c,i,r,u):c[u]=i}}function Yi(t,e,n){const r=function Xa(t,e){return ct(e[t])}(e,t);!function SA(t,e,n){J(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function $f(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const u=e[o];"number"==typeof u?s=u:1==s?i=de(i,u):2==s&&(r=de(r,u+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function aH(){const t=zt();hf(k()[1],t)}let zf=null;function Ro(){if(!zf){const t=He.Symbol;if(t&&t.iterator)zf=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(zf=r)}}}return zf}function Il(t){return!!function Zy(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ro()in t)}function Pn(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function No(t,e,n,r){const i=Pn(t,e,n);return Pn(t,e+1,r)||i}function Tu(t,e,n,r,i,s){const u=No(t,function qi(){return oe.lFrame.bindingIndex}(),n,i);return function Wi(t){const e=oe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2),u?e+q(n)+r+q(i)+s:fe}function Yy(t,e,n,r,i,s,o,u){const c=k(),d=Re(),f=t+22,p=d.firstCreatePass?function yH(t,e,n,r,i,s,o,u,c){const d=e.consts,f=yu(e,t,4,o||null,yi(d,u));Uy(e,n,f,yi(d,c)),hf(e,f);const p=f.tViews=Uf(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d);return null!==e.queries&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}(f,d,c,e,n,r,i,s,o):d.data[f];vi(p,!1);const _=c[11].createComment("");Rf(d,c,_,p),kn(_,c),jf(c,c[f]=jx(_,c,_,p)),Co(p)&&Vy(d,c,p),null!=o&&By(c,p,u)}function Gf(t,e,n){const r=k();return Pn(r,tu(),e)&&function Er(t,e,n,r,i,s,o,u){const c=tr(e,n);let f,d=e.inputs;!u&&null!=d&&(f=d[r])?(Wx(t,n,f,r,i),Za(e)&&function Pz(t,e){const n=Mn(e,t);16&n[2]||(n[2]|=32)}(n,e.index)):3&e.type&&(r=function kz(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,J(s)?s.setProperty(c,r,i):A_(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}(Re(),function wt(){const t=oe.lFrame;return eu(t.tView,t.selectedIndex)}(),r,t,e,r[11],n,!1),Gf}function Jy(t,e,n,r,i){const o=i?"class":"style";Wx(t,n,e.inputs[o],o,r)}function Vs(t,e,n,r){const i=k(),s=Re(),o=22+t,u=i[11],c=i[o]=ry(u,e,function DU(){return oe.lFrame.currentNamespace}()),d=s.firstCreatePass?function IH(t,e,n,r,i,s,o){const u=e.consts,d=yu(e,t,2,i,yi(u,s));return Uy(e,n,d,yi(u,o)),null!==d.attrs&&$f(d,d.attrs,!1),null!==d.mergedAttrs&&$f(d,d.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,d),d}(o,s,i,0,e,n,r):s.data[o];vi(d,!0);const f=d.mergedAttrs;null!==f&&gf(u,c,f);const p=d.classes;null!==p&&cy(u,c,p);const _=d.styles;return null!==_&&$A(u,c,_),64!=(64&d.flags)&&Rf(s,i,c,d),0===function aU(){return oe.lFrame.elementDepthCount}()&&kn(c,i),function uU(){oe.lFrame.elementDepthCount++}(),Co(d)&&(Vy(s,i,d),function Mx(t,e,n){if(Ka(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=t.data[s];o.contentQueries&&o.contentQueries(1,n[s],s)}}}(s,d,i)),null!==r&&By(i,d),Vs}function Bs(){let t=zt();I_()?function E_(){oe.lFrame.isParent=!1}():(t=t.parent,vi(t,!1));const e=t;!function cU(){oe.lFrame.elementDepthCount--}();const n=Re();return n.firstCreatePass&&(hf(n,t),Ka(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function MU(t){return 0!=(16&t.flags)}(e)&&Jy(n,e,k(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function kU(t){return 0!=(32&t.flags)}(e)&&Jy(n,e,k(),e.stylesWithoutHost,!1),Bs}function qf(t,e,n,r){return Vs(t,e,n,r),Bs(),qf}function Wf(t){return!!t&&"function"==typeof t.then}const yM=function _M(t){return!!t&&"function"==typeof t.subscribe};function EM(t=1){return function vU(t){return(oe.lFrame.contextLView=function wU(t,e){for(;t>0;)e=e[15],t--;return e}(t,oe.lFrame.contextLView))[8]}(t)}function Qf(t,e=""){const n=k(),r=Re(),i=t+22,s=r.firstCreatePass?yu(r,i,1,e,null):r.data[i],o=n[i]=function ny(t,e){return J(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Rf(r,n,o,s),vi(s,!1)}function iv(t){return Yf("",t,""),iv}function Yf(t,e,n){const r=k(),i=function Eu(t,e,n,r){return Pn(t,tu(),n)?e+q(n)+r:fe}(r,t,e,n);return i!==fe&&Yi(r,Un(),i),Yf}function sv(t,e,n,r,i){const s=k(),o=Tu(s,t,e,n,r,i);return o!==fe&&Yi(s,Un(),o),sv}const Oo=void 0;var dG=["en",[["a","p"],["AM","PM"],Oo],[["AM","PM"],Oo,Oo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Oo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Oo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Oo,"{1} 'at' {0}",Oo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function lG(t){const n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}];let ku={};function zn(t){const e=function hG(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=hk(e);if(n)return n;const r=e.split("-")[0];if(n=hk(r),n)return n;if("en"===r)return dG;throw new Error(`Missing locale data for the locale "${t}".`)}function hk(t){return t in ku||(ku[t]=He.ng&&He.ng.common&&He.ng.common.locales&&He.ng.common.locales[t]),ku[t]}var z=(()=>((z=z||{})[z.LocaleId=0]="LocaleId",z[z.DayPeriodsFormat=1]="DayPeriodsFormat",z[z.DayPeriodsStandalone=2]="DayPeriodsStandalone",z[z.DaysFormat=3]="DaysFormat",z[z.DaysStandalone=4]="DaysStandalone",z[z.MonthsFormat=5]="MonthsFormat",z[z.MonthsStandalone=6]="MonthsStandalone",z[z.Eras=7]="Eras",z[z.FirstDayOfWeek=8]="FirstDayOfWeek",z[z.WeekendRange=9]="WeekendRange",z[z.DateFormat=10]="DateFormat",z[z.TimeFormat=11]="TimeFormat",z[z.DateTimeFormat=12]="DateTimeFormat",z[z.NumberSymbols=13]="NumberSymbols",z[z.NumberFormats=14]="NumberFormats",z[z.CurrencyCode=15]="CurrencyCode",z[z.CurrencySymbol=16]="CurrencySymbol",z[z.CurrencyName=17]="CurrencyName",z[z.Currencies=18]="Currencies",z[z.Directionality=19]="Directionality",z[z.PluralCase=20]="PluralCase",z[z.ExtraData=21]="ExtraData",z))();const Pu="en-US";let fk=Pu;class hq{resolveComponentFactory(e){throw function dq(t){const e=Error(`No component factory found for ${Ue(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(e)}}let Al=(()=>{class t{}return t.NULL=new hq,t})();class Us{}class Uk{}class jk{}function pq(){return Nu(zt(),k())}function Nu(t,e){return new js(tr(t,e))}let js=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=pq,t})();class $k{}let yq=(()=>{class t{}return t.\u0275prov=ce({token:t,providedIn:"root",factory:()=>null}),t})();class xl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const zk=new xl("14.0.1"),hv={};function rp(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(ct(s)),_r(s))for(let u=10;u<s.length;u++){const c=s[u],d=c[1].firstChild;null!==d&&rp(c[1],c,d,r)}const o=n.type;if(8&o)rp(t,e,n.child,r);else if(32&o){const u=X_(n,e);let c;for(;c=u();)r.push(c)}else if(16&o){const u=BA(e,n);if(Array.isArray(u))r.push(...u);else{const c=_l(e[16]);rp(c[1],c,u,r,!0)}}n=i?n.projectionNext:n.next}return r}class Ml{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return rp(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(_r(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(iy(e,r),If(n,r))}this._attachedToViewContainer=!1}xA(this._lView[1],this._lView)}onDestroy(e){!function Nx(t,e,n,r){const i=function zx(t){return t[7]||(t[7]=[])}(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&function Hx(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){!function zy(t){for(;t;){t[2]|=32;const e=_l(t);if(Lr(t)&&!e)return t;t=e}return null}(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Gy(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function g$(t,e){yl(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new pe(902,"");this._appRef=e}}class vq extends Ml{constructor(e){super(e),this._view=e}detectChanges(){$x(this._view)}checkNoChanges(){}get context(){return null}}class fv extends Al{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=We(e);return new pv(n,this.ngModule)}}function Hk(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class Iq{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){const i=this.injector.get(e,hv,r);return i!==hv||n===hv?i:this.parentInjector.get(e,n,r)}}class pv extends jk{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function O$(t){return t.map(N$).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return Hk(this.componentDef.inputs)}get outputs(){return Hk(this.componentDef.outputs)}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof Po?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new Iq(e,s):e,u=o.get($k,Fr),c=o.get(yq,null),d=u.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=r?function Rx(t,e,n){if(J(t))return t.selectRootElement(e,n===St.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(d,r,this.componentDef.encapsulation):ry(u.createRenderer(null,this.componentDef),f,function wq(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?v:null}(f)),_=this.componentDef.onPush?288:272,y=function iM(t,e){return{components:[],scheduler:t||o$,clean:Qz,playerHandler:e||null,flags:0}}(),w=Uf(0,null,null,1,0,null,null,null,null,null),E=vl(null,w,y,_,null,null,u,d,c,o,null);let b,M;lf(E);try{const P=function nM(t,e,n,r,i,s){const o=n[1];n[22]=t;const c=yu(o,22,2,"#host",null),d=c.mergedAttrs=e.hostAttrs;null!==d&&($f(c,d,!0),null!==t&&(gf(i,t,d),null!==c.classes&&cy(i,t,c.classes),null!==c.styles&&$A(i,t,c.styles)));const f=r.createRenderer(t,e),p=vl(n,kx(e),null,e.onPush?32:16,n[22],c,r,f,s||null,null,null);return o.firstCreatePass&&(vf(tl(c,n),o,e.type),Vx(o,c),Bx(c,n.length,1)),jf(n,p),n[22]=p}(p,this.componentDef,E,u,d);if(p)if(r)gf(d,p,["ng-version",zk.full]);else{const{attrs:S,classes:F}=function L$(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Qr(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);S&&gf(d,p,S),F&&F.length>0&&cy(d,p,F.join(" "))}if(M=eu(w,22),void 0!==n){const S=M.projection=[];for(let F=0;F<this.ngContentSelectors.length;F++){const H=n[F];S.push(null!=H?Array.from(H):null)}}b=function rM(t,e,n,r,i){const s=n[1],o=function Nz(t,e,n){const r=zt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ux(t,r,e,vu(t,e,1,null),n));const i=nl(e,t,r.directiveStart,r);kn(i,e);const s=tr(r,e);return s&&kn(s,e),i}(s,n,e);if(r.components.push(o),t[8]=o,null!==i)for(const c of i)c(o,e);if(e.contentQueries){const c=zt();e.contentQueries(1,o,c.directiveStart)}const u=zt();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Rs(u.index),Lx(n[1],u,0,u.directiveStart,u.directiveEnd,e),Fx(e,o)),o}(P,this.componentDef,E,y,[aH]),wl(w,E,null)}finally{df()}return new Tq(this.componentType,b,Nu(M,E),E,M)}}class Tq extends class fq{}{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new vq(i),this.componentType=e}get injector(){return new iu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class Gk extends Us{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new fv(this);const r=Fn(e);this._bootstrapComponents=Zi(r.bootstrap),this._r3Injector=ux(e,n,[{provide:Us,useValue:this},{provide:Al,useValue:this.componentFactoryResolver}],Ue(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(e)}get(e,n=$n.THROW_IF_NOT_FOUND,r=X.Default){return e===$n||e===Us||e===hy?this:this._r3Injector.get(e,n,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class gv extends Uk{constructor(e){super(),this.moduleType=e}create(e){return new Gk(this.moduleType,e)}}class Dq extends Us{constructor(e,n,r){super(),this.componentFactoryResolver=new fv(this),this.instance=null;const i=new sx([...e,{provide:Us,useValue:this},{provide:Al,useValue:this.componentFactoryResolver}],n||gy(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function ip(t,e=null,n=null){return new Dq(t,e,n).injector}function Wk(t,e,n,r,i,s,o){const u=e+n;return No(t,u,i,s)?function Ti(t,e,n){return t[e]=n}(t,u+2,o?r.call(o,i,s):r(i,s)):function kl(t,e){const n=t[e];return n===fe?void 0:n}(t,u+2)}function Jk(t,e,n,r){const i=t+22,s=k(),o=function ks(t,e){return t[e]}(s,i);return function Pl(t,e){return t[1].data[e].pure}(s,i)?Wk(s,function Bn(){const t=oe.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,o.transform,n,r,o):o.transform(n,r)}function mv(t){return e=>{setTimeout(t,void 0,e)}}const Hn=class Hq extends qe{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=mv(s),i&&(i=mv(i)),o&&(o=mv(o)));const u=super.subscribe({next:i,error:s,complete:o});return e instanceof Dn&&e.add(u),u}};let Ji=(()=>{class t{}return t.__NG_ELEMENT_ID__=Kq,t})();const qq=Ji,Wq=class extends qq{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e,n){const r=this._declarationTContainer.tViews,i=vl(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,n||null);i[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(i[19]=o.createEmbeddedView(r)),wl(r,i,e),new Ml(i)}};function Kq(){return function sp(t,e){return 4&t.type?new Wq(e,t,Nu(t,e)):null}(zt(),k())}let ti=(()=>{class t{}return t.__NG_ELEMENT_ID__=Zq,t})();function Zq(){return function tP(t,e){let n;const r=e[t.index];if(_r(r))n=r;else{let i;if(8&t.type)i=ct(r);else{const s=e[11];i=s.createComment("");const o=tr(t,e);Mo(s,Pf(s,o),i,function E$(t,e){return J(t)?t.nextSibling(e):e.nextSibling}(s,o),!1)}e[t.index]=n=jx(r,e,i,t),jf(e,n)}return new Xk(n,t,e)}(zt(),k())}const Qq=ti,Xk=class extends Qq{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Nu(this._hostTNode,this._hostLView)}get injector(){return new iu(this._hostTNode,this._hostLView)}get parentInjector(){const e=yf(this._hostTNode,this._hostLView);if(NS(e)){const n=ru(e,this._hostLView),r=nu(e);return new iu(n[1].data[r+8],n)}return new iu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=eP(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=e.createEmbeddedView(n||{},s);return this.insert(o,i),o}createComponent(e,n,r,i,s){const o=e&&!function sl(t){return"function"==typeof t}(e);let u;if(o)u=n;else{const p=n||{};u=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}const c=o?e:new pv(We(e)),d=r||this.parentInjector;if(!s&&null==c.ngModule){const _=(o?d:this.parentInjector).get(Po,null);_&&(s=_)}const f=c.create(d,i,void 0,s);return this.insert(f.hostView,u),f}insert(e,n){const r=e._lView,i=r[1];if(function w_(t){return _r(t[3])}(r)){const f=this.indexOf(e);if(-1!==f)this.detach(f);else{const p=r[3],_=new Xk(p,p[6],p[3]);_.detach(_.indexOf(e))}}const s=this._adjustIndex(n),o=this._lContainer;!function _$(t,e,n,r){const i=10+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-10?(e[4]=n[i],GS(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function y$(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const u=e[19];null!==u&&u.insertView(t),e[2]|=64}(i,r,o,s);const u=ay(s,o),c=r[11],d=Pf(c,o[7]);return null!==d&&function p$(t,e,n,r,i,s){r[0]=i,r[6]=e,yl(t,r,n,1,i,s)}(i,o[6],c,r,d,u),e.attachToViewContainerRef(),GS(yv(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=eP(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=iy(this._lContainer,n);r&&(If(yv(this._lContainer),n),xA(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=iy(this._lContainer,n);return r&&null!=If(yv(this._lContainer),n)?new Ml(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function eP(t){return t[8]}function yv(t){return t[8]||(t[8]=[])}function ap(...t){}const kv=new me("Application Initializer");let up=(()=>{class t{constructor(n){this.appInits=n,this.resolve=ap,this.reject=ap,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(Wf(s))n.push(s);else if(yM(s)){const o=new Promise((u,c)=>{s.subscribe({complete:u,error:c})});n.push(o)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(Q(kv,8))},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Nl=new me("AppId",{providedIn:"root",factory:function DP(){return`${Pv()}${Pv()}${Pv()}`}});function Pv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const CP=new me("Platform Initializer"),cp=new me("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),SP=new me("appBootstrapListener");let CW=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const Xi=new me("LocaleId",{providedIn:"root",factory:()=>function nj(t,e=X.Default){return Q(t,e)}(Xi,X.Optional|X.SkipSelf)||function SW(){return typeof $localize<"u"&&$localize.locale||Pu}()});class xW{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let Rv=(()=>{class t{compileModuleSync(n){return new gv(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=Zi(Fn(n).declarations).reduce((o,u)=>{const c=We(u);return c&&o.push(new pv(c)),o},[]);return new xW(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const kW=(()=>Promise.resolve(0))();function Nv(t){typeof Zone>"u"?kW.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class mt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Hn(!1),this.onMicrotaskEmpty=new Hn(!1),this.onStable=new Hn(!1),this.onError=new Hn(!1),typeof Zone>"u")throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function PW(){let t=He.requestAnimationFrame,e=He.cancelAnimationFrame;if(typeof Zone<"u"&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function OW(t){const e=()=>{!function NW(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(He,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Lv(t),t.isCheckStableRunning=!0,Ov(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Lv(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,u)=>{try{return AP(t),n.invokeTask(i,s,o,u)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),xP(t)}},onInvoke:(n,r,i,s,o,u,c)=>{try{return AP(t),n.invoke(i,s,o,u,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),xP(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,Lv(t),Ov(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(mt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,RW,ap,ap);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const RW={};function Ov(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Lv(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function AP(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function xP(t){t._nesting--,Ov(t)}class LW{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Hn,this.onMicrotaskEmpty=new Hn,this.onStable=new Hn,this.onError=new Hn}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const MP=new me(""),lp=new me("");let Bv,Fv=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Bv||(function FW(t){Bv=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mt.assertNotInAngularZone(),Nv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Nv(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(Q(mt),Q(Vv),Q(lp))},t.\u0275prov=ce({token:t,factory:t.\u0275fac}),t})(),Vv=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Bv?.findTestabilityInTree(this,n,r)??null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),$s=null;const kP=new me("AllowMultipleToken"),PP=new me("PlatformOnDestroy");class RP{constructor(e,n){this.name=e,this.token=n}}function OP(t,e,n=[]){const r=`Platform: ${e}`,i=new me(r);return(s=[])=>{let o=Uv();if(!o||o.injector.get(kP,!1)){const u=[...n,...s,{provide:i,useValue:!0}];t?t(u):function UW(t){if($s&&!$s.get(kP,!1))throw new pe(400,"");$s=t;const e=t.get(FP);(function NP(t){const e=t.get(CP,null);e&&e.forEach(n=>n())})(t)}(function LP(t=[],e){return $n.create({name:e,providers:[{provide:fy,useValue:"platform"},{provide:PP,useValue:()=>$s=null},...t]})}(u,r))}return function $W(t){const e=Uv();if(!e)throw new pe(401,"");return e}()}}function Uv(){return $s?.get(FP)??null}let FP=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function zW(t,e){let n;return n="noop"===t?new LW:("zone.js"===t?void 0:t)||new mt(e),n}(r?.ngZone,function VP(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:mt,useValue:i}];return i.run(()=>{const o=$n.create({providers:s,parent:this.injector,name:n.moduleType.name}),u=n.create(o),c=u.injector.get(hu,null);if(!c)throw new pe(402,"");return i.runOutsideAngular(()=>{const d=i.onError.subscribe({next:f=>{c.handleError(f)}});u.onDestroy(()=>{hp(this._modules,u),d.unsubscribe()})}),function BP(t,e,n){try{const r=n();return Wf(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(c,i,()=>{const d=u.injector.get(up);return d.runInitializers(),d.donePromise.then(()=>(function pk(t){hn(t,"Expected localeId to be defined"),"string"==typeof t&&(fk=t.toLowerCase().replace(/_/g,"-"))}(u.injector.get(Xi,Pu)||Pu),this._moduleDoBootstrap(u),u))})})}bootstrapModule(n,r=[]){const i=UP({},r);return function VW(t,e,n){const r=new gv(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(dp);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new pe(403,"");n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pe(404,"");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r()),this._injector.get(PP,null)?.(),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(Q($n))},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function UP(t,e){return Array.isArray(e)?e.reduce(UP,t):{...t,...e}}let dp=(()=>{class t{constructor(n,r,i,s){this._zone=n,this._injector=r,this._exceptionHandler=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new Xe(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),u=new Xe(c=>{let d;this._zone.runOutsideAngular(()=>{d=this._zone.onStable.subscribe(()=>{mt.assertNotInAngularZone(),Nv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const f=this._zone.onUnstable.subscribe(()=>{mt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{d.unsubscribe(),f.unsubscribe()}});this.isStable=function vo(...t){const e=Es(t),n=function Ym(t,e){return"number"==typeof $c(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?qr(r[0]):Fi(n)(Ct(r,e)):Sn}(o,u.pipe(function ut(t={}){const{connector:e=(()=>new qe),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o=null,u=null,c=null,d=0,f=!1,p=!1;const _=()=>{u?.unsubscribe(),u=null},y=()=>{_(),o=c=null,f=p=!1},w=()=>{const E=o;y(),E?.unsubscribe()};return Je((E,b)=>{d++,!p&&!f&&_();const M=c=c??e();b.add(()=>{d--,0===d&&!p&&!f&&(u=Ts(w,i))}),M.subscribe(b),o||(o=new mo({next:P=>M.next(P),error:P=>{p=!0,_(),u=Ts(y,n,P),M.error(P)},complete:()=>{f=!0,_(),u=Ts(y,r),M.complete()}}),Ct(E).subscribe(o))})(s)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof jk;if(!this._initStatus.done)throw!i&&function Lu(t){const e=We(t)||pn(t)||tn(t);return null!==e&&e.standalone}(n),new pe(405,false);let s;s=i?n:this._injector.get(Al).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const o=function BW(t){return t.isBoundToModule}(s)?void 0:this._injector.get(Us),c=s.create($n.NULL,[],r||s.selector,o),d=c.location.nativeElement,f=c.injector.get(MP,null);return f?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),hp(this.components,c),f?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new pe(101,"");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;hp(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(SP,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>hp(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new pe(406,false);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(n){return new(n||t)(Q(mt),Q($n),Q(hu),Q(up))},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function hp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let $P=!0,fp=(()=>{class t{}return t.__NG_ELEMENT_ID__=qW,t})();function qW(t){return function WW(t,e,n){if(Za(t)&&!n){const r=Mn(t.index,e);return new Ml(r,r)}return 47&t.type?new Ml(e[16],e):null}(zt(),k(),16==(16&t))}class WP{constructor(){}supports(e){return Il(e)}create(e){return new XW(e)}}const JW=(t,e)=>e;class XW{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||JW}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<ZP(r,i,s)?n:r,u=ZP(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const d=u-i,f=c-i;if(d!=f){for(let _=0;_<d;_++){const y=_<s.length?s[_]:s[_]=0,w=y+_;f<=w&&w<d&&(s[_]=y+1)}s[o.previousIndex]=f-d}}u!==c&&e(o,u,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Il(e))throw new pe(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let u=0;u<this.length;u++)s=e[u],o=this._trackByFn(u,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,u)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,u),r=!0),n=n._next}else i=0,function mH(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ro()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,u=>{o=this._trackByFn(i,u),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,u,o,i)),Object.is(n.item,u)||this._addIdentityChange(n,u)):(n=this._mismatch(n,u,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new e3(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new KP),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new KP),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class e3{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class t3{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class KP{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new t3,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ZP(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function YP(){return new mp([new WP])}let mp=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||YP()),deps:[[t,new ll,new Gt]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new pe(901,"")}}return t.\u0275prov=ce({token:t,providedIn:"root",factory:YP}),t})();const o3=OP(null,"core",[]);let a3=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(Q(dp))},t.\u0275mod=Kr({type:t}),t.\u0275inj=Xt({}),t})(),_p=null;function zs(){return _p}const nr=new me("DocumentToken");let Ll=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ce({token:t,factory:function(){return function d3(){return Q(XP)}()},providedIn:"platform"}),t})();const h3=new me("Location Initialized");let XP=(()=>{class t extends Ll{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return zs().getBaseHref(this._doc)}onPopState(n){const r=zs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=zs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,r,i){eR()?this._history.pushState(n,r,i):this.location.hash=i}replaceState(n,r,i){eR()?this._history.replaceState(n,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)(Q(nr))},t.\u0275prov=ce({token:t,factory:function(){return function f3(){return new XP(Q(nr))}()},providedIn:"platform"}),t})();function eR(){return!!window.history.pushState}function Gv(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function tR(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function es(t){return t&&"?"!==t[0]?"?"+t:t}let Bu=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ce({token:t,factory:function(){return function p3(){const t=Q(nr).location;return new nR(Q(Ll),t&&t.origin||"")}()},providedIn:"root"}),t})();const qv=new me("appBaseHref");let nR=(()=>{class t extends Bu{constructor(n,r){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Gv(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+es(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+es(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+es(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(Q(Ll),Q(qv,8))},t.\u0275prov=ce({token:t,factory:t.\u0275fac}),t})(),g3=(()=>{class t extends Bu{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Gv(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+es(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+es(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(Q(Ll),Q(qv,8))},t.\u0275prov=ce({token:t,factory:t.\u0275fac}),t})(),Wv=(()=>{class t{constructor(n){this._subject=new Hn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._baseHref=tR(rR(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+es(r))}normalize(n){return t.stripTrailingSlash(function _3(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,rR(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+es(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+es(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return t.normalizeQueryParams=es,t.joinWithSlash=Gv,t.stripTrailingSlash=tR,t.\u0275fac=function(n){return new(n||t)(Q(Bu))},t.\u0275prov=ce({token:t,factory:function(){return function m3(){return new Wv(Q(Bu))}()},providedIn:"root"}),t})();function rR(t){return t.replace(/\/index.html$/,"")}var At=(()=>((At=At||{})[At.Format=0]="Format",At[At.Standalone=1]="Standalone",At))(),Se=(()=>((Se=Se||{})[Se.Narrow=0]="Narrow",Se[Se.Abbreviated=1]="Abbreviated",Se[Se.Wide=2]="Wide",Se[Se.Short=3]="Short",Se))(),_t=(()=>((_t=_t||{})[_t.Short=0]="Short",_t[_t.Medium=1]="Medium",_t[_t.Long=2]="Long",_t[_t.Full=3]="Full",_t))(),ne=(()=>((ne=ne||{})[ne.Decimal=0]="Decimal",ne[ne.Group=1]="Group",ne[ne.List=2]="List",ne[ne.PercentSign=3]="PercentSign",ne[ne.PlusSign=4]="PlusSign",ne[ne.MinusSign=5]="MinusSign",ne[ne.Exponential=6]="Exponential",ne[ne.SuperscriptingExponent=7]="SuperscriptingExponent",ne[ne.PerMille=8]="PerMille",ne[ne.Infinity=9]="Infinity",ne[ne.NaN=10]="NaN",ne[ne.TimeSeparator=11]="TimeSeparator",ne[ne.CurrencyDecimal=12]="CurrencyDecimal",ne[ne.CurrencyGroup=13]="CurrencyGroup",ne))();function yp(t,e){return Ur(zn(t)[z.DateFormat],e)}function vp(t,e){return Ur(zn(t)[z.TimeFormat],e)}function wp(t,e){return Ur(zn(t)[z.DateTimeFormat],e)}function Br(t,e){const n=zn(t),r=n[z.NumberSymbols][e];if(typeof r>"u"){if(e===ne.CurrencyDecimal)return n[z.NumberSymbols][ne.Decimal];if(e===ne.CurrencyGroup)return n[z.NumberSymbols][ne.Group]}return r}function sR(t){if(!t[z.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[z.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Ur(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function Zv(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const M3=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Fl={},k3=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Wt=(()=>((Wt=Wt||{})[Wt.Short=0]="Short",Wt[Wt.ShortGMT=1]="ShortGMT",Wt[Wt.Long=2]="Long",Wt[Wt.Extended=3]="Extended",Wt))(),ie=(()=>((ie=ie||{})[ie.FullYear=0]="FullYear",ie[ie.Month=1]="Month",ie[ie.Date=2]="Date",ie[ie.Hours=3]="Hours",ie[ie.Minutes=4]="Minutes",ie[ie.Seconds=5]="Seconds",ie[ie.FractionalSeconds=6]="FractionalSeconds",ie[ie.Day=7]="Day",ie))(),ve=(()=>((ve=ve||{})[ve.DayPeriods=0]="DayPeriods",ve[ve.Days=1]="Days",ve[ve.Months=2]="Months",ve[ve.Eras=3]="Eras",ve))();function P3(t,e,n,r){let i=function j3(t){if(uR(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[i,s=1,o=1]=t.split("-").map(u=>+u);return Ip(i,s-1,o)}const n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(M3))return function $3(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-n,u=Number(t[5]||0)-r,c=Number(t[6]||0),d=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return s.call(e,o,u,c,d),e}(r)}const e=new Date(t);if(!uR(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=ts(n,e)||e;let u,o=[];for(;e;){if(u=k3.exec(e),!u){o.push(e);break}{o=o.concat(u.slice(1));const f=o.pop();if(!f)break;e=f}}let c=i.getTimezoneOffset();r&&(c=aR(r,c),i=function U3(t,e,n){const r=n?-1:1,i=t.getTimezoneOffset();return function B3(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,r*(aR(e,i)-i))}(i,r,!0));let d="";return o.forEach(f=>{const p=function V3(t){if(Yv[t])return Yv[t];let e;switch(t){case"G":case"GG":case"GGG":e=it(ve.Eras,Se.Abbreviated);break;case"GGGG":e=it(ve.Eras,Se.Wide);break;case"GGGGG":e=it(ve.Eras,Se.Narrow);break;case"y":e=Ot(ie.FullYear,1,0,!1,!0);break;case"yy":e=Ot(ie.FullYear,2,0,!0,!0);break;case"yyy":e=Ot(ie.FullYear,3,0,!1,!0);break;case"yyyy":e=Ot(ie.FullYear,4,0,!1,!0);break;case"Y":e=Dp(1);break;case"YY":e=Dp(2,!0);break;case"YYY":e=Dp(3);break;case"YYYY":e=Dp(4);break;case"M":case"L":e=Ot(ie.Month,1,1);break;case"MM":case"LL":e=Ot(ie.Month,2,1);break;case"MMM":e=it(ve.Months,Se.Abbreviated);break;case"MMMM":e=it(ve.Months,Se.Wide);break;case"MMMMM":e=it(ve.Months,Se.Narrow);break;case"LLL":e=it(ve.Months,Se.Abbreviated,At.Standalone);break;case"LLLL":e=it(ve.Months,Se.Wide,At.Standalone);break;case"LLLLL":e=it(ve.Months,Se.Narrow,At.Standalone);break;case"w":e=Qv(1);break;case"ww":e=Qv(2);break;case"W":e=Qv(1,!0);break;case"d":e=Ot(ie.Date,1);break;case"dd":e=Ot(ie.Date,2);break;case"c":case"cc":e=Ot(ie.Day,1);break;case"ccc":e=it(ve.Days,Se.Abbreviated,At.Standalone);break;case"cccc":e=it(ve.Days,Se.Wide,At.Standalone);break;case"ccccc":e=it(ve.Days,Se.Narrow,At.Standalone);break;case"cccccc":e=it(ve.Days,Se.Short,At.Standalone);break;case"E":case"EE":case"EEE":e=it(ve.Days,Se.Abbreviated);break;case"EEEE":e=it(ve.Days,Se.Wide);break;case"EEEEE":e=it(ve.Days,Se.Narrow);break;case"EEEEEE":e=it(ve.Days,Se.Short);break;case"a":case"aa":case"aaa":e=it(ve.DayPeriods,Se.Abbreviated);break;case"aaaa":e=it(ve.DayPeriods,Se.Wide);break;case"aaaaa":e=it(ve.DayPeriods,Se.Narrow);break;case"b":case"bb":case"bbb":e=it(ve.DayPeriods,Se.Abbreviated,At.Standalone,!0);break;case"bbbb":e=it(ve.DayPeriods,Se.Wide,At.Standalone,!0);break;case"bbbbb":e=it(ve.DayPeriods,Se.Narrow,At.Standalone,!0);break;case"B":case"BB":case"BBB":e=it(ve.DayPeriods,Se.Abbreviated,At.Format,!0);break;case"BBBB":e=it(ve.DayPeriods,Se.Wide,At.Format,!0);break;case"BBBBB":e=it(ve.DayPeriods,Se.Narrow,At.Format,!0);break;case"h":e=Ot(ie.Hours,1,-12);break;case"hh":e=Ot(ie.Hours,2,-12);break;case"H":e=Ot(ie.Hours,1);break;case"HH":e=Ot(ie.Hours,2);break;case"m":e=Ot(ie.Minutes,1);break;case"mm":e=Ot(ie.Minutes,2);break;case"s":e=Ot(ie.Seconds,1);break;case"ss":e=Ot(ie.Seconds,2);break;case"S":e=Ot(ie.FractionalSeconds,1);break;case"SS":e=Ot(ie.FractionalSeconds,2);break;case"SSS":e=Ot(ie.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Tp(Wt.Short);break;case"ZZZZZ":e=Tp(Wt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Tp(Wt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Tp(Wt.Long);break;default:return null}return Yv[t]=e,e}(f);d+=p?p(i,n,c):"''"===f?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function Ip(t,e,n){const r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function ts(t,e){const n=function y3(t){return zn(t)[z.LocaleId]}(t);if(Fl[n]=Fl[n]||{},Fl[n][e])return Fl[n][e];let r="";switch(e){case"shortDate":r=yp(t,_t.Short);break;case"mediumDate":r=yp(t,_t.Medium);break;case"longDate":r=yp(t,_t.Long);break;case"fullDate":r=yp(t,_t.Full);break;case"shortTime":r=vp(t,_t.Short);break;case"mediumTime":r=vp(t,_t.Medium);break;case"longTime":r=vp(t,_t.Long);break;case"fullTime":r=vp(t,_t.Full);break;case"short":const i=ts(t,"shortTime"),s=ts(t,"shortDate");r=Ep(wp(t,_t.Short),[i,s]);break;case"medium":const o=ts(t,"mediumTime"),u=ts(t,"mediumDate");r=Ep(wp(t,_t.Medium),[o,u]);break;case"long":const c=ts(t,"longTime"),d=ts(t,"longDate");r=Ep(wp(t,_t.Long),[c,d]);break;case"full":const f=ts(t,"fullTime"),p=ts(t,"fullDate");r=Ep(wp(t,_t.Full),[f,p])}return r&&(Fl[n][e]=r),r}function Ep(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return null!=e&&r in e?e[r]:n})),t}function ni(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function Ot(t,e,n=0,r=!1,i=!1){return function(s,o){let u=function N3(t,e){switch(t){case ie.FullYear:return e.getFullYear();case ie.Month:return e.getMonth();case ie.Date:return e.getDate();case ie.Hours:return e.getHours();case ie.Minutes:return e.getMinutes();case ie.Seconds:return e.getSeconds();case ie.FractionalSeconds:return e.getMilliseconds();case ie.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,s);if((n>0||u>-n)&&(u+=n),t===ie.Hours)0===u&&-12===n&&(u=12);else if(t===ie.FractionalSeconds)return function R3(t,e){return ni(t,3).substring(0,e)}(u,e);const c=Br(o,ne.MinusSign);return ni(u,e,c,r,i)}}function it(t,e,n=At.Format,r=!1){return function(i,s){return function O3(t,e,n,r,i,s){switch(n){case ve.Months:return function I3(t,e,n){const r=zn(t),s=Ur([r[z.MonthsFormat],r[z.MonthsStandalone]],e);return Ur(s,n)}(e,i,r)[t.getMonth()];case ve.Days:return function w3(t,e,n){const r=zn(t),s=Ur([r[z.DaysFormat],r[z.DaysStandalone]],e);return Ur(s,n)}(e,i,r)[t.getDay()];case ve.DayPeriods:const o=t.getHours(),u=t.getMinutes();if(s){const d=function D3(t){const e=zn(t);return sR(e),(e[z.ExtraData][2]||[]).map(r=>"string"==typeof r?Zv(r):[Zv(r[0]),Zv(r[1])])}(e),f=function C3(t,e,n){const r=zn(t);sR(r);const s=Ur([r[z.ExtraData][0],r[z.ExtraData][1]],e)||[];return Ur(s,n)||[]}(e,i,r),p=d.findIndex(_=>{if(Array.isArray(_)){const[y,w]=_,E=o>=y.hours&&u>=y.minutes,b=o<w.hours||o===w.hours&&u<w.minutes;if(y.hours<w.hours){if(E&&b)return!0}else if(E||b)return!0}else if(_.hours===o&&_.minutes===u)return!0;return!1});if(-1!==p)return f[p]}return function v3(t,e,n){const r=zn(t),s=Ur([r[z.DayPeriodsFormat],r[z.DayPeriodsStandalone]],e);return Ur(s,n)}(e,i,r)[o<12?0:1];case ve.Eras:return function E3(t,e){return Ur(zn(t)[z.Eras],e)}(e,r)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(i,s,t,e,n,r)}}function Tp(t){return function(e,n,r){const i=-1*r,s=Br(n,ne.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case Wt.Short:return(i>=0?"+":"")+ni(o,2,s)+ni(Math.abs(i%60),2,s);case Wt.ShortGMT:return"GMT"+(i>=0?"+":"")+ni(o,1,s);case Wt.Long:return"GMT"+(i>=0?"+":"")+ni(o,2,s)+":"+ni(Math.abs(i%60),2,s);case Wt.Extended:return 0===r?"Z":(i>=0?"+":"")+ni(o,2,s)+":"+ni(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}function oR(t){return Ip(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function Qv(t,e=!1){return function(n,r){let i;if(e){const s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{const s=oR(n),o=function F3(t){const e=Ip(t,0,1).getDay();return Ip(t,0,1+(e<=4?4:11)-e)}(s.getFullYear()),u=s.getTime()-o.getTime();i=1+Math.round(u/6048e5)}return ni(i,t,Br(r,ne.MinusSign))}}function Dp(t,e=!1){return function(n,r){return ni(oR(n).getFullYear(),t,Br(r,ne.MinusSign),e)}}const Yv={};function aR(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function uR(t){return t instanceof Date&&!isNaN(t.valueOf())}class r8{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let fR=(()=>{class t{constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new r8(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const u=r.get(s);r.move(u,o),pR(u,i)}});for(let i=0,s=r.length;i<s;i++){const u=r.get(i).context;u.index=i,u.count=s,u.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{pR(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(Y(ti),Y(Ji),Y(mp))},t.\u0275dir=kt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();function pR(t,e){t.context.$implicit=e.item}let gR=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new i8,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){mR("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){mR("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(Y(ti),Y(Ji))},t.\u0275dir=kt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class i8{constructor(){this.$implicit=null,this.ngIf=null}}function mR(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Ue(e)}'.`)}const v8=new me("DATE_PIPE_DEFAULT_TIMEZONE");let yR=(()=>{class t{constructor(n,r){this.locale=n,this.defaultTimezone=r}transform(n,r="mediumDate",i,s){if(null==n||""===n||n!=n)return null;try{return P3(n,r,s||this.locale,i??this.defaultTimezone??void 0)}catch(o){throw function ri(t,e){return new pe(2100,"")}()}}}return t.\u0275fac=function(n){return new(n||t)(Y(Xi,16),Y(v8,24))},t.\u0275pipe=en({name:"date",type:t,pure:!0}),t})(),M8=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Kr({type:t}),t.\u0275inj=Xt({}),t})();let N8=(()=>{class t{}return t.\u0275prov=ce({token:t,providedIn:"root",factory:()=>new O8(Q(nr),window)}),t})();class O8{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function L8(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=IR(this.window.history)||IR(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function IR(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class aw extends class V8 extends class l3{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function c3(t){_p||(_p=t)}(new aw)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function B8(){return Bl=Bl||document.querySelector("base"),Bl?Bl.getAttribute("href"):null}();return null==n?null:function U8(t){Sp=Sp||document.createElement("a"),Sp.setAttribute("href",t);const e=Sp.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Bl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function e8(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Sp,Bl=null;const ER=new me("TRANSITION_ID"),$8=[{provide:kv,useFactory:function j8(t,e,n){return()=>{n.get(up).donePromise.then(()=>{const r=zs(),i=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[ER,nr,$n],multi:!0}];let H8=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac}),t})();const Ap=new me("EventManagerPlugins");let xp=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(n))return this._eventNameToPlugin.set(n,o),o}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(Q(Ap),Q(mt))},t.\u0275prov=ce({token:t,factory:t.\u0275fac}),t})();class TR{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const i=zs().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let bR=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ce({token:t,factory:t.\u0275fac}),t})(),Ul=(()=>{class t extends bR{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(DR),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(DR))}}return t.\u0275fac=function(n){return new(n||t)(Q(nr))},t.\u0275prov=ce({token:t,factory:t.\u0275fac}),t})();function DR(t){zs().remove(t)}const uw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},cw=/%COMP%/g;function Mp(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Mp(t,i,n):(i=i.replace(cw,t),n.push(i))}return n}function AR(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let lw=(()=>{class t{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new dw(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case St.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Q8(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case St.ShadowDom:return new Y8(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=Mp(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(Q(xp),Q(Ul),Q(Nl))},t.\u0275prov=ce({token:t,factory:t.\u0275fac}),t})();class dw{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?document.createElementNS(uw[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){(MR(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(MR(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=uw[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=uw[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ir.DashCase|Ir.Important)?e.style.setProperty(n,r,i&Ir.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ir.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,AR(r)):this.eventManager.addEventListener(e,n,AR(r))}}function MR(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class Q8 extends dw{constructor(e,n,r,i){super(e),this.component=r;const s=Mp(i+"-"+r.id,r.styles,[]);n.addStyles(s),this.contentAttr=function W8(t){return"_ngcontent-%COMP%".replace(cw,t)}(i+"-"+r.id),this.hostAttr=function K8(t){return"_nghost-%COMP%".replace(cw,t)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class Y8 extends dw{constructor(e,n,r,i){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Mp(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const u=document.createElement("style");u.textContent=s[o],this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let J8=(()=>{class t extends TR{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(Q(nr))},t.\u0275prov=ce({token:t,factory:t.\u0275fac}),t})();const kR=["alt","control","meta","shift"],e4={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},PR={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},t4={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let n4=(()=>{class t extends TR{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zs().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="";if(kR.forEach(c=>{const d=r.indexOf(c);d>-1&&(r.splice(d,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static getEventFullKey(n){let r="",i=function r4(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&PR.hasOwnProperty(e)&&(e=PR[e]))}return e4[e]||e}(n);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),kR.forEach(s=>{s!=i&&t4[s](n)&&(r+=s+".")}),r+=i,r}static eventCallback(n,r,i){return s=>{t.getEventFullKey(s)===n&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(Q(nr))},t.\u0275prov=ce({token:t,factory:t.\u0275fac}),t})();const RR=[{provide:cp,useValue:"browser"},{provide:CP,useValue:function i4(){aw.makeCurrent()},multi:!0},{provide:nr,useFactory:function o4(){return function R(t){x=t}(document),document},deps:[]}],a4=OP(o3,"browser",RR),NR=new me(""),OR=[{provide:lp,useClass:class z8{addToWindow(e){He.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},He.getAllAngularTestabilities=()=>e.getAllTestabilities(),He.getAllAngularRootElements=()=>e.getAllRootElements(),He.frameworkStabilizers||(He.frameworkStabilizers=[]),He.frameworkStabilizers.push(r=>{const i=He.getAllAngularTestabilities();let s=i.length,o=!1;const u=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(function(c){c.whenStable(u)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?zs().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:MP,useClass:Fv,deps:[mt,Vv,lp]},{provide:Fv,useClass:Fv,deps:[mt,Vv,lp]}],LR=[{provide:fy,useValue:"root"},{provide:hu,useFactory:function s4(){return new hu},deps:[]},{provide:Ap,useClass:J8,multi:!0,deps:[nr,mt,cp]},{provide:Ap,useClass:n4,multi:!0,deps:[nr]},{provide:lw,useClass:lw,deps:[xp,Ul,Nl]},{provide:$k,useExisting:lw},{provide:bR,useExisting:Ul},{provide:Ul,useClass:Ul,deps:[nr]},{provide:xp,useClass:xp,deps:[Ap,mt]},{provide:class F8{},useClass:H8,deps:[]},[]];let u4=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Nl,useValue:n.appId},{provide:ER,useExisting:Nl},$8]}}}return t.\u0275fac=function(n){return new(n||t)(Q(NR,12))},t.\u0275mod=Kr({type:t}),t.\u0275inj=Xt({providers:[...LR,...OR],imports:[M8,a3]}),t})(),FR=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return t.\u0275fac=function(n){return new(n||t)(Q(nr))},t.\u0275prov=ce({token:t,factory:function(n){let r=null;return r=n?new n:function l4(){return new FR(Q(nr))}(),r},providedIn:"root"}),t})();function _e(...t){return Ct(t,Es(t))}typeof window<"u"&&window;class ii extends qe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:v4}=Array,{getPrototypeOf:w4,prototype:I4,keys:E4}=Object;const{isArray:D4}=Array;function UR(...t){const e=Es(t),n=function Qm(t){return Ge($c(t))?t.pop():void 0}(t),{args:r,keys:i}=function T4(t){if(1===t.length){const e=t[0];if(v4(e))return{args:e,keys:null};if(function b4(t){return t&&"object"==typeof t&&w4(t)===I4}(e)){const n=E4(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}(t);if(0===r.length)return Ct([],e);const s=new Xe(function x4(t,e,n=bt){return r=>{jR(e,()=>{const{length:i}=t,s=new Array(i);let o=i,u=i;for(let c=0;c<i;c++)jR(e,()=>{const d=Ct(t[c],e);let f=!1;d.subscribe(tt(r,p=>{s[c]=p,f||(f=!0,u--),u||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>function A4(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}(i,o):bt));return n?s.pipe(function S4(t){return Ve(e=>function C4(t,e){return D4(e)?t(...e):t(e)}(t,e))}(n)):s}function jR(t,e,n){t?Mr(n,t,e):e()}function jl(t,e){const n=Ge(t)?t:()=>t,r=i=>i.error(n());return new Xe(e?i=>e.schedule(r,0,i):r)}const $l=Be(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function pw(...t){return function M4(){return Fi(1)}()(Ct(t,Es(t)))}function $R(t){return new Xe(e=>{qr(t()).subscribe(e)})}function gw(){return Je((t,e)=>{let n=null;t._refCount++;const r=tt(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class zR extends Xe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,et(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Dn;const n=this.getSubject();e.add(this.source.subscribe(tt(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Dn.EMPTY)}return e}refCount(){return gw()(this)}}function Fo(t,e){return Je((n,r)=>{let i=null,s=0,o=!1;const u=()=>o&&!i&&r.complete();n.subscribe(tt(r,c=>{i?.unsubscribe();let d=0;const f=s++;qr(t(c,f)).subscribe(i=tt(r,p=>r.next(e?e(c,p,f,d++):p),()=>{i=null,u()}))},()=>{o=!0,u()}))})}function P4(t,e,n,r,i){return(s,o)=>{let u=n,c=e,d=0;s.subscribe(tt(o,f=>{const p=d++;c=u?t(c,f,p):(u=!0,f),r&&o.next(c)},i&&(()=>{u&&o.next(c),o.complete()})))}}function HR(t,e){return Je(P4(t,e,arguments.length>=2,!0))}function Uu(t,e){return Je((n,r)=>{let i=0;n.subscribe(tt(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Gs(t){return Je((e,n)=>{let s,r=null,i=!1;r=e.subscribe(tt(n,void 0,void 0,o=>{s=qr(t(o,Gs(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function zl(t,e){return Ge(e)?Dt(t,e,1):Dt(t,1)}function mw(t){return t<=0?()=>Sn:Je((e,n)=>{let r=[];e.subscribe(tt(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function GR(t=R4){return Je((e,n)=>{let r=!1;e.subscribe(tt(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function R4(){return new $l}function _w(t){return Je((e,n)=>{let r=!1;e.subscribe(tt(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Vo(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Uu((i,s)=>t(i,s,r)):bt,De(1),n?_w(e):GR(()=>new $l))}function gn(t,e,n){const r=Ge(t)||e||n?{next:t,error:e,complete:n}:t;return r?Je((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let u=!0;i.subscribe(tt(s,c=>{var d;null===(d=r.next)||void 0===d||d.call(r,c),s.next(c)},()=>{var c;u=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var d;u=!1,null===(d=r.error)||void 0===d||d.call(r,c),s.error(c)},()=>{var c,d;u&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):bt}function yw(t){return Je((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}class ns{constructor(e,n){this.id=e,this.url=n}}class vw extends ns{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Hl extends ns{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qR extends ns{constructor(e,n,r){super(e,n),this.reason=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class L4 extends ns{constructor(e,n,r){super(e,n),this.error=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class F4 extends ns{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class V4 extends ns{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class B4 extends ns{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class U4 extends ns{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class j4 extends ns{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $4{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class z4{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class H4{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class G4{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class q4{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class W4{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WR{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const be="primary";class K4{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function ju(t){return new K4(t)}const KR="ngNavigationCancelingError";function ww(t){const e=Error("NavigationCancelingError: "+t);return e[KR]=!0,e}function Q4(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],u=t[s];if(o.startsWith(":"))i[o.substring(1)]=u;else if(o!==u.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Si(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!ZR(t[i],e[i]))return!1;return!0}function ZR(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function QR(t){return Array.prototype.concat.apply([],t)}function YR(t){return t.length>0?t[t.length-1]:null}function mn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function si(t){return yM(t)?t:Wf(t)?Ct(Promise.resolve(t)):_e(t)}const X4={exact:function e1(t,e,n){if(!Uo(t.segments,e.segments)||!kp(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!e1(t.children[r],e.children[r],n))return!1;return!0},subset:t1},JR={exact:function e6(t,e){return Si(t,e)},subset:function t6(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>ZR(t[n],e[n]))},ignored:()=>!0};function XR(t,e,n){return X4[n.paths](t.root,e.root,n.matrixParams)&&JR[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function t1(t,e,n){return n1(t,e,e.segments,n)}function n1(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Uo(i,n)||e.hasChildren()||!kp(i,n,r))}if(t.segments.length===n.length){if(!Uo(t.segments,n)||!kp(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!t1(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(Uo(t.segments,i)&&kp(t.segments,i,r)&&t.children[be])&&n1(t.children[be],e,s,r)}}function kp(t,e,n){return e.every((r,i)=>JR[n](t[i].parameters,r.parameters))}class Bo{constructor(e,n,r){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ju(this.queryParams)),this._queryParamMap}toString(){return i6.serialize(this)}}class Ae{constructor(e,n){this.segments=e,this.children=n,this.parent=null,mn(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pp(this)}}class Gl{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=ju(this.parameters)),this._parameterMap}toString(){return a1(this)}}function Uo(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}class r1{}class i1{parse(e){const n=new f6(e);return new Bo(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${ql(e.root,!0)}`,r=function a6(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${Rp(n)}=${Rp(i)}`).join("&"):`${Rp(n)}=${Rp(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function s6(t){return encodeURI(t)}(e.fragment)}`:""}`}}const i6=new i1;function Pp(t){return t.segments.map(e=>a1(e)).join("/")}function ql(t,e){if(!t.hasChildren())return Pp(t);if(e){const n=t.children[be]?ql(t.children[be],!1):"",r=[];return mn(t.children,(i,s)=>{s!==be&&r.push(`${s}:${ql(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function r6(t,e){let n=[];return mn(t.children,(r,i)=>{i===be&&(n=n.concat(e(r,i)))}),mn(t.children,(r,i)=>{i!==be&&(n=n.concat(e(r,i)))}),n}(t,(r,i)=>i===be?[ql(t.children[be],!1)]:[`${i}:${ql(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[be]?`${Pp(t)}/${n[0]}`:`${Pp(t)}/(${n.join("//")})`}}function s1(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rp(t){return s1(t).replace(/%3B/gi,";")}function Iw(t){return s1(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Np(t){return decodeURIComponent(t)}function o1(t){return Np(t.replace(/\+/g,"%20"))}function a1(t){return`${Iw(t.path)}${function o6(t){return Object.keys(t).map(e=>`;${Iw(e)}=${Iw(t[e])}`).join("")}(t.parameters)}`}const u6=/^[^\/()?;=#]+/;function Op(t){const e=t.match(u6);return e?e[0]:""}const c6=/^[^=?&#]+/,d6=/^[^&#]+/;class f6{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ae([],{}):new Ae([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[be]=new Ae(e,n)),r}parseSegment(){const e=Op(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Gl(Np(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=Op(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=Op(this.remaining);i&&(r=i,this.capture(r))}e[Np(n)]=Np(r)}parseQueryParam(e){const n=function l6(t){const e=t.match(c6);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function h6(t){const e=t.match(d6);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=o1(n),s=o1(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Op(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=be);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[be]:new Ae([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class u1{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=Ew(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=Ew(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=Tw(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Tw(e,this._root).map(n=>n.value)}}function Ew(t,e){if(t===e.value)return e;for(const n of e.children){const r=Ew(t,n);if(r)return r}return null}function Tw(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Tw(t,n);if(r.length)return r.unshift(e),r}return[]}class rs{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function $u(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class c1 extends u1{constructor(e,n){super(e),this.snapshot=n,bw(this,e)}toString(){return this.snapshot.toString()}}function l1(t,e){const n=function p6(t,e){const o=new Lp([],{},{},"",{},be,e,null,t.root,-1,{});return new h1("",new rs(o,[]))}(t,e),r=new ii([new Gl("",{})]),i=new ii({}),s=new ii({}),o=new ii({}),u=new ii(""),c=new zu(r,i,o,u,s,be,e,n.root);return c.snapshot=n.root,new c1(new rs(c,[]),n)}class zu{constructor(e,n,r,i,s,o,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=u,this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ve(e=>ju(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ve(e=>ju(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function d1(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function g6(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Lp{constructor(e,n,r,i,s,o,u,c,d,f,p,_){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=u,this.routeConfig=c,this._urlSegment=d,this._lastPathIndex=f,this._correctedLastPathIndex=_??f,this._resolve=p}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ju(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ju(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class h1 extends u1{constructor(e,n){super(n),this.url=e,bw(this,n)}toString(){return f1(this._root)}}function bw(t,e){e.value._routerState=t,e.children.forEach(n=>bw(t,n))}function f1(t){const e=t.children.length>0?` { ${t.children.map(f1).join(", ")} } `:"";return`${t.value}${e}`}function Dw(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Si(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Si(e.params,n.params)||t.params.next(n.params),function Y4(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Si(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Si(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Cw(t,e){const n=Si(t.params,e.params)&&function n6(t,e){return Uo(t,e)&&t.every((n,r)=>Si(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||Cw(t.parent,e.parent))}function Wl(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function _6(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Wl(t,r,i);return Wl(t,r)})}(t,e,n);return new rs(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(u=>Wl(t,u)),o}}const r=function y6(t){return new zu(new ii(t.url),new ii(t.params),new ii(t.queryParams),new ii(t.fragment),new ii(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>Wl(t,s));return new rs(r,i)}}function Fp(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Kl(t){return"object"==typeof t&&null!=t&&t.outlets}function Sw(t,e,n,r,i){let s={};if(r&&mn(r,(u,c)=>{s[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`}),t===e)return new Bo(n,s,i);const o=p1(t,e,n);return new Bo(o,s,i)}function p1(t,e,n){const r={};return mn(t.children,(i,s)=>{r[s]=i===e?n:p1(i,e,n)}),new Ae(t.segments,r)}class g1{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Fp(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Kl);if(i&&i!==YR(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Aw{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function m1(t,e,n){if(t||(t=new Ae([],{})),0===t.segments.length&&t.hasChildren())return Vp(t,e,n);const r=function b6(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],u=n[r];if(Kl(u))break;const c=`${u}`,d=r<n.length-1?n[r+1]:null;if(i>0&&void 0===c)break;if(c&&d&&"object"==typeof d&&void 0===d.outlets){if(!y1(c,d,o))return s;r+=2}else{if(!y1(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new Ae(t.segments.slice(0,r.pathIndex),{});return s.children[be]=new Ae(t.segments.slice(r.pathIndex),t.children),Vp(s,0,i)}return r.match&&0===i.length?new Ae(t.segments,{}):r.match&&!t.hasChildren()?xw(t,e,n):r.match?Vp(t,0,i):xw(t,e,n)}function Vp(t,e,n){if(0===n.length)return new Ae(t.segments,{});{const r=function T6(t){return Kl(t[0])?t[0].outlets:{[be]:t}}(n),i={};return mn(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=m1(t.children[o],e,s))}),mn(t.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new Ae(t.segments,i)}}function xw(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(Kl(s)){const c=D6(s.outlets);return new Ae(r,c)}if(0===i&&Fp(n[0])){r.push(new Gl(t.segments[e].path,_1(n[0]))),i++;continue}const o=Kl(s)?s.outlets[be]:`${s}`,u=i<n.length-1?n[i+1]:null;o&&u&&Fp(u)?(r.push(new Gl(o,_1(u))),i+=2):(r.push(new Gl(o,{})),i++)}return new Ae(r,{})}function D6(t){const e={};return mn(t,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(e[r]=xw(new Ae([],{}),0,n))}),e}function _1(t){const e={};return mn(t,(n,r)=>e[r]=`${n}`),e}function y1(t,e,n){return t==n.path&&Si(e,n.parameters)}class C6{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Zl,this.attachRef=null}}class Zl{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new C6,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}let v1=(()=>{class t{constructor(n,r,i,s,o){this.parentContexts=n,this.location=r,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Hn,this.deactivateEvents=new Hn,this.attachEvents=new Hn,this.detachEvents=new Hn,this.name=i||be,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const i=this.location,o=n._futureSnapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new S6(n,u,i.injector);if(r&&function A6(t){return!!t.resolveComponentFactory}(r)){const d=r.resolveComponentFactory(o);this.activated=i.createComponent(d,i.length,c)}else this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)(Y(Zl),Y(ti),function rl(t){return function OU(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const s=n[i];if(PS(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(s===e)return n[i+1];i+=2}}}return null}(zt(),t)}("name"),Y(fp),Y(Po))},t.\u0275dir=kt({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),t})();class S6{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===zu?this.route:e===Zl?this.childContexts:this.parent.get(e,n)}}let w1=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Rr({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,r){1&n&&qf(0,"router-outlet")},dependencies:[v1],encapsulation:2}),t})();function I1(t,e){return t.providers&&!t._injector&&(t._injector=ip(t.providers,e,`Route: ${t.path}`)),t._injector??e}function kw(t){const e=t.children&&t.children.map(kw),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==be&&(n.component=w1),n}function jr(t){return t.outlet||be}function E1(t,e){const n=t.filter(r=>jr(r)===e);return n.push(...t.filter(r=>jr(r)!==e)),n}function T1(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class R6{constructor(e,n,r,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Dw(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=$u(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),mn(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=$u(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:u})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=$u(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,n,r){const i=$u(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new W4(s.value.snapshot))}),e.children.length&&this.forwardEvent(new G4(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(Dw(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const u=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(u.contexts),o.attachRef=u.componentRef,o.route=u.route.value,o.outlet&&o.outlet.attach(u.componentRef,u.route.value),Dw(u.route.value),this.activateChildRoutes(e,null,o.children)}else{const u=T1(i.snapshot),c=u?.get(Al)??null;o.attachRef=null,o.route=i,o.resolver=c,o.injector=u,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}function qs(t){return"function"==typeof t}function jo(t){return t instanceof Bo}const Ql=Symbol("INITIAL_VALUE");function Yl(){return Fo(t=>UR(t.map(e=>e.pipe(De(1),function k4(...t){const e=Es(t);return Je((n,r)=>{(e?pw(t,n,e):pw(t,n)).subscribe(r)})}(Ql)))).pipe(HR((e,n)=>{let r=!1;return n.reduce((i,s,o)=>i!==Ql?i:(s===Ql&&(r=!0),r||!1!==s&&o!==n.length-1&&!jo(s)?i:s),e)},Ql),Uu(e=>e!==Ql),Ve(e=>jo(e)?e:!0===e),De(1)))}const b1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Bp(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...b1}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Q4)(n,t,e);if(!i)return{...b1};const s={};mn(i.posParams,(u,c)=>{s[c]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Up(t,e,n,r,i="corrected"){if(n.length>0&&function j6(t,e,n){return n.some(r=>jp(t,e,r)&&jr(r)!==be)}(t,n,r)){const o=new Ae(e,function U6(t,e,n,r){const i={};i[be]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&jr(s)!==be){const o=new Ae([],{});o._sourceSegment=t,o._segmentIndexShift=e.length,i[jr(s)]=o}return i}(t,e,r,new Ae(n,t.children)));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function $6(t,e,n){return n.some(r=>jp(t,e,r))}(t,n,r)){const o=new Ae(t.segments,function B6(t,e,n,r,i,s){const o={};for(const u of r)if(jp(t,n,u)&&!i[jr(u)]){const c=new Ae([],{});c._sourceSegment=t,c._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[jr(u)]=c}return{...i,...o}}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const s=new Ae(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function jp(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function D1(t,e,n,r){return!!(jr(t)===r||r!==be&&jp(e,n,t))&&("**"===t.path||Bp(e,t,n).matched)}function C1(t,e,n){return 0===e.length&&!t.children[n]}class $p{constructor(e){this.segmentGroup=e||null}}class S1{constructor(e){this.urlTree=e}}function Jl(t){return jl(new $p(t))}function A1(t){return jl(new S1(t))}class q6{constructor(e,n,r,i,s){this.injector=e,this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=Up(this.urlTree.root,[],[],this.config).segmentGroup,n=new Ae(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,n,be).pipe(Ve(s=>this.createUrlTree(Pw(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Gs(s=>{if(s instanceof S1)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof $p?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,be).pipe(Ve(i=>this.createUrlTree(Pw(i),e.queryParams,e.fragment))).pipe(Gs(i=>{throw i instanceof $p?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,n,r){const i=e.segments.length>0?new Ae([],{[be]:e}):e;return new Bo(i,n,r)}expandSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,n,r).pipe(Ve(s=>new Ae([],s))):this.expandSegment(e,r,n,r.segments,i,!0)}expandChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return Ct(i).pipe(zl(s=>{const o=r.children[s],u=E1(n,s);return this.expandSegmentGroup(e,u,o,s).pipe(Ve(c=>({segment:c,outlet:s})))}),HR((s,o)=>(s[o.outlet]=o.segment,s),{}),function N4(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Uu((i,s)=>t(i,s,r)):bt,mw(1),n?_w(e):GR(()=>new $l))}())}expandSegment(e,n,r,i,s,o){return Ct(r).pipe(zl(u=>this.expandSegmentAgainstRoute(e,n,r,u,i,s,o).pipe(Gs(d=>{if(d instanceof $p)return _e(null);throw d}))),Vo(u=>!!u),Gs((u,c)=>{if(u instanceof $l||"EmptyError"===u.name)return C1(n,i,s)?_e(new Ae([],{})):Jl(n);throw u}))}expandSegmentAgainstRoute(e,n,r,i,s,o,u){return D1(i,n,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,n,i,s,o):u&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o):Jl(n):Jl(n)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?A1(s):this.lineralizeSegments(r,s).pipe(Dt(o=>{const u=new Ae(o,{});return this.expandSegment(e,u,n,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:u,consumedSegments:c,remainingSegments:d,positionalParamSegments:f}=Bp(n,i,s);if(!u)return Jl(n);const p=this.applyRedirectCommands(c,i.redirectTo,f);return i.redirectTo.startsWith("/")?A1(p):this.lineralizeSegments(i,p).pipe(Dt(_=>this.expandSegment(e,n,r,_.concat(d),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){if("**"===r.path)return e=I1(r,e),r.loadChildren?(r._loadedRoutes?_e({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(Ve(p=>(r._loadedRoutes=p.routes,r._loadedInjector=p.injector,new Ae(i,{})))):_e(new Ae(i,{}));const{matched:o,consumedSegments:u,remainingSegments:c}=Bp(n,r,i);return o?(e=I1(r,e),this.getChildConfig(e,r,i).pipe(Dt(f=>{const p=f.injector??e,_=f.routes,{segmentGroup:y,slicedSegments:w}=Up(n,u,c,_),E=new Ae(y.segments,y.children);if(0===w.length&&E.hasChildren())return this.expandChildren(p,_,E).pipe(Ve(S=>new Ae(u,S)));if(0===_.length&&0===w.length)return _e(new Ae(u,{}));const b=jr(r)===s;return this.expandSegment(p,E,_,w,b?be:s,!0).pipe(Ve(P=>new Ae(u.concat(P.segments),P.children)))}))):Jl(n)}getChildConfig(e,n,r){return n.children?_e({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?_e({routes:n._loadedRoutes,injector:n._loadedInjector}):this.runCanLoadGuards(e,n,r).pipe(Dt(i=>i?this.configLoader.loadChildren(e,n).pipe(gn(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function H6(t){return jl(ww(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`))}(n))):_e({routes:[],injector:e})}runCanLoadGuards(e,n,r){const i=n.canLoad;return i&&0!==i.length?_e(i.map(o=>{const u=e.get(o);let c;if(function O6(t){return t&&qs(t.canLoad)}(u))c=u.canLoad(n,r);else{if(!qs(u))throw new Error("Invalid CanLoad guard");c=u(n,r)}return si(c)})).pipe(Yl(),gn(o=>{if(!jo(o))return;const u=ww(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw u.url=o,u}),Ve(o=>!0===o)):_e(!0)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return _e(r);if(i.numberOfChildren>1||!i.children[be])return jl(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[be]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreatreUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new Bo(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return mn(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const u=i.substring(1);r[s]=n[u]}else r[s]=i}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return mn(n.children,(u,c)=>{o[c]=this.createSegmentGroup(e,u,r,i)}),new Ae(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${n.path}'.`);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}function Pw(t){const e={};for(const r of Object.keys(t.children)){const s=Pw(t.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function W6(t){if(1===t.numberOfChildren&&t.children[be]){const e=t.children[be];return new Ae(t.segments.concat(e.segments),e.children)}return t}(new Ae(t.segments,e))}class x1{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class zp{constructor(e,n){this.component=e,this.route=n}}function Z6(t,e,n){const r=t._root;return Xl(r,e?e._root:null,n,[r.value])}function Hp(t,e,n){return(T1(e)??n).get(t)}function Xl(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=$u(e);return t.children.forEach(o=>{(function Y6(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,u=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function J6(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Uo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Uo(t.url,e.url)||!Si(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Cw(t,e)||!Si(t.queryParams,e.queryParams);default:return!Cw(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new x1(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Xl(t,e,s.component?u?u.children:null:n,r,i),c&&u&&u.outlet&&u.outlet.isActivated&&i.canDeactivateChecks.push(new zp(u.outlet.component,o))}else o&&ed(e,u,i),i.canActivateChecks.push(new x1(r)),Xl(t,null,s.component?u?u.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),mn(s,(o,u)=>ed(o,n.getContext(u),i)),i}function ed(t,e,n){const r=$u(t),i=t.value;mn(r,(s,o)=>{ed(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new zp(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class aK{}function k1(t){return new Xe(e=>e.error(t))}class cK{constructor(e,n,r,i,s,o){this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=Up(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,e,be);if(null===n)return null;const r=new Lp([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},be,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new rs(r,n),s=new h1(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const n=e.value,r=d1(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,n):this.processSegment(e,n,n.segments,r)}processChildren(e,n){const r=[];for(const s of Object.keys(n.children)){const o=n.children[s],u=E1(e,s),c=this.processSegmentGroup(u,o,s);if(null===c)return null;r.push(...c)}const i=P1(r);return function lK(t){t.sort((e,n)=>e.value.outlet===be?-1:n.value.outlet===be?1:e.value.outlet.localeCompare(n.value.outlet))}(i),i}processSegment(e,n,r,i){for(const s of e){const o=this.processSegmentAgainstRoute(s,n,r,i);if(null!==o)return o}return C1(n,r,i)?[]:null}processSegmentAgainstRoute(e,n,r,i){if(e.redirectTo||!D1(e,n,r,i))return null;let s,o=[],u=[];if("**"===e.path){const y=r.length>0?YR(r).parameters:{},w=N1(n)+r.length;s=new Lp(r,y,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,L1(e),jr(e),e.component??e._loadedComponent??null,e,R1(n),w,F1(e),w)}else{const y=Bp(n,e,r);if(!y.matched)return null;o=y.consumedSegments,u=y.remainingSegments;const w=N1(n)+o.length;s=new Lp(o,y.parameters,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,L1(e),jr(e),e.component??e._loadedComponent??null,e,R1(n),w,F1(e),w)}const c=function dK(t){return t.children?t.children:t.loadChildren?t._loadedRoutes:[]}(e),{segmentGroup:d,slicedSegments:f}=Up(n,o,u,c.filter(y=>void 0===y.redirectTo),this.relativeLinkResolution);if(0===f.length&&d.hasChildren()){const y=this.processChildren(c,d);return null===y?null:[new rs(s,y)]}if(0===c.length&&0===f.length)return[new rs(s,[])];const p=jr(e)===i,_=this.processSegment(c,d,f,p?be:i);return null===_?null:[new rs(s,_)]}}function hK(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function P1(t){const e=[],n=new Set;for(const r of t){if(!hK(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=P1(r.children);e.push(new rs(r.value,i))}return e.filter(r=>!n.has(r))}function R1(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function N1(t){let e=t,n=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift??0;return n-1}function L1(t){return t.data||{}}function F1(t){return t.resolve||{}}const Rw=Symbol("RouteTitle");function V1(t){return"string"==typeof t.title||null===t.title}function Gp(t){return Fo(e=>{const n=t(e);return n?Ct(n).pipe(Ve(()=>e)):_e(e)})}class IK extends class wK{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}{}const Nw=new me("ROUTES");let Ow=(()=>{class t{constructor(n,r){this.injector=n,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return _e(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=si(n.loadComponent()).pipe(gn(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),yw(()=>{this.componentLoaders.delete(n)})),i=new zR(r,()=>new qe).pipe(gw());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return _e({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Ve(u=>{this.onLoadEndListener&&this.onLoadEndListener(r);let c,d,f=!1;Array.isArray(u)?d=u:(c=u.create(n).injector,d=QR(c.get(Nw,[],X.Self|X.Optional)));return{routes:d.map(kw),injector:c}}),yw(()=>{this.childrenLoaders.delete(r)})),o=new zR(s,()=>new qe).pipe(gw());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(n){return si(n()).pipe(Dt(r=>r instanceof Uk||Array.isArray(r)?_e(r):Ct(this.compiler.compileModuleAsync(r))))}}return t.\u0275fac=function(n){return new(n||t)(Q($n),Q(Rv))},t.\u0275prov=ce({token:t,factory:t.\u0275fac}),t})();class TK{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}}function DK(t){throw t}function CK(t,e,n){return e.parse("/")}function U1(t,e){return _e(null)}const SK={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},AK={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Tr=(()=>{class t{constructor(n,r,i,s,o,u,c){this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new qe,this.errorHandler=DK,this.malformedUriErrorHandler=CK,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:U1,afterPreactivation:U1},this.urlHandlingStrategy=new TK,this.routeReuseStrategy=new IK,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(Ow),this.configLoader.onLoadEndListener=_=>this.triggerEvent(new z4(_)),this.configLoader.onLoadStartListener=_=>this.triggerEvent(new $4(_)),this.ngModule=o.get(Us),this.console=o.get(CW);const p=o.get(mt);this.isNgZoneEnabled=p instanceof mt&&mt.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=function J4(){return new Bo(new Ae([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=l1(this.currentUrlTree,this.rootComponentType),this.transitions=new ii({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(n){const r=this.events;return n.pipe(Uu(i=>0!==i.id),Ve(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Fo(i=>{let s=!1,o=!1;return _e(i).pipe(gn(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Fo(u=>{const c=this.browserUrlTree.toString(),d=!this.navigated||u.extractedUrl.toString()!==c||c!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||d)&&this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return j1(u.source)&&(this.browserUrlTree=u.extractedUrl),_e(u).pipe(Fo(p=>{const _=this.transitions.getValue();return r.next(new vw(p.id,this.serializeUrl(p.extractedUrl),p.source,p.restoredState)),_!==this.transitions.getValue()?Sn:Promise.resolve(p)}),function K6(t,e,n,r){return Fo(i=>function G6(t,e,n,r,i){return new q6(t,e,n,r,i).apply()}(t,e,n,i.extractedUrl,r).pipe(Ve(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),gn(p=>{this.currentNavigation={...this.currentNavigation,finalUrl:p.urlAfterRedirects}}),function fK(t,e,n,r,i){return Dt(s=>function uK(t,e,n,r,i="emptyOnly",s="legacy"){try{const o=new cK(t,e,n,r,i,s).recognize();return null===o?k1(new aK):_e(o)}catch(o){return k1(o)}}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe(Ve(o=>({...s,targetSnapshot:o}))))}(this.rootComponentType,this.config,p=>this.serializeUrl(p),this.paramsInheritanceStrategy,this.relativeLinkResolution),gn(p=>{if("eager"===this.urlUpdateStrategy){if(!p.extras.skipLocationChange){const y=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl);this.setBrowserUrl(y,p)}this.browserUrlTree=p.urlAfterRedirects}const _=new F4(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);r.next(_)}));if(d&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:_,extractedUrl:y,source:w,restoredState:E,extras:b}=u,M=new vw(_,this.serializeUrl(y),w,E);r.next(M);const P=l1(y,this.rootComponentType).snapshot;return _e({...u,targetSnapshot:P,urlAfterRedirects:y,extras:{...b,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=u.rawUrl,u.resolve(null),Sn}),Gp(u=>{const{targetSnapshot:c,id:d,extractedUrl:f,rawUrl:p,extras:{skipLocationChange:_,replaceUrl:y}}=u;return this.hooks.beforePreactivation(c,{navigationId:d,appliedUrlTree:f,rawUrlTree:p,skipLocationChange:!!_,replaceUrl:!!y})}),gn(u=>{const c=new V4(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(c)}),Ve(u=>({...u,guards:Z6(u.targetSnapshot,u.currentSnapshot,this.rootContexts)})),function X6(t,e){return Dt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?_e({...n,guardsResult:!0}):function eK(t,e,n,r){return Ct(t).pipe(Dt(i=>function oK(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?_e(s.map(u=>{const c=Hp(u,e,i);let d;if(function V6(t){return t&&qs(t.canDeactivate)}(c))d=si(c.canDeactivate(t,e,n,r));else{if(!qs(c))throw new Error("Invalid CanDeactivate guard");d=si(c(t,e,n,r))}return d.pipe(Vo())})).pipe(Yl()):_e(!0)}(i.component,i.route,n,e,r)),Vo(i=>!0!==i,!0))}(o,r,i,t).pipe(Dt(u=>u&&function N6(t){return"boolean"==typeof t}(u)?function tK(t,e,n,r){return Ct(e).pipe(zl(i=>pw(function rK(t,e){return null!==t&&e&&e(new H4(t)),_e(!0)}(i.route.parent,r),function nK(t,e){return null!==t&&e&&e(new q4(t)),_e(!0)}(i.route,r),function sK(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Q6(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>$R(()=>_e(o.guards.map(c=>{const d=Hp(c,o.node,n);let f;if(function F6(t){return t&&qs(t.canActivateChild)}(d))f=si(d.canActivateChild(r,t));else{if(!qs(d))throw new Error("Invalid CanActivateChild guard");f=si(d(r,t))}return f.pipe(Vo())})).pipe(Yl())));return _e(s).pipe(Yl())}(t,i.path,n),function iK(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return _e(!0);const i=r.map(s=>$R(()=>{const o=Hp(s,e,n);let u;if(function L6(t){return t&&qs(t.canActivate)}(o))u=si(o.canActivate(e,t));else{if(!qs(o))throw new Error("Invalid CanActivate guard");u=si(o(e,t))}return u.pipe(Vo())}));return _e(i).pipe(Yl())}(t,i.route,n))),Vo(i=>!0!==i,!0))}(r,s,t,e):_e(u)),Ve(u=>({...n,guardsResult:u})))})}(this.ngModule.injector,u=>this.triggerEvent(u)),gn(u=>{if(jo(u.guardsResult)){const d=ww(`Redirecting to "${this.serializeUrl(u.guardsResult)}"`);throw d.url=u.guardsResult,d}const c=new B4(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.triggerEvent(c)}),Uu(u=>!!u.guardsResult||(this.restoreHistory(u),this.cancelNavigationTransition(u,""),!1)),Gp(u=>{if(u.guards.canActivateChecks.length)return _e(u).pipe(gn(c=>{const d=new U4(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(d)}),Fo(c=>{let d=!1;return _e(c).pipe(function pK(t,e){return Dt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return _e(n);let s=0;return Ct(i).pipe(zl(o=>function gK(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!V1(i)&&(s[Rw]=i.title),function mK(t,e,n,r){const i=function _K(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return _e({});const s={};return Ct(i).pipe(Dt(o=>function yK(t,e,n,r){const i=Hp(t,e,r);return si(i.resolve?i.resolve(e,n):i(e,n))}(t[o],e,n,r).pipe(Vo(),gn(u=>{s[o]=u}))),mw(1),function O4(t){return Ve(()=>t)}(s),Gs(o=>o instanceof $l?Sn:jl(o)))}(s,t,e,r).pipe(Ve(o=>(t._resolvedData=o,t.data=d1(t,n).resolve,i&&V1(i)&&(t.data[Rw]=i.title),null)))}(o.route,r,t,e)),gn(()=>s++),mw(1),Dt(o=>s===i.length?_e(n):Sn))})}(this.paramsInheritanceStrategy,this.ngModule.injector),gn({next:()=>d=!0,complete:()=>{d||(this.restoreHistory(c),this.cancelNavigationTransition(c,"At least one route resolver didn't emit any value."))}}))}),gn(c=>{const d=new j4(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(d)}))}),Gp(u=>{const{targetSnapshot:c,id:d,extractedUrl:f,rawUrl:p,extras:{skipLocationChange:_,replaceUrl:y}}=u;return this.hooks.afterPreactivation(c,{navigationId:d,appliedUrlTree:f,rawUrlTree:p,skipLocationChange:!!_,replaceUrl:!!y})}),Gp(u=>{const c=d=>{const f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(gn(p=>{d.component=p}),Ve(()=>{})));for(const p of d.children)f.push(...c(p));return f};return UR(c(u.targetSnapshot.root)).pipe(_w(),De(1))}),Ve(u=>{const c=function m6(t,e,n){const r=Wl(t,e._root,n?n._root:void 0);return new c1(r,e)}(this.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return{...u,targetRouterState:c}}),gn(u=>{this.currentUrlTree=u.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl),this.routerState=u.targetRouterState,"deferred"===this.urlUpdateStrategy&&(u.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,u),this.browserUrlTree=u.urlAfterRedirects)}),((t,e,n)=>Ve(r=>(new R6(e,r.targetRouterState,r.currentRouterState,n).activate(t),r)))(this.rootContexts,this.routeReuseStrategy,u=>this.triggerEvent(u)),gn({next(){s=!0},complete(){s=!0}}),yw(()=>{s||o||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Gs(u=>{if(o=!0,function Z4(t){return t&&t[KR]}(u)){const c=jo(u.url);c||(this.navigated=!0,this.restoreHistory(i,!0));const d=new qR(i.id,this.serializeUrl(i.extractedUrl),u.message);if(r.next(d),c){const f=this.urlHandlingStrategy.merge(u.url,this.rawUrlTree),p={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||j1(i.source)};this.scheduleNavigation(f,"imperative",null,p,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const c=new L4(i.id,this.serializeUrl(i.extractedUrl),u);r.next(c);try{i.resolve(this.errorHandler(u))}catch(d){i.reject(d)}}return Sn}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}setTransition(n){this.transitions.next({...this.transitions.value,...n})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=n.state?.navigationId?n.state:null;if(s){const u={...s};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(i.state=u)}const o=this.parseUrl(n.url);this.scheduleNavigation(o,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){this.config=n.map(kw),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:u,preserveFragment:c}=r,d=i||this.routerState.root,f=c?this.currentUrlTree.fragment:o;let p=null;switch(u){case"merge":p={...this.currentUrlTree.queryParams,...s};break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}return null!==p&&(p=this.removeEmptyProps(p)),function v6(t,e,n,r,i){if(0===n.length)return Sw(e.root,e.root,e.root,r,i);const s=function w6(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new g1(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const u={};return mn(s.outlets,(c,d)=>{u[d]="string"==typeof c?c.split("/"):c}),[...i,{outlets:u}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((u,c)=>{0==c&&"."===u||(0==c&&""===u?n=!0:".."===u?e++:""!=u&&i.push(u))}),i):[...i,s]},[]);return new g1(n,e,r)}(n);return s.toRoot()?Sw(e.root,e.root,new Ae([],{}),r,i):function o(c){const d=function I6(t,e,n,r){return t.isAbsolute?new Aw(e.root,!0,0):-1===r?new Aw(n,n===e.root,0):function E6(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Aw(r,!1,i-s)}(n,r+(Fp(t.commands[0])?0:1),t.numberOfDoubleDots)}(s,e,t.snapshot?._urlSegment,c),f=d.processChildren?Vp(d.segmentGroup,d.index,s.commands):m1(d.segmentGroup,d.index,s.commands);return Sw(e.root,d.segmentGroup,f,r,i)}(t.snapshot?._lastPathIndex)}(d,this.currentUrlTree,n,p,f??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=jo(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(n,r={skipLocationChange:!1}){return function xK(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...SK}:!1===r?{...AK}:r,jo(n))return XR(this.currentUrlTree,n,i);const s=this.parseUrl(n);return XR(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new Hl(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let u,c,d;o?(u=o.resolve,c=o.reject,d=o.promise):d=new Promise((_,y)=>{u=_,c=y});const f=++this.navigationId;let p;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),p=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):p=0,this.setTransition({id:f,targetPageId:p,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:s,resolve:u,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(_=>Promise.reject(_))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,r){const i=new qR(n.id,this.serializeUrl(n.extractedUrl),r);this.triggerEvent(i),n.resolve(!1)}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return t.\u0275fac=function(n){Ey()},t.\u0275prov=ce({token:t,factory:t.\u0275fac}),t})();function j1(t){return"imperative"!==t}class $1{buildTitle(e){let n,r=e.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(i=>i.outlet===be);return n}getResolvedTitleForRoute(e){return e.data[Rw]}}let PK=(()=>{class t extends $1{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return t.\u0275fac=function(n){return new(n||t)(Q(FR))},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class z1{}class H1{preload(e,n){return _e(null)}}let G1=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Uu(n=>n instanceof Hl),zl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=ip(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,u=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(u,s.children??s._loadedRoutes))}return Ct(i).pipe(Fi())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):_e(null);const s=i.pipe(Dt(o=>null===o?_e(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?Ct([s,this.loader.loadComponent(r)]).pipe(Fi()):s})}}return t.\u0275fac=function(n){return new(n||t)(Q(Tr),Q(Rv),Q(Po),Q(z1),Q(Ow))},t.\u0275prov=ce({token:t,factory:t.\u0275fac}),t})(),Vw=(()=>{class t{constructor(n,r,i={}){this.router=n,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof vw?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Hl&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof WR&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.router.triggerEvent(new WR(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(n){Ey()},t.\u0275prov=ce({token:t,factory:t.\u0275fac}),t})();const $o=new me("ROUTER_CONFIGURATION"),q1=new me("ROUTER_FORROOT_GUARD"),NK=[Wv,{provide:r1,useClass:i1},{provide:Tr,useFactory:function BK(t,e,n,r,i,s,o={},u,c,d,f){const p=new Tr(null,t,e,n,r,i,QR(s));return d&&(p.urlHandlingStrategy=d),f&&(p.routeReuseStrategy=f),p.titleStrategy=c??u,function UK(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(e.canceledNavigationResolution=t.canceledNavigationResolution)}(o,p),p},deps:[r1,Zl,Wv,$n,Rv,Nw,$o,PK,[$1,new Gt],[class EK{},new Gt],[class vK{},new Gt]]},Zl,{provide:zu,useFactory:function jK(t){return t.routerState.root},deps:[Tr]},G1,H1,class RK{preload(e,n){return n().pipe(Gs(()=>_e(null)))}},{provide:$o,useValue:{enableTracing:!1}},Ow];function OK(){return new RP("Router",Tr)}let W1=(()=>{class t{constructor(n,r){}static forRoot(n,r){return{ngModule:t,providers:[NK,K1(n),{provide:q1,useFactory:VK,deps:[[Tr,new Gt,new ll]]},{provide:$o,useValue:r||{}},{provide:Bu,useFactory:FK,deps:[Ll,[new Df(qv),new Gt],$o]},{provide:Vw,useFactory:LK,deps:[Tr,N8,$o]},{provide:z1,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:H1},{provide:RP,multi:!0,useFactory:OK},[Bw,{provide:kv,multi:!0,useFactory:$K,deps:[Bw]},{provide:Z1,useFactory:zK,deps:[Bw]},{provide:SP,multi:!0,useExisting:Z1}]]}}static forChild(n){return{ngModule:t,providers:[K1(n)]}}}return t.\u0275fac=function(n){return new(n||t)(Q(q1,8),Q(Tr,8))},t.\u0275mod=Kr({type:t}),t.\u0275inj=Xt({}),t})();function LK(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Vw(t,e,n)}function FK(t,e,n={}){return n.useHash?new g3(t,e):new nR(t,e)}function VK(t){return"guarded"}function K1(t){return[{provide:$U,multi:!0,useValue:t},{provide:Nw,multi:!0,useValue:t}]}let Bw=(()=>{class t{constructor(n){this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new qe}appInitializer(){return this.injector.get(h3,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(u=>r=u),s=this.injector.get(Tr),o=this.injector.get($o);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?_e(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(n){const r=this.injector.get($o),i=this.injector.get(G1),s=this.injector.get(Vw),o=this.injector.get(Tr),u=this.injector.get(dp);n===u.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&o.initialNavigation(),i.setUpPreloading(),s.init(),o.resetRootComponentType(u.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(n){return new(n||t)(Q($n))},t.\u0275prov=ce({token:t,factory:t.\u0275fac}),t})();function $K(t){return t.appInitializer.bind(t)}function zK(t){return t.bootstrapListener.bind(t)}const Z1=new me("Router Initializer"),GK=[];let qK=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Kr({type:t}),t.\u0275inj=Xt({imports:[W1.forRoot(GK),W1]}),t})();const Uw_mapbox_accessToken="pk.eyJ1IjoiYnJhc2thbSIsImEiOiJja3NqcXBzbWoyZ3ZvMm5ybzA4N2dzaDR6In0.RUAYJFnNgOnn80wXkrV9ZA",Uw_firebaseConfig={apiKey:"AIzaSyCvtild5UJdQqpax2vWsBN6mhC5megh20Y",authDomain:"itrack-9b96d.firebaseapp.com",projectId:"itrack-9b96d",storageBucket:"itrack-9b96d.appspot.com",messagingSenderId:"826989372548",appId:"1:826989372548:web:186765bdced7ca2fa80ed1",measurementId:"G-8B4T34D891"};var Ws=V(407);function Q1(t,e,n,r,i,s,o){try{var u=t[s](o),c=u.value}catch(d){return void n(d)}u.done?e(c):Promise.resolve(c).then(r,i)}function T(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(c){Q1(s,r,i,o,u,"next",c)}function u(c){Q1(s,r,i,o,u,"throw",c)}o(void 0)})}}const Y1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},$w={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,u=o?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0;let _=(15&u)<<2|d>>6,y=63&d;c||(y=64,o||(_=64)),r.push(n[s>>2],n[(3&s)<<4|u>>4],n[_],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Y1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const c=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==u||null==d||null==p)throw Error();r.push(s<<2|u>>4),64!==d&&(r.push(u<<4&240|d>>2),64!==p&&r.push(d<<6&192|p))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},qp=function(t){return function(t){const e=Y1(t);return $w.encodeByteArray(e,!0)}(t).replace(/\./g,"")};class Hw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function br(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function X1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(br())}function Wp(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function eN(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function zo(){return"object"==typeof indexedDB}function td(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(n){e(n)}})}function Gw(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class is extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ai.prototype.create)}}class Ai{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function r5(t,e){return t.replace(i5,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new is(i,`${this.serviceName}: ${o} (${i}).`,r)}}const i5=/\{\$([^}]+)}/g;function qw(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(nN(s)&&nN(o)){if(!qw(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function nN(t){return null!==t&&"object"==typeof t}function rN(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class o5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function a5(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=Ww),void 0===i.error&&(i.error=Ww),void 0===i.complete&&(i.complete=Ww);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ww(){}function Zw(t,e=1e3,n=2){const r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function $r(t){return t&&t._delegate?t._delegate:t}class Rn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ho="[DEFAULT]";class f5{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Hw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function g5(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ho})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return T(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Ho){return this.instances.has(e)}getOptions(e=Ho){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===Ho?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=Ho){return this.component?this.component.multipleInstances?e:Ho:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class m5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new f5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const Qw=[];var Ne=(()=>{return(t=Ne||(Ne={}))[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",Ne;var t})();const iN={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},_5=Ne.INFO,y5={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},v5=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=y5[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class Hu{constructor(e){this.name=e,this._logLevel=_5,this._logHandler=v5,this._userLogHandler=null,Qw.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?iN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}let sN,oN;const aN=new WeakMap,Yw=new WeakMap,uN=new WeakMap,Jw=new WeakMap,Xw=new WeakMap;let eI={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Yw.get(t);if("objectStoreNames"===e)return t.objectStoreNames||uN.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ss(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function S5(t){return"function"==typeof t?function C5(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function E5(){return oN||(oN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(tI(this),e),ss(aN.get(this))}:function(...e){return ss(t.apply(tI(this),e))}:function(e,...n){const r=t.call(tI(this),e,...n);return uN.set(r,e.sort?e.sort():[e]),ss(r)}}(t):(t instanceof IDBTransaction&&function b5(t){if(Yw.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Yw.set(t,e)}(t),((t,e)=>e.some(n=>t instanceof n))(t,function I5(){return sN||(sN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,eI):t)}function ss(t){if(t instanceof IDBRequest)return function T5(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ss(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&aN.set(n,t)}).catch(()=>{}),Xw.set(e,t),e}(t);if(Jw.has(t))return Jw.get(t);const e=S5(t);return e!==t&&(Jw.set(t,e),Xw.set(e,t)),e}const tI=t=>Xw.get(t);function Zp(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),u=ss(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ss(o.result),c.oldVersion,c.newVersion,ss(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),u.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),u}function nI(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),ss(n).then(()=>{})}const A5=["get","getKey","getAll","getAllKeys","count"],x5=["put","add","delete","clear"],rI=new Map;function cN(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(rI.get(e))return rI.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=x5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!A5.includes(n))return;const s=function(){var o=T(function*(u,...c){const d=this.transaction(u,i?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(c.shift())),(yield Promise.all([f[n](...c),i&&d.done]))[0]});return function(c){return o.apply(this,arguments)}}();return rI.set(e,s),s}!function D5(t){eI=t(eI)}(t=>({...t,get:(e,n,r)=>cN(e,n)||t.get(e,n,r),has:(e,n)=>!!cN(e,n)||t.has(e,n)}));class M5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function k5(t){return"VERSION"===t.getComponent()?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const iI="@firebase/app",sI=new Hu("@firebase/app"),oI="[DEFAULT]",r7={[iI]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Go=new Map,Qp=new Map;function i7(t,e){try{t.container.addComponent(e)}catch(n){sI.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qn(t){const e=t.name;if(Qp.has(e))return sI.debug(`There were multiple attempts to register component ${e}.`),!1;Qp.set(e,t);for(const n of Go.values())i7(n,t);return!0}function Yp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const Ks=new Ai("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class o7{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ks.create("app-deleted",{appName:this._name})}}function a7(t,e={}){"object"!=typeof e&&(e={name:e});const n=Object.assign({name:oI,automaticDataCollectionEnabled:!1},e),r=n.name;if("string"!=typeof r||!r)throw Ks.create("bad-app-name",{appName:String(r)});const i=Go.get(r);if(i){if(qw(t,i.options)&&qw(n,i.config))return i;throw Ks.create("duplicate-app",{appName:r})}const s=new m5(r);for(const u of Qp.values())s.addComponent(u);const o=new o7(t,n,s);return Go.set(r,o),o}function dN(t=oI){const e=Go.get(t);if(!e)throw Ks.create("no-app",{appName:t});return e}function hN(){return Array.from(Go.values())}function xt(t,e,n){var r;let i=null!==(r=r7[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const u=[`Unable to register library "${i}" with version "${e}":`];return s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void sI.warn(u.join(" "))}qn(new Rn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const nd="firebase-heartbeat-store";let uI=null;function fN(){return uI||(uI=Zp("firebase-heartbeat-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(nd)}}).catch(t=>{throw Ks.create("storage-open",{originalErrorMessage:t.message})})),uI}function cI(){return(cI=T(function*(t){var e;try{return(yield fN()).transaction(nd).objectStore(nd).get(gN(t))}catch(n){throw Ks.create("storage-get",{originalErrorMessage:null===(e=n)||void 0===e?void 0:e.message})}})).apply(this,arguments)}function pN(t,e){return lI.apply(this,arguments)}function lI(){return(lI=T(function*(t,e){var n;try{const i=(yield fN()).transaction(nd,"readwrite");return yield i.objectStore(nd).put(e,gN(t)),i.done}catch(r){throw Ks.create("storage-set",{originalErrorMessage:null===(n=r)||void 0===n?void 0:n.message})}})).apply(this,arguments)}function gN(t){return`${t.name}!${t.options.appId}`}class f7{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new g7(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return T(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=mN();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return T(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=mN(),{heartbeatsToSend:r,unsentEntries:i}=function p7(t,e=1024){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),_N(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),_N(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=qp(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function mN(){return(new Date).toISOString().substring(0,10)}class g7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return T(function*(){return!!zo()&&td().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return T(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function l7(t){return cI.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return T(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return pN(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return T(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return pN(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function _N(t){return qp(JSON.stringify({version:2,heartbeats:t})).length}!function m7(t){qn(new Rn("platform-logger",e=>new M5(e),"PRIVATE")),qn(new Rn("heartbeat",e=>new f7(e),"PRIVATE")),xt(iI,"0.7.26",t),xt(iI,"0.7.26","esm2017"),xt("fire-js","")}(""),xt("firebase","9.8.3","app");const yN="@firebase/installations",dI="0.5.10",wN=`w:${dI}`,IN="FIS_v2",os=new Ai("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function EN(t){return t instanceof is&&t.code.includes("request-failed")}function hI({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function TN(t){return{token:t.token,requestStatus:2,expiresIn:b7(t.expiresIn),creationTime:Date.now()}}function fI(t,e){return pI.apply(this,arguments)}function pI(){return(pI=T(function*(t,e){const r=(yield e.json()).error;return os.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function bN({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function DN(t,{refreshToken:e}){const n=bN(t);return n.append("Authorization",function D7(t){return`${IN} ${t}`}(e)),n}function gI(t){return mI.apply(this,arguments)}function mI(){return(mI=T(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function b7(t){return Number(t.replace("s","000"))}function C7(t,e){return _I.apply(this,arguments)}function _I(){return(_I=T(function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=hI(t),i=bN(t),s=e.getImmediate({optional:!0});if(s){const d=yield s.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const u={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:IN,appId:t.appId,sdkVersion:wN})},c=yield gI(()=>fetch(r,u));if(c.ok){const d=yield c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:TN(d.authToken)}}throw yield fI("Create Installation",c)})).apply(this,arguments)}function CN(t){return new Promise(e=>{setTimeout(e,t)})}const A7=/^[cdef][\w-]{21}$/;function x7(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=function M7(t){return function S7(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return A7.test(n)?n:""}catch{return""}}function Gu(t){return`${t.appName}!${t.appId}`}const qu=new Map;function SN(t,e){const n=Gu(t);AN(n,e),function R7(t,e){const n=function xN(){return!qo&&"BroadcastChannel"in self&&(qo=new BroadcastChannel("[Firebase] FID Change"),qo.onmessage=t=>{AN(t.data.key,t.data.fid)}),qo}();n&&n.postMessage({key:t,fid:e}),function MN(){0===qu.size&&qo&&(qo.close(),qo=null)}()}(n,e)}function AN(t,e){const n=qu.get(t);if(n)for(const r of n)r(e)}let qo=null;const Wo="firebase-installations-store";let vI=null;function wI(){return vI||(vI=Zp("firebase-installations-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Wo)}})),vI}function Xp(t,e){return II.apply(this,arguments)}function II(){return(II=T(function*(t,e){const n=Gu(t),i=(yield wI()).transaction(Wo,"readwrite"),s=i.objectStore(Wo),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&SN(t,e.fid),e})).apply(this,arguments)}function EI(t){return TI.apply(this,arguments)}function TI(){return(TI=T(function*(t){const e=Gu(t),r=(yield wI()).transaction(Wo,"readwrite");yield r.objectStore(Wo).delete(e),yield r.done})).apply(this,arguments)}function rd(t,e){return bI.apply(this,arguments)}function bI(){return(bI=T(function*(t,e){const n=Gu(t),i=(yield wI()).transaction(Wo,"readwrite"),s=i.objectStore(Wo),o=yield s.get(n),u=e(o);return void 0===u?yield s.delete(n):yield s.put(u,n),yield i.done,u&&(!o||o.fid!==u.fid)&&SN(t,u.fid),u})).apply(this,arguments)}function DI(t){return CI.apply(this,arguments)}function CI(){return(CI=T(function*(t){let e;const n=yield rd(t.appConfig,r=>{const i=L7(r),s=F7(t,i);return e=s.registrationPromise,s.installationEntry});return""===n.fid?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})).apply(this,arguments)}function L7(t){return PN(t||{fid:x7(),registrationStatus:0})}function F7(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(os.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function V7(t,e){return SI.apply(this,arguments)}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:B7(t)}:{installationEntry:e}}function SI(){return(SI=T(function*(t,e){try{const n=yield C7(t,e);return Xp(t.appConfig,n)}catch(n){throw EN(n)&&409===n.customData.serverCode?yield EI(t.appConfig):yield Xp(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})).apply(this,arguments)}function B7(t){return AI.apply(this,arguments)}function AI(){return(AI=T(function*(t){let e=yield kN(t.appConfig);for(;1===e.registrationStatus;)yield CN(100),e=yield kN(t.appConfig);if(0===e.registrationStatus){const{installationEntry:n,registrationPromise:r}=yield DI(t);return r||n}return e})).apply(this,arguments)}function kN(t){return rd(t,e=>{if(!e)throw os.create("installation-not-found");return PN(e)})}function PN(t){return function U7(t){return 1===t.registrationStatus&&t.registrationTime+1e4<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function j7(t,e){return xI.apply(this,arguments)}function xI(){return(xI=T(function*({appConfig:t,heartbeatServiceProvider:e},n){const r=$7(t,n),i=DN(t,n),s=e.getImmediate({optional:!0});if(s){const d=yield s.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const u={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:wN,appId:t.appId}})},c=yield gI(()=>fetch(r,u));if(c.ok)return TN(yield c.json());throw yield fI("Generate Auth Token",c)})).apply(this,arguments)}function $7(t,{fid:e}){return`${hI(t)}/${e}/authTokens:generate`}function MI(t){return kI.apply(this,arguments)}function kI(){return(kI=T(function*(t,e=!1){let n;const r=yield rd(t.appConfig,s=>{if(!NN(s))throw os.create("not-registered");const o=s.authToken;if(!e&&G7(o))return s;if(1===o.requestStatus)return n=z7(t,e),s;{if(!navigator.onLine)throw os.create("app-offline");const u=W7(s);return n=H7(t,u),u}});return n?yield n:r.authToken})).apply(this,arguments)}function z7(t,e){return PI.apply(this,arguments)}function PI(){return(PI=T(function*(t,e){let n=yield RN(t.appConfig);for(;1===n.authToken.requestStatus;)yield CN(100),n=yield RN(t.appConfig);const r=n.authToken;return 0===r.requestStatus?MI(t,e):r})).apply(this,arguments)}function RN(t){return rd(t,e=>{if(!NN(e))throw os.create("not-registered");return function K7(t){return 1===t.requestStatus&&t.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function H7(t,e){return RI.apply(this,arguments)}function RI(){return(RI=T(function*(t,e){try{const n=yield j7(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield Xp(t.appConfig,r),n}catch(n){if(!EN(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Xp(t.appConfig,r)}else yield EI(t.appConfig);throw n}})).apply(this,arguments)}function NN(t){return void 0!==t&&2===t.registrationStatus}function G7(t){return 2===t.requestStatus&&!function q7(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(t)}function W7(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function NI(){return(NI=T(function*(t){const e=t,{installationEntry:n,registrationPromise:r}=yield DI(e);return r?r.catch(console.error):MI(e).catch(console.error),n.fid})).apply(this,arguments)}function OI(){return(OI=T(function*(t,e=!1){const n=t;return yield Y7(n),(yield MI(n,e)).token})).apply(this,arguments)}function Y7(t){return LI.apply(this,arguments)}function LI(){return(LI=T(function*(t){const{registrationPromise:e}=yield DI(t);e&&(yield e)})).apply(this,arguments)}function BI(t){return os.create("missing-app-config-values",{valueName:t})}const ON="installations",nZ=t=>{const e=t.getProvider("app").getImmediate(),n=function eZ(t){if(!t||!t.options)throw BI("App Configuration");if(!t.name)throw BI("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw BI(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:Yp(e,"heartbeat"),_delete:()=>Promise.resolve()}},rZ=t=>{const n=Yp(t.getProvider("app").getImmediate(),ON).getImmediate();return{getId:()=>function Z7(t){return NI.apply(this,arguments)}(n),getToken:i=>function Q7(t){return OI.apply(this,arguments)}(n,i)}};(function iZ(){qn(new Rn(ON,nZ,"PUBLIC")),qn(new Rn("installations-internal",rZ,"PRIVATE"))})(),xt(yN,dI),xt(yN,dI,"esm2017");const UI="@firebase/remote-config",ir=new Ai("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class gZ{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var n=this;return T(function*(){const[r,i]=yield Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);if(i&&n.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield n.client.fetch(e),o=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(n.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function mZ(t=navigator){return t.languages&&t.languages[0]||t.language}class _Z{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var n=this;return T(function*(){var r,i,s;const[o,u]=yield Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]),d=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${n.projectId}/namespaces/${n.namespace}:fetch?key=${n.apiKey}`,f={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},p={sdk_version:n.sdkVersion,app_instance_id:o,app_instance_id_token:u,app_id:n.appId,language_code:mZ()},_={method:"POST",headers:f,body:JSON.stringify(p)},y=fetch(d,_),w=new Promise((F,H)=>{e.signal.addEventListener(()=>{const ee=new Error("The operation was aborted.");ee.name="AbortError",H(ee)})});let E;try{yield Promise.race([y,w]),E=yield y}catch(F){let H="fetch-client-network";throw"AbortError"===(null===(r=F)||void 0===r?void 0:r.name)&&(H="fetch-timeout"),ir.create(H,{originalErrorMessage:null===(i=F)||void 0===i?void 0:i.message})}let b=E.status;const M=E.headers.get("ETag")||void 0;let P,S;if(200===E.status){let F;try{F=yield E.json()}catch(H){throw ir.create("fetch-client-parse",{originalErrorMessage:null===(s=H)||void 0===s?void 0:s.message})}P=F.entries,S=F.state}if("INSTANCE_STATE_UNSPECIFIED"===S?b=500:"NO_CHANGE"===S?b=304:("NO_TEMPLATE"===S||"EMPTY_CONFIG"===S)&&(P={}),304!==b&&200!==b)throw ir.create("fetch-status",{httpStatus:b});return{status:b,eTag:M,config:P}})()}}class wZ{constructor(e,n){this.client=e,this.storage=n}fetch(e){var n=this;return T(function*(){const r=(yield n.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return n.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:r}){var i=this;return T(function*(){yield function yZ(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(ir.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,n);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function vZ(t){if(!(t instanceof is&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+Zw(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class TZ{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function tg(t,e){var n;const r=t.target.error||void 0;return ir.create(e,{originalErrorMessage:r&&(null===(n=r)||void 0===n?void 0:n.message)})}const Ko="app_namespace_store";class SZ{constructor(e,n,r,i=function CZ(){return new Promise((t,e)=>{var n;try{const r=indexedDB.open("firebase_remote_config",1);r.onerror=i=>{e(tg(i,"storage-open"))},r.onsuccess=i=>{t(i.target.result)},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Ko,{keyPath:"compositeKey"})}}catch(r){e(ir.create("storage-open",{originalErrorMessage:null===(n=r)||void 0===n?void 0:n.message}))}})}()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var n=this;return T(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{var o;const c=r.transaction([Ko],"readonly").objectStore(Ko),d=n.createCompositeKey(e);try{const f=c.get(d);f.onerror=p=>{s(tg(p,"storage-get"))},f.onsuccess=p=>{const _=p.target.result;i(_?_.value:void 0)}}catch(f){s(ir.create("storage-get",{originalErrorMessage:null===(o=f)||void 0===o?void 0:o.message}))}})})()}set(e,n){var r=this;return T(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{var u;const d=i.transaction([Ko],"readwrite").objectStore(Ko),f=r.createCompositeKey(e);try{const p=d.put({compositeKey:f,value:n});p.onerror=_=>{o(tg(_,"storage-set"))},p.onsuccess=()=>{s()}}catch(p){o(ir.create("storage-set",{originalErrorMessage:null===(u=p)||void 0===u?void 0:u.message}))}})})()}delete(e){var n=this;return T(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{var o;const c=r.transaction([Ko],"readwrite").objectStore(Ko),d=n.createCompositeKey(e);try{const f=c.delete(d);f.onerror=p=>{s(tg(p,"storage-delete"))},f.onsuccess=()=>{i()}}catch(f){s(ir.create("storage-delete",{originalErrorMessage:null===(o=f)||void 0===o?void 0:o.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class AZ{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return T(function*(){const n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield n;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const u=yield i;u&&(e.activeConfig=u)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function MZ(){return GI.apply(this,arguments)}function GI(){return(GI=T(function*(){if(!zo())return!1;try{return yield td()}catch{return!1}})).apply(this,arguments)}!function xZ(){qn(new Rn("remote-config",function t(e,{instanceIdentifier:n}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ir.create("registration-window");if(!zo())throw ir.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:u}=r.options;if(!s)throw ir.create("registration-project-id");if(!o)throw ir.create("registration-api-key");if(!u)throw ir.create("registration-app-id");const c=new SZ(u,r.name,n=n||"firebase"),d=new AZ(c),f=new Hu(UI);f.logLevel=Ne.ERROR;const p=new _Z(i,"9.8.3",n,s,o,u),_=new wZ(p,c),y=new gZ(_,c,d,f),w=new TZ(r,y,d,c,f);return function hZ(t){const e=$r(t);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(w),w},"PUBLIC").setMultipleInstances(!0)),xt(UI,"0.3.9"),xt(UI,"0.3.9","esm2017")}();const kZ="/firebase-messaging-sw.js",PZ="/firebase-cloud-messaging-push-scope",BN="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",UN="google.c.a.c_id",NZ="google.c.a.c_l",OZ="google.c.a.ts",LZ="google.c.a.e";var Wu=(()=>{return(t=Wu||(Wu={})).PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",Wu;var t})();function as(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function FZ(t){const n=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const qI="fcm_token_details_db",jN="fcm_token_object_Store";function BZ(t){return WI.apply(this,arguments)}function WI(){return WI=T(function*(t){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(qI))return null;let e=null;return(yield Zp(qI,5,{upgrade:(r=T(function*(i,s,o,u){var c;if(s<2||!i.objectStoreNames.contains(jN))return;const d=u.objectStore(jN),f=yield d.index("fcmSenderId").get(t);if(yield d.clear(),f)if(2===s){const p=f;if(!p.auth||!p.p256dh||!p.endpoint)return;e={token:p.fcmToken,createTime:null!==(c=p.createTime)&&void 0!==c?c:Date.now(),subscriptionOptions:{auth:p.auth,p256dh:p.p256dh,endpoint:p.endpoint,swScope:p.swScope,vapidKey:"string"==typeof p.vapidKey?p.vapidKey:as(p.vapidKey)}}}else if(3===s){const p=f;e={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:as(p.auth),p256dh:as(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:as(p.vapidKey)}}}else if(4===s){const p=f;e={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:as(p.auth),p256dh:as(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:as(p.vapidKey)}}}}),function(s,o,u,c){return r.apply(this,arguments)})})).close(),yield nI(qI),yield nI("fcm_vapid_details_db"),yield nI("undefined"),UZ(e)?e:null;var r}),WI.apply(this,arguments)}function UZ(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const Zo="firebase-messaging-store";let KI=null;function ZI(){return KI||(KI=Zp("firebase-messaging-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Zo)}})),KI}function $N(t){return QI.apply(this,arguments)}function QI(){return(QI=T(function*(t){const e=eE(t),r=yield(yield ZI()).transaction(Zo).objectStore(Zo).get(e);if(r)return r;{const i=yield BZ(t.appConfig.senderId);if(i)return yield YI(t,i),i}})).apply(this,arguments)}function YI(t,e){return JI.apply(this,arguments)}function JI(){return(JI=T(function*(t,e){const n=eE(t),i=(yield ZI()).transaction(Zo,"readwrite");return yield i.objectStore(Zo).put(e,n),yield i.done,e})).apply(this,arguments)}function zZ(t){return XI.apply(this,arguments)}function XI(){return(XI=T(function*(t){const e=eE(t),r=(yield ZI()).transaction(Zo,"readwrite");yield r.objectStore(Zo).delete(e),yield r.done})).apply(this,arguments)}function eE({appConfig:t}){return t.appId}const _n=new Ai("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function GZ(t,e){return tE.apply(this,arguments)}function tE(){return(tE=T(function*(t,e){const n=yield sE(t),r=HN(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(iE(t.appConfig),i)).json()}catch(o){throw _n.create("token-subscribe-failed",{errorInfo:o})}if(s.error)throw _n.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw _n.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function qZ(t,e){return nE.apply(this,arguments)}function nE(){return(nE=T(function*(t,e){const n=yield sE(t),r=HN(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${iE(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw _n.create("token-update-failed",{errorInfo:o})}if(s.error)throw _n.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw _n.create("token-update-no-token");return s.token})).apply(this,arguments)}function zN(t,e){return rE.apply(this,arguments)}function rE(){return(rE=T(function*(t,e){const r={method:"DELETE",headers:yield sE(t)};try{const s=yield(yield fetch(`${iE(t.appConfig)}/${e}`,r)).json();if(s.error)throw _n.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw _n.create("token-unsubscribe-failed",{errorInfo:i})}})).apply(this,arguments)}function iE({projectId:t}){return`https://fcmregistrations.googleapis.com/v1/projects/${t}/registrations`}function sE(t){return oE.apply(this,arguments)}function oE(){return(oE=T(function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function HN({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==BN&&(i.web.applicationPubKey=r),i}const WZ=6048e5;function KZ(t){return aE.apply(this,arguments)}function aE(){return(aE=T(function*(t){const e=yield QZ(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:as(e.getKey("auth")),p256dh:as(e.getKey("p256dh"))},r=yield $N(t.firebaseDependencies);if(r){if(YZ(r.subscriptionOptions,n))return Date.now()>=r.createTime+WZ?ZZ(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield zN(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return qN(t.firebaseDependencies,n)}return qN(t.firebaseDependencies,n)})).apply(this,arguments)}function GN(t){return uE.apply(this,arguments)}function uE(){return(uE=T(function*(t){const e=yield $N(t.firebaseDependencies);e&&(yield zN(t.firebaseDependencies,e.token),yield zZ(t.firebaseDependencies));const n=yield t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()})).apply(this,arguments)}function ZZ(t,e){return cE.apply(this,arguments)}function cE(){return(cE=T(function*(t,e){try{const n=yield qZ(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield YI(t.firebaseDependencies,r),n}catch(n){throw yield GN(t),n}})).apply(this,arguments)}function qN(t,e){return lE.apply(this,arguments)}function lE(){return(lE=T(function*(t,e){const r={token:yield GZ(t,e),createTime:Date.now(),subscriptionOptions:e};return yield YI(t,r),r.token})).apply(this,arguments)}function QZ(t,e){return dE.apply(this,arguments)}function dE(){return(dE=T(function*(t,e){return(yield t.pushManager.getSubscription())||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:FZ(e)})})).apply(this,arguments)}function YZ(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}function WN(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function JZ(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i)}(e,t),function XZ(t,e){!e.data||(t.data=e.data)}(e,t),function e9(t,e){var n,r,i,s,o;if(!(e.fcmOptions||null!==(n=e.notification)&&void 0!==n&&n.click_action))return;t.fcmOptions={};const u=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;u&&(t.fcmOptions.link=u);const c=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}(e,t),e}function t9(t){return"object"==typeof t&&!!t&&UN in t}function KN(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function hE(t){return _n.create("missing-app-config-values",{valueName:t})}KN("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),KN("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class r9{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function n9(t){if(!t||!t.options)throw hE("App Configuration Object");if(!t.name)throw hE("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw hE(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}function ZN(t){return fE.apply(this,arguments)}function fE(){return(fE=T(function*(t){var e;try{t.swRegistration=yield navigator.serviceWorker.register(kZ,{scope:PZ}),t.swRegistration.update().catch(()=>{})}catch(n){throw _n.create("failed-service-worker-registration",{browserErrorMessage:null===(e=n)||void 0===e?void 0:e.message})}})).apply(this,arguments)}function i9(t,e){return pE.apply(this,arguments)}function pE(){return(pE=T(function*(t,e){if(!e&&!t.swRegistration&&(yield ZN(t)),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw _n.create("invalid-sw-registration");t.swRegistration=e}})).apply(this,arguments)}function s9(t,e){return gE.apply(this,arguments)}function gE(){return(gE=T(function*(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=BN)})).apply(this,arguments)}function mE(){return(mE=T(function*(t,e){if(!navigator)throw _n.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw _n.create("permission-blocked");return yield s9(t,e?.vapidKey),yield i9(t,e?.serviceWorkerRegistration),KZ(t)})).apply(this,arguments)}function o9(t,e,n){return _E.apply(this,arguments)}function _E(){return(_E=T(function*(t,e,n){const r=a9(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[UN],message_name:n[NZ],message_time:n[OZ],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function a9(t){switch(t){case Wu.NOTIFICATION_CLICKED:return"notification_open";case Wu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function yE(){return(yE=T(function*(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Wu.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(WN(n)):t.onMessageHandler.next(WN(n)));const r=n.data;t9(r)&&"1"===r[LZ]&&(yield o9(t,n.messageType,r))})).apply(this,arguments)}const YN="@firebase/messaging",c9=t=>{const e=new r9(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function u9(t,e){return yE.apply(this,arguments)}(e,n)),e},l9=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>function QN(t,e){return mE.apply(this,arguments)}(e,r)}};function XN(){return vE.apply(this,arguments)}function vE(){return(vE=T(function*(){try{yield td()}catch{return!1}return typeof window<"u"&&zo()&&Gw()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function d9(){qn(new Rn("messaging",c9,"PUBLIC")),qn(new Rn("messaging-internal",l9,"PRIVATE")),xt(YN,"0.9.14"),xt(YN,"0.9.14","esm2017")}();const ng="analytics",p9="firebase_id",_9="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",eO="https://www.googletagmanager.com/gtag/js",yn=new Hu("@firebase/analytics");function tO(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function y9(t,e){const n=document.createElement("script");n.src=`${eO}?l=${t}&id=${e}`,n.async=!0,document.head.appendChild(n)}function w9(t,e,n,r,i,s){return EE.apply(this,arguments)}function EE(){return(EE=T(function*(t,e,n,r,i,s){const o=r[i];try{if(o)yield e[o];else{const c=(yield tO(n)).find(d=>d.measurementId===i);c&&(yield e[c.appId])}}catch(u){yn.error(u)}t("config",i,s)})).apply(this,arguments)}function I9(t,e,n,r,i){return TE.apply(this,arguments)}function TE(){return(TE=T(function*(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const u=yield tO(n);for(const c of o){const d=u.find(p=>p.measurementId===c),f=d&&e[d.appId];if(!f){s=[];break}s.push(f)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){yn.error(s)}})).apply(this,arguments)}function b9(){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(eO))return e;return null}const Dr=new Ai("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),nO=new class A9{constructor(e={},n=1e3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function x9(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function M9(t){return bE.apply(this,arguments)}function bE(){return(bE=T(function*(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:x9(r)},s=_9.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let u="";try{const c=yield o.json();null!==(e=c.error)&&void 0!==e&&e.message&&(u=c.error.message)}catch{}throw Dr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:u})}return o.json()})).apply(this,arguments)}function k9(t){return DE.apply(this,arguments)}function DE(){return(DE=T(function*(t,e=nO,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Dr.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Dr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new N9;return setTimeout(T(function*(){u.abort()}),void 0!==n?n:6e4),rO({appId:r,apiKey:i,measurementId:s},o,u,e)})).apply(this,arguments)}function rO(t,e,n){return CE.apply(this,arguments)}function CE(){return(CE=T(function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=nO){const{appId:s,measurementId:o}=t;try{yield P9(r,e)}catch(u){if(o)return yn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u.message}]`),{appId:s,measurementId:o};throw u}try{const u=yield M9(t);return i.deleteThrottleMetadata(s),u}catch(u){if(!R9(u)){if(i.deleteThrottleMetadata(s),o)return yn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u.message}]`),{appId:s,measurementId:o};throw u}const c=503===Number(u.customData.httpStatus)?Zw(n,i.intervalMillis,30):Zw(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return i.setThrottleMetadata(s,d),yn.debug(`Calling attemptFetch again in ${c} millis`),rO(t,d,r,i)}})).apply(this,arguments)}function P9(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Dr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function R9(t){if(!(t instanceof is&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}class N9{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}function O9(){return SE.apply(this,arguments)}function SE(){return(SE=T(function*(){if(!zo())return yn.warn(Dr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield td()}catch(t){return yn.warn(Dr.create("indexeddb-unavailable",{errorInfo:t}).message),!1}return!0})).apply(this,arguments)}function AE(){return(AE=T(function*(t,e,n,r,i,s,o){var u;const c=k9(t);c.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&yn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>yn.error(y)),e.push(c);const d=O9().then(y=>{if(y)return r.getId()}),[f,p]=yield Promise.all([c,d]);b9()||y9(s,f.measurementId),i("js",new Date);const _=null!==(u=o?.config)&&void 0!==u?u:{};return _.origin="firebase",_.update=!0,null!=p&&(_[p9]=p),i("config",f.measurementId,_),f.measurementId})).apply(this,arguments)}class F9{constructor(e){this.app=e}_delete(){return delete us[this.app.options.appId],Promise.resolve()}}let us={},iO=[];const sO={};let aO,id,rg="dataLayer",xE=!1;function B9(t,e,n){!function V9(){const t=[];if(Wp()&&t.push("This is a browser extension environment."),Gw()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Dr.create("invalid-analytics-context",{errorInfo:e});yn.warn(n.message)}}();const r=t.options.appId;if(!r)throw Dr.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Dr.create("no-api-key");yn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=us[r])throw Dr.create("already-exists",{id:r});if(!xE){!function v9(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(rg);const{wrappedGtag:s,gtagCore:o}=function T9(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function E9(t,e,n,r){function s(){return(s=T(function*(o,u,c){try{"event"===o?yield I9(t,e,n,u,c):"config"===o?yield w9(t,e,n,r,u,c):t("set",u)}catch(d){yn.error(d)}})).apply(this,arguments)}return function i(o,u,c){return s.apply(this,arguments)}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}(us,iO,sO,rg,"gtag");id=s,aO=o,xE=!0}return us[r]=function L9(t,e,n,r,i,s,o){return AE.apply(this,arguments)}(t,iO,sO,e,aO,rg,n),new F9(t)}function ME(){return(ME=T(function*(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const s=yield e;t("event",n,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function q9(){return OE.apply(this,arguments)}function OE(){return(OE=T(function*(){if(Wp()||!Gw()||!zo())return!1;try{return yield td()}catch{return!1}})).apply(this,arguments)}const uO="@firebase/analytics";!function K9(){qn(new Rn(ng,(e,{options:n})=>B9(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),qn(new Rn("analytics-internal",function t(e){try{const n=e.getProvider(ng).getImmediate();return{logEvent:(r,i,s)=>function W9(t,e,n,r){t=$r(t),function U9(t,e,n,r,i){return ME.apply(this,arguments)}(id,us[t.app.options.appId],e,n,r).catch(i=>yn.error(i))}(n,r,i,s)}}catch(n){throw Dr.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),xt(uO,"0.7.10"),xt(uO,"0.7.10","esm2017")}();class Z9 extends Dn{constructor(e,n){super()}schedule(e,n=0){return this}}const ig={setInterval(t,e,...n){const{delegate:r}=ig;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=ig;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class lO extends Z9{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(i,this.id,n),this}requestAsyncId(e,n,r=0){return ig.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;ig.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,$e(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const dO={now:()=>(dO.delegate||Date).now(),delegate:void 0};class sd{constructor(e,n=sd.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}sd.now=dO.now;class hO extends sd{constructor(e,n=sd.now){super(e,n),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const J9=new class Y9 extends hO{}(class Q9 extends lO{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):e.flush(this)}}),X9=new hO(lO),LE=new xl("7.4.1"),FE="__angularfire_symbol__analyticsIsSupportedValue",VE="__angularfire_symbol__analyticsIsSupported",BE="__angularfire_symbol__remoteConfigIsSupportedValue",UE="__angularfire_symbol__remoteConfigIsSupported",jE="__angularfire_symbol__messagingIsSupportedValue",$E="__angularfire_symbol__messagingIsSupported";globalThis[VE]||(globalThis[VE]=q9().then(t=>globalThis[FE]=t).catch(()=>globalThis[FE]=!1)),globalThis[$E]||(globalThis[$E]=XN().then(t=>globalThis[jE]=t).catch(()=>globalThis[jE]=!1)),globalThis[UE]||(globalThis[UE]=MZ().then(t=>globalThis[BE]=t).catch(()=>globalThis[BE]=!1));const GE=(t,e)=>{const n=e?[e]:hN(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function Ku(){}class fO{constructor(e,n=J9){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class eQ{constructor(e){this.zone=e,this.task=null}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ku,{},Ku,Ku)),n.pipe(gn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let pO=(()=>{class t{constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new fO(Zone.current)),this.insideAngular=n.run(()=>new fO(Zone.current,X9)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t.\u0275fac=function(n){return new(n||t)(Q(mt))},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Qo(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function tQ(t){return Qo().ngZone.runOutsideAngular(()=>t())}function Yo(t){return Qo().ngZone.run(()=>t())}function nQ(t){return Qo(),function rQ(t){return function(n){return(n=n.lift(new eQ(t.ngZone))).pipe(Va(t.outsideAngular),Vi(t.insideAngular))}}(Qo())(t)}const iQ=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Yo(()=>t.apply(void 0,r))},Zs=(t,e)=>function(){let n;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(n||(n=Yo(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ku,{},Ku,Ku)))),r[s]=iQ(r[s],n));const i=tQ(()=>t.apply(this,r));if(!e){if(i instanceof Xe){const s=Qo();return i.pipe(Va(s.outsideAngular),Vi(s.insideAngular))}return Yo(()=>i)}return i instanceof Xe?i.pipe(nQ):i instanceof Promise?Yo(()=>new Promise((s,o)=>i.then(u=>Yo(()=>s(u)),u=>Yo(()=>o(u))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:Yo(()=>i)};class Zu{constructor(e){return e}}class gO{constructor(){return hN()}}const qE=new me("angularfire2._apps"),oQ={provide:Zu,useFactory:function sQ(t){return t&&1===t.length?t[0]:new Zu(dN())},deps:[[new Gt,qE]]},aQ={provide:gO,deps:[[new Gt,qE]]};function uQ(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Zu(r)}}let cQ=(()=>{class t{constructor(n){xt("angularfire",LE.full,"core"),xt("angularfire",LE.full,"app"),xt("angular",zk.full,n.toString())}}return t.\u0275fac=function(n){return new(n||t)(Q(cp))},t.\u0275mod=Kr({type:t}),t.\u0275inj=Xt({providers:[oQ,aQ]}),t})();function lQ(t,...e){return{ngModule:cQ,providers:[{provide:qE,useFactory:uQ(t),multi:!0,deps:[mt,$n,pO,...e]}]}}const dQ=Zs(a7,!0);const hQ=function mO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},_O=new Ai("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),yO=new Hu("@firebase/auth");function sg(t,...e){yO.logLevel<=Ne.ERROR&&yO.error(`Auth (9.8.3): ${t}`,...e)}function sr(t,...e){throw WE(t,...e)}function xi(t,...e){return WE(t,...e)}function vO(t,e,n){const r=Object.assign(Object.assign({},hQ()),{[e]:n});return new Ai("auth","Firebase",r).create(e,{appName:t.name})}function WE(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return _O.create(t,...e)}function B(t,e,...n){if(!t)throw WE(e,...n)}function Mi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw sg(e),new Error(e)}function Qs(t,e){t||Mi(e)}const wO=new Map;function cs(t){Qs(t instanceof Function,"Expected a class definition");let e=wO.get(t);return e?(Qs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,wO.set(t,e),e)}function IO(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class ad{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qs(n>e,"Short delay should be less than long delay!"),this.isMobile=X1()||eN()}get(){return function gQ(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function KE(){return"http:"===IO()||"https:"===IO()}()||Wp()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class EO{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Mi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Mi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Mi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _Q={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},yQ=new ad(3e4,6e4);function nn(t,e,n,r){return QE.apply(this,arguments)}function QE(){return(QE=T(function*(t,e,n,r,i={}){return TO(t,i,T(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const u=rN(Object.assign({key:t.config.apiKey},o)).slice(1),c=yield t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),EO.fetch()(bO(t,t.config.apiHost,n,u),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function TO(t,e,n){return YE.apply(this,arguments)}function YE(){return(YE=T(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},_Q),e);try{const i=new vQ(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw ud(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const u=s.ok?o.errorMessage:o.error.message,[c,d]=u.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw ud(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===c)throw ud(t,"email-already-in-use",o);if("USER_DISABLED"===c)throw ud(t,"user-disabled",o);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw vO(t,f,d);sr(t,f)}}catch(i){if(i instanceof is)throw i;sr(t,"network-request-failed")}})).apply(this,arguments)}function bO(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?function ZE(t,e){Qs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}(t.config,i):`${t.config.apiScheme}://${i}`}class vQ{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(xi(this.auth,"network-request-failed")),yQ.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ud(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=xi(t,e,r);return i.customData._tokenResponse=n,i}function XE(){return(XE=T(function*(t,e){return nn(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function EQ(t,e){return tT.apply(this,arguments)}function tT(){return(tT=T(function*(t,e){return nn(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function cd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function nT(){return(nT=T(function*(t,e=!1){const n=$r(t),r=yield n.getIdToken(e),i=og(r);B(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:cd(rT(i.auth_time)),issuedAtTime:cd(rT(i.iat)),expirationTime:cd(rT(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function rT(t){return 1e3*Number(t)}function og(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return sg("JWT malformed, contained fewer than 3 sections"),null;try{const i=function(t){try{return $w.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(n);return i?JSON.parse(i):(sg("Failed to decode base64 JWT payload"),null)}catch(i){return sg("Caught error parsing JWT payload as JSON",i),null}}function ds(t,e){return iT.apply(this,arguments)}function iT(){return(iT=T(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof is&&DQ(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}function DQ({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}class CQ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(T(function*(){yield n.iteration()}),r)}iteration(){var e=this;return T(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n.code&&e.schedule(!0))}e.schedule()})()}}class DO{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cd(this.lastLoginAt),this.creationTime=cd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ld(t){return sT.apply(this,arguments)}function sT(){return(sT=T(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield ds(t,EQ(n,{idToken:r}));B(i?.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?xQ(s.providerUserInfo):[],u=AQ(t.providerData,o),f=!!t.isAnonymous&&!(t.email&&s.passwordHash||u?.length),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new DO(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,p)})).apply(this,arguments)}function oT(){return(oT=T(function*(t){const e=$r(t);yield ld(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function AQ(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function xQ(t){return t.map(e=>{var{providerId:n}=e,r=bh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function aT(){return(aT=T(function*(t,e){const n=yield TO(t,{},T(function*(){const r=rN({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=bO(t,i,"/v1/token",`key=${s}`),u=yield t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",EO.fetch()(o,{method:"POST",headers:u,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class dd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){B(e.idToken,"internal-error"),B(typeof e.idToken<"u","internal-error"),B(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function bQ(t){const e=og(t);return B(e,"internal-error"),B(typeof e.exp<"u","internal-error"),B(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){var r=this;return T(function*(){return B(!r.accessToken||r.refreshToken,e,"user-token-expired"),n||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return T(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function MQ(t,e){return aT.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new dd;return r&&(B("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(B("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(B("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dd,this.toJSON())}_performRefresh(){return Mi("not implemented")}}function Ys(t,e){B("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class Jo{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=bh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new CQ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new DO(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var n=this;return T(function*(){const r=yield ds(n,n.stsTokenManager.getToken(n.auth,e));return B(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function TQ(t){return nT.apply(this,arguments)}(this,e)}reload(){return function SQ(t){return oT.apply(this,arguments)}(this)}_assign(e){this!==e&&(B(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Jo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var r=this;return T(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield ld(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return T(function*(){const n=yield e.getIdToken();return yield ds(e,function wQ(t,e){return XE.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,u,c,d,f;const p=null!==(r=n.displayName)&&void 0!==r?r:void 0,_=null!==(i=n.email)&&void 0!==i?i:void 0,y=null!==(s=n.phoneNumber)&&void 0!==s?s:void 0,w=null!==(o=n.photoURL)&&void 0!==o?o:void 0,E=null!==(u=n.tenantId)&&void 0!==u?u:void 0,b=null!==(c=n._redirectEventId)&&void 0!==c?c:void 0,M=null!==(d=n.createdAt)&&void 0!==d?d:void 0,P=null!==(f=n.lastLoginAt)&&void 0!==f?f:void 0,{uid:S,emailVerified:F,isAnonymous:H,providerData:ee,stsTokenManager:lt}=n;B(S&&lt,e,"internal-error");const ui=dd.fromJSON(this.name,lt);B("string"==typeof S,e,"internal-error"),Ys(p,e.name),Ys(_,e.name),B("boolean"==typeof F,e,"internal-error"),B("boolean"==typeof H,e,"internal-error"),Ys(y,e.name),Ys(w,e.name),Ys(E,e.name),Ys(b,e.name),Ys(M,e.name),Ys(P,e.name);const Aa=new Jo({uid:S,auth:e,email:_,emailVerified:F,displayName:p,isAnonymous:H,photoURL:w,phoneNumber:y,tenantId:E,stsTokenManager:ui,createdAt:M,lastLoginAt:P});return ee&&Array.isArray(ee)&&(Aa.providerData=ee.map(yh=>Object.assign({},yh))),b&&(Aa._redirectEventId=b),Aa}static _fromIdTokenResponse(e,n,r=!1){return T(function*(){const i=new dd;i.updateFromServerResponse(n);const s=new Jo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ld(s),s})()}}const CO=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return T(function*(){return!0})()}_set(n,r){var i=this;return T(function*(){i.storage[n]=r})()}_get(n){var r=this;return T(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return T(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function ag(t,e,n){return`firebase:${t}:${e}:${n}`}class Yu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ag(this.userKey,i.apiKey,s),this.fullPersistenceKey=ag("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return T(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?Jo._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return T(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return T(function*(){if(!n.length)return new Yu(cs(CO),e,r);const i=(yield Promise.all(n.map(function(){var d=T(function*(f){if(yield f._isAvailable())return f});return function(f){return d.apply(this,arguments)}}()))).filter(d=>d);let s=i[0]||cs(CO);const o=ag(r,e.config.apiKey,e.name);let u=null;for(const d of n)try{const f=yield d._get(o);if(f){const p=Jo._fromJSON(e,f);d!==s&&(u=p),s=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return s._shouldAllowMigration&&c.length?(s=c[0],u&&(yield s._set(o,u.toJSON())),yield Promise.all(n.map(function(){var d=T(function*(f){if(f!==s)try{yield f._remove(o)}catch{}});return function(f){return d.apply(this,arguments)}}())),new Yu(s,e,r)):new Yu(s,e,r)})()}}function SO(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function MO(t=br()){return/iemobile/i.test(t)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function AO(t=br()){return/firefox\//i.test(t)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function PO(t=br()){return/blackberry/i.test(t)}(e))return"Blackberry";if(function RO(t=br()){return/webos/i.test(t)}(e))return"Webos";if(function uT(t=br()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function xO(t=br()){return/crios\//i.test(t)}(e))&&!e.includes("edge/"))return"Chrome";if(function kO(t=br()){return/android/i.test(t)}(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function NO(t,e=[]){let n;switch(t){case"Browser":n=SO(br());break;case"Worker":n=`${SO(br())}-${t}`;break;default:n=t}return`${n}/JsCore/9.8.3/${e.length?e.join(","):"FirebaseCore-web"}`}class RQ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,u)=>{try{o(e(s))}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return T(function*(){var r;if(n.auth.currentUser===e)return;const i=[];try{for(const s of n.queue)yield s(e),s.onAbort&&i.push(s.onAbort)}catch(s){i.reverse();for(const o of i)try{o()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:null===(r=s)||void 0===r?void 0:r.message})}})()}}class NQ{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new OO(this),this.idTokenSubscription=new OO(this),this.beforeStateQueue=new RQ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_O,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=cs(n)),this._initializationPromise=this.queue(T(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield Yu.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return T(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUser(e){var n=this;return T(function*(){var r;const i=yield n.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const u=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,c=s?._redirectEventId,d=yield n.tryRedirectSignIn(e);(!u||u===c)&&d?.user&&(s=d.user,o=!0)}if(!s)return n.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield n.beforeStateQueue.runMiddleware(s)}catch(u){s=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(u))}return s?n.reloadAndSetCurrentUserOrClear(s):n.directlySetCurrentUser(null)}return B(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===s._redirectEventId?n.directlySetCurrentUser(s):n.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var n=this;return T(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return T(function*(){try{yield ld(e)}catch(r){if("auth/network-request-failed"!==r.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function mQ(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return T(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return T(function*(){const r=e?$r(e):null;return r&&B(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e,n=!1){var r=this;return T(function*(){if(!r._deleted)return e&&B(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),n||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(T(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return T(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var n=this;return this.queue(T(function*(){yield n.assertedPersistence.setPersistence(cs(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ai("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return T(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return T(function*(){if(!n.redirectPersistenceManager){const r=e&&cs(e)||n._popupRedirectResolver;B(r,n,"argument-error"),n.redirectPersistenceManager=yield Yu.create(n,[cs(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return T(function*(){var r,i;return n._isInitialized&&(yield n.queue(T(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return T(function*(){if(e===n.currentUser)return n.queue(T(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s="function"==typeof n?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return B(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof n?e.addObserver(n,r,i):e.addObserver(n)}directlySetCurrentUser(e){var n=this;return T(function*(){n.currentUser&&n.currentUser!==e&&(n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh()),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return T(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}class OO{constructor(e){this.auth=e,this.observer=null,this.addObserver=function s5(t,e){const n=new o5(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}(function eL(t){return`__${t}${Math.floor(1e6*Math.random())}`})("rcb"),new ad(3e4,6e4),new ad(2e3,1e4),new ad(3e4,6e4),new ad(5e3,15e3);var hL="@firebase/auth";class TJ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return T(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{var i;e((null===(i=r)||void 0===i?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function DJ(t){qn(new Rn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((u,c)=>{B(s&&!s.includes(":"),"invalid-api-key",{appName:u.name}),B(!o?.includes(":"),"argument-error",{appName:u.name});const d={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NO(t)},f=new NQ(u,c,d);return function pQ(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(cs);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(f,n),f})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qn(new Rn("auth-internal",e=>{const n=function or(t){return $r(t)}(e.getProvider("auth").getImmediate());return new TJ(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xt(hL,"0.20.3",function bJ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(t)),xt(hL,"0.20.3","esm2017")}("Browser");class gL{constructor(){return GE("auth")}}const mL=new Map,xJ={activated:!1,tokenObservers:[]},MJ={initialized:!1,enabled:!1};function rn(t){return mL.get(t)||xJ}function oi(t,e){mL.set(t,e)}function vg(){return MJ}class OJ{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return T(function*(){n.stop();try{n.pending=new Hw,yield function LJ(t){return new Promise(e=>{setTimeout(e,t)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new Hw,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const Wn=new Ai("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function yL(t){if(!rn(t).activated)throw Wn.create("use-before-activation",{appName:t.name})}function qb(t,e){return Wb.apply(this,arguments)}function Wb(){return(Wb=T(function*({url:t,body:e},n){var r,i;const s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){const y=yield o.getHeartbeatsHeader();y&&(s["X-Firebase-Client"]=y)}const u={method:"POST",body:JSON.stringify(e),headers:s};let c,d;try{c=yield fetch(t,u)}catch(y){throw Wn.create("fetch-network-error",{originalErrorMessage:null===(r=y)||void 0===r?void 0:r.message})}if(200!==c.status)throw Wn.create("fetch-status-error",{httpStatus:c.status});try{d=yield c.json()}catch(y){throw Wn.create("fetch-parse-error",{originalErrorMessage:null===(i=y)||void 0===i?void 0:i.message})}const f=d.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw Wn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const p=1e3*Number(f[1]),_=Date.now();return{token:d.token,expireTimeMillis:_+p,issuedAtTimeMillis:_}})).apply(this,arguments)}function jJ(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${n}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const md="firebase-app-check-store";let Eg=null;function wL(){return Eg||(Eg=new Promise((t,e)=>{var n;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{t(i.target.result)},r.onerror=i=>{var s;e(Wn.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(md,{keyPath:"compositeKey"})}}catch(r){e(Wn.create("storage-open",{originalErrorMessage:null===(n=r)||void 0===n?void 0:n.message}))}}),Eg)}function Kb(){return(Kb=T(function*(t,e){const r=(yield wL()).transaction(md,"readwrite"),s=r.objectStore(md).put({compositeKey:t,value:e});return new Promise((o,u)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var d;u(Wn.create("storage-set",{originalErrorMessage:null===(d=c.target.error)||void 0===d?void 0:d.message}))}})})).apply(this,arguments)}const _d=new Hu("@firebase/app-check");function bL(t,e){return zo()?function GJ(t,e){return function IL(t,e){return Kb.apply(this,arguments)}(function TL(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(n=>{_d.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function DL(){return vg().enabled}function CL(){return Jb.apply(this,arguments)}function Jb(){return(Jb=T(function*(){const t=vg();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const YJ={error:"UNKNOWN_ERROR"};function JJ(t){return $w.encodeString(JSON.stringify(t),!1)}function Tg(t){return Xb.apply(this,arguments)}function Xb(){return(Xb=T(function*(t,e=!1){const n=t.app;yL(n);const r=rn(n);let s,i=r.token;if(!i){const c=yield r.cachedTokenPromise;c&&bg(c)&&(i=c)}if(!e&&i&&bg(i))return{token:i.token};let u,o=!1;if(DL()){r.exchangeTokenPromise||(r.exchangeTokenPromise=qb(jJ(n,yield CL()),t.heartbeatServiceProvider).then(d=>(r.exchangeTokenPromise=void 0,d)),o=!0);const c=yield r.exchangeTokenPromise;return yield bL(n,c),oi(n,Object.assign(Object.assign({},r),{token:c})),{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(c=>(r.exchangeTokenPromise=void 0,c)),o=!0),i=yield r.exchangeTokenPromise}catch(c){"appCheck/throttled"===c.code?_d.warn(c.message):_d.error(c),s=c}return i?(u={token:i.token},oi(n,Object.assign(Object.assign({},r),{token:i})),yield bL(n,i)):u=eX(s),o&&AL(n,u),u})).apply(this,arguments)}function tD(t,e){const n=rn(t),r=n.tokenObservers.filter(i=>i.next!==e);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),oi(t,Object.assign(Object.assign({},n),{tokenObservers:r}))}function SL(t){const{app:e}=t,n=rn(e);let r=n.tokenRefresher;r||(r=function XJ(t){const{app:e}=t;return new OJ(T(function*(){let r;if(r=rn(e).token?yield Tg(t,!0):yield Tg(t),r.error)throw r.error}),()=>!0,()=>{const n=rn(e);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(t),oi(e,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function AL(t,e){const n=rn(t).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function bg(t){return t.expireTimeMillis-Date.now()>0}function eX(t){return{token:JJ(YJ),error:t}}class tX{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=rn(this.app);for(const n of e)tD(this.app,n.next);return Promise.resolve()}}const LL="app-check-internal";!function gX(){qn(new Rn("app-check",t=>function nX(t,e){return new tX(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(LL).initialize()})),qn(new Rn(LL,t=>function rX(t){return{getToken:e=>Tg(t,e),addTokenListener:e=>function eD(t,e,n,r){const{app:i}=t,s=rn(i),o={next:n,error:r,type:e};if(oi(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&bg(s.token)){const u=s.token;Promise.resolve().then(()=>{n({token:u.token}),SL(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>SL(t))}(t,"INTERNAL",e),removeTokenListener:e=>tD(t.app,e)}}(t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),xt("@firebase/app-check","0.5.9")}();class VL{constructor(){return GE("app-check")}}typeof window<"u"&&window;var G,wX=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fs={},oD=oD||{},le=wX||self;function Cg(){}function aD(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function yd(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var uD="closure_uid_"+(1e9*Math.random()>>>0),EX=0;function TX(t,e,n){return t.call.apply(t.bind,arguments)}function bX(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function vn(t,e,n){return(vn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?TX:bX).apply(null,arguments)}function Sg(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function wn(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,i,s){for(var o=Array(arguments.length-2),u=2;u<arguments.length;u++)o[u-2]=arguments[u];return e.prototype[i].apply(r,o)}}function Js(){this.s=this.s,this.o=this.o}var CX={};Js.prototype.s=!1,Js.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function IX(t){return Object.prototype.hasOwnProperty.call(t,uD)&&t[uD]||(t[uD]=++EX)}(this);delete CX[t]}},Js.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const BL=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},UL=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,i="string"==typeof t?t.split(""):t;for(let s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function jL(t){return Array.prototype.concat.apply([],arguments)}function cD(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ag(t){return/^[\s\xa0]*$/.test(t)}var Zn,$L=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Kn(t,e){return-1!=t.indexOf(e)}function lD(t,e){return t<e?-1:t>e?1:0}e:{var zL=le.navigator;if(zL){var HL=zL.userAgent;if(HL){Zn=HL;break e}}Zn=""}function dD(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function GL(t){const e={};for(const n in t)e[n]=t[n];return e}var qL="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function WL(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<qL.length;s++)n=qL[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function hD(t){return hD[" "](t),t}hD[" "]=Cg;var xg,t,xX=Kn(Zn,"Opera"),Ju=Kn(Zn,"Trident")||Kn(Zn,"MSIE"),KL=Kn(Zn,"Edge"),fD=KL||Ju,ZL=Kn(Zn,"Gecko")&&!(Kn(Zn.toLowerCase(),"webkit")&&!Kn(Zn,"Edge"))&&!(Kn(Zn,"Trident")||Kn(Zn,"MSIE"))&&!Kn(Zn,"Edge"),MX=Kn(Zn.toLowerCase(),"webkit")&&!Kn(Zn,"Edge");function QL(){var t=le.document;return t?t.documentMode:void 0}e:{var pD="",gD=(t=Zn,ZL?/rv:([^\);]+)(\)|;)/.exec(t):KL?/Edge\/([\d\.]+)/.exec(t):Ju?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):MX?/WebKit\/(\S+)/.exec(t):xX?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(gD&&(pD=gD?gD[1]:""),Ju){var mD=QL();if(null!=mD&&mD>parseFloat(pD)){xg=String(mD);break e}}xg=pD}var kX={};var RX=le.document&&Ju&&(QL()||parseInt(xg,10))||void 0,NX=function(){if(!le.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{le.addEventListener("test",Cg,e),le.removeEventListener("test",Cg,e)}catch{}return t}();function Nn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function vd(t,e){if(Nn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(ZL){e:{try{hD(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:OX[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&vd.Z.h.call(this)}}Nn.prototype.h=function(){this.defaultPrevented=!0},wn(vd,Nn);var OX={2:"touch",3:"pen",4:"mouse"};vd.prototype.h=function(){vd.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var wd="closure_listenable_"+(1e6*Math.random()|0),LX=0;function FX(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++LX,this.ca=this.fa=!1}function Mg(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function kg(t){this.src=t,this.g={},this.h=0}function yD(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=BL(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Mg(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function vD(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}kg.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=vD(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new FX(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var wD="closure_lm_"+(1e6*Math.random()|0),ID={};function JL(t,e,n,r,i){if(r&&r.once)return eF(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)JL(t,e[s],n,r,i);return null}return n=DD(n),t&&t[wd]?t.N(e,n,yd(r)?!!r.capture:!!r,i):XL(t,e,n,!1,r,i)}function XL(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=yd(i)?!!i.capture:!!i,u=TD(t);if(u||(t[wD]=u=new kg(t)),(n=u.add(e,n,r,o,s)).proxy)return n;if(r=function VX(){var e=BX;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)NX||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(nF(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function eF(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)eF(t,e[s],n,r,i);return null}return n=DD(n),t&&t[wd]?t.O(e,n,yd(r)?!!r.capture:!!r,i):XL(t,e,n,!0,r,i)}function tF(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)tF(t,e[s],n,r,i);else r=yd(r)?!!r.capture:!!r,n=DD(n),t&&t[wd]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=vD(s=t.g[e],n,r,i))&&(Mg(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=TD(t))&&(e=t.g[e.toString()],t=-1,e&&(t=vD(e,n,r,i)),(n=-1<t?e[t]:null)&&ED(n))}function ED(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[wd])yD(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(nF(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=TD(e))?(yD(n,t),0==n.h&&(n.src=null,e[wD]=null)):Mg(t)}}}function nF(t){return t in ID?ID[t]:ID[t]="on"+t}function BX(t,e){if(t.ca)t=!0;else{e=new vd(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&ED(t),t=n.call(r,e)}return t}function TD(t){return(t=t[wD])instanceof kg?t:null}var bD="__closure_events_fn_"+(1e9*Math.random()>>>0);function DD(t){return"function"==typeof t?t:(t[bD]||(t[bD]=function(e){return t.handleEvent(e)}),t[bD])}function sn(){Js.call(this),this.i=new kg(this),this.P=this,this.I=null}function In(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Nn(e,t);else if(e instanceof Nn)e.target=e.target||t;else{var i=e;WL(e=new Nn(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Pg(o,r,!0,e)&&i}if(i=Pg(o=e.g=t,r,!0,e)&&i,i=Pg(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Pg(o=e.g=n[s],r,!1,e)&&i}function Pg(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var u=o.listener,c=o.ia||o.src;o.fa&&yD(t.i,o),i=!1!==u.call(c,r)&&i}}return i&&!r.defaultPrevented}wn(sn,Js),sn.prototype[wd]=!0,sn.prototype.removeEventListener=function(t,e,n,r){tF(this,t,e,n,r)},sn.prototype.M=function(){if(sn.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Mg(n[r]);delete t.g[e],t.h--}}this.I=null},sn.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},sn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var CD=le.JSON.stringify;function UX(){var t=iF;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var AD,rF=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new $X,t=>t.reset());class $X{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function zX(t){le.setTimeout(()=>{throw t},0)}function SD(t,e){AD||function HX(){var t=le.Promise.resolve(void 0);AD=function(){t.then(GX)}}(),xD||(AD(),xD=!0),iF.add(t,e)}var xD=!1,iF=new class jX{constructor(){this.h=this.g=null}add(e,n){const r=rF.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}};function GX(){for(var t;t=UX();){try{t.h.call(t.g)}catch(n){zX(n)}var e=rF;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}xD=!1}function Rg(t,e){sn.call(this),this.h=t||1,this.g=e||le,this.j=vn(this.kb,this),this.l=Date.now()}function MD(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function kD(t,e,n){if("function"==typeof t)n&&(t=vn(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=vn(t.handleEvent,t)}return 2147483647<Number(e)?-1:le.setTimeout(t,e||0)}function sF(t){t.g=kD(()=>{t.g=null,t.i&&(t.i=!1,sF(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}wn(Rg,sn),(G=Rg.prototype).da=!1,G.S=null,G.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),In(this,"tick"),this.da&&(MD(this),this.start()))}},G.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},G.M=function(){Rg.Z.M.call(this),MD(this),delete this.g};class qX extends Js{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:sF(this)}M(){super.M(),this.g&&(le.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Id(t){Js.call(this),this.h=t,this.g={}}wn(Id,Js);var oF=[];function aF(t,e,n,r){Array.isArray(n)||(n&&(oF[0]=n.toString()),n=oF);for(var i=0;i<n.length;i++){var s=JL(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function uF(t){dD(t.g,function(e,n){this.g.hasOwnProperty(n)&&ED(e)},t),t.g={}}function Ng(){this.g=!0}function Xu(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function QX(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return CD(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Id.prototype.M=function(){Id.Z.M.call(this),uF(this)},Id.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ng.prototype.Aa=function(){this.g=!1},Ng.prototype.info=function(){};var na={},cF=null;function Og(){return cF=cF||new sn}function lF(t){Nn.call(this,na.Ma,t)}function Ed(t){const e=Og();In(e,new lF(e,t))}function dF(t,e){Nn.call(this,na.STAT_EVENT,t),this.stat=e}function Qn(t){const e=Og();In(e,new dF(e,t))}function hF(t,e){Nn.call(this,na.Na,t),this.size=e}function Td(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return le.setTimeout(function(){t()},e)}na.Ma="serverreachability",wn(lF,Nn),na.STAT_EVENT="statevent",wn(dF,Nn),na.Na="timingevent",wn(hF,Nn);var Lg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},fF={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function PD(){}function gF(){}PD.prototype.h=null;var OD,bd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function RD(){Nn.call(this,"d")}function ND(){Nn.call(this,"c")}function Fg(){}function Dd(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Id(this),this.P=YX,this.W=new Rg(t=fD?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new mF}function mF(){this.i=null,this.g="",this.h=!1}wn(RD,Nn),wn(ND,Nn),wn(Fg,PD),Fg.prototype.g=function(){return new XMLHttpRequest},Fg.prototype.i=function(){return{}},OD=new Fg;var YX=45e3,LD={},Vg={};function FD(t,e,n){t.K=1,t.v=zg(ps(e)),t.s=n,t.U=!0,_F(t,null)}function _F(t,e){t.F=Date.now(),Cd(t),t.A=ps(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),CF(n.h,"t",r),t.C=0,n=t.l.H,t.h=new mF,t.g=ZF(t.l,n?e:null,!t.s),0<t.O&&(t.L=new qX(vn(t.Ia,t,t.g),t.O)),aF(t.V,t.g,"readystatechange",t.gb),e=t.H?GL(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Ed(1),function WX(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",u=s.split("&"),c=0;c<u.length;c++){var d=u[c].split("=");if(1<d.length){var f=d[0];d=d[1];var p=f.split("_");o=2<=p.length&&"type"==p[1]?o+(f+"=")+d+"&":o+(f+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.X,t.s)}function yF(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function vF(t,e,n){let i,r=!0;for(;!t.I&&t.C<n.length;){if(i=JX(t,n),i==Vg){4==e&&(t.o=4,Qn(14),r=!1),Xu(t.j,t.m,null,"[Incomplete Response]");break}if(i==LD){t.o=4,Qn(15),Xu(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Xu(t.j,t.m,i,null),VD(t,i)}yF(t)&&i!=Vg&&i!=LD&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Qn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),ZD(e),e.L=!0,Qn(11))):(Xu(t.j,t.m,n,"[Invalid Chunked Response]"),ra(t),Sd(t))}function JX(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Vg:(n=Number(e.substring(n,r)),isNaN(n)?LD:(r+=1)+n>e.length?Vg:(e=e.substr(r,n),t.C=r+n,e))}function Cd(t){t.Y=Date.now()+t.P,wF(t,t.P)}function wF(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Td(vn(t.eb,t),e)}function Bg(t){t.B&&(le.clearTimeout(t.B),t.B=null)}function Sd(t){0==t.l.G||t.I||GF(t.l,t)}function ra(t){Bg(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,MD(t.W),uF(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function VD(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||jD(n.i,t)))if(n.I=t.N,!t.J&&jD(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break e;Zg(n),Wg(n)}KD(n),Qn(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Td(vn(n.ab,n),6e3));if(1>=xF(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else oa(n,11)}else if((t.J||n.g==t)&&Zg(n),!Ag(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){let d=i[e];if(n.U=d[0],d=d[1],2==n.G)if("c"==d[0]){n.J=d[1],n.la=d[2];const f=d[3];null!=f&&(n.ma=f,n.h.info("VER="+n.ma));const p=d[4];null!=p&&(n.za=p,n.h.info("SVER="+n.za));const _=d[5];null!=_&&"number"==typeof _&&0<_&&(n.K=r=1.5*_,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const y=t.g;if(y){const w=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(w){var s=r.i;!s.g&&(Kn(w,"spdy")||Kn(w,"quic")||Kn(w,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&($D(s,s.h),s.h=null))}if(r.D){const E=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;E&&(r.sa=E,ht(r.F,r.D,E))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=t;if((r=n).oa=KF(r,r.H?r.la:null,r.W),o.J){MF(r.i,o);var u=o,c=r.K;c&&u.setTimeout(c),u.B&&(Bg(u),Cd(u)),r.g=o}else zF(r);0<n.l.length&&Kg(n)}else"stop"!=d[0]&&"close"!=d[0]||oa(n,7);else 3==n.G&&("stop"==d[0]||"close"==d[0]?"stop"==d[0]?oa(n,7):qD(n):"noop"!=d[0]&&n.j&&n.j.wa(d),n.A=0)}Ed(4)}catch{}}function BD(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(aD(t)||"string"==typeof t)UL(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(aD(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function XX(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(aD(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function ec(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ec)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function UD(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];ia(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)ia(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function ia(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(G=Dd.prototype).setTimeout=function(t){this.P=t},G.gb=function(t){t=t.target;const e=this.L;e&&3==gs(t)?e.l():this.Ia(t)},G.Ia=function(t){try{if(t==this.g)e:{const f=gs(this.g);var e=this.g.Da();const p=this.g.ba();if(!(3>f)&&(3!=f||fD||this.g&&(this.h.h||this.g.ga()||VF(this.g)))){this.I||4!=f||7==e||Ed(8==e||0>=p?3:2),Bg(this);var n=this.g.ba();this.N=n;t:if(yF(this)){var r=VF(this.g);t="";var i=r.length,s=4==gs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ra(this),Sd(this);var o="";break t}this.h.i=new le.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function KX(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,f,n),this.i){if(this.$&&!this.J){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ag(u)){var d=u;break t}}d=null}if(!(n=d)){this.i=!1,this.o=3,Qn(12),ra(this),Sd(this);break e}Xu(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,VD(this,n)}this.U?(vF(this,f,o),fD&&this.i&&3==f&&(aF(this.V,this.W,"tick",this.fb),this.W.start())):(Xu(this.j,this.m,o,null),VD(this,o)),4==f&&ra(this),this.i&&!this.I&&(4==f?GF(this.l,this):(this.i=!1,Cd(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Qn(12)):(this.o=0,Qn(13)),ra(this),Sd(this)}}}catch{}},G.fb=function(){if(this.g){var t=gs(this.g),e=this.g.ga();this.C<e.length&&(Bg(this),vF(this,t,e),this.i&&4!=t&&Cd(this))}},G.cancel=function(){this.I=!0,ra(this)},G.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function ZX(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ed(3),Qn(17)),ra(this),this.o=2,Sd(this)):wF(this,this.Y-t)},(G=ec.prototype).R=function(){UD(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},G.T=function(){return UD(this),this.g.concat()},G.get=function(t,e){return ia(this.h,t)?this.h[t]:e},G.set=function(t,e){ia(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},G.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var IF=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function sa(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof sa){this.g=void 0!==e?e:t.g,Ug(this,t.j),this.s=t.s,jg(this,t.i),$g(this,t.m),this.l=t.l,e=t.h;var n=new Md;n.i=e.i,e.g&&(n.g=new ec(e.g),n.h=e.h),EF(this,n),this.o=t.o}else t&&(n=String(t).match(IF))?(this.g=!!e,Ug(this,n[1]||"",!0),this.s=Ad(n[2]||""),jg(this,n[3]||"",!0),$g(this,n[4]),this.l=Ad(n[5]||"",!0),EF(this,n[6]||"",!0),this.o=Ad(n[7]||"")):(this.g=!!e,this.h=new Md(null,this.g))}function ps(t){return new sa(t)}function Ug(t,e,n){t.j=n?Ad(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function jg(t,e,n){t.i=n?Ad(e,!0):e}function $g(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function EF(t,e,n){e instanceof Md?(t.h=e,function uee(t,e){e&&!t.j&&(Xs(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(bF(this,r),CF(this,i,n))},t)),t.j=e}(t.h,t.g)):(n||(e=xd(e,oee)),t.h=new Md(e,t.g))}function ht(t,e,n){t.h.set(e,n)}function zg(t){return ht(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ad(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function xd(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ree),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ree(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}sa.prototype.toString=function(){var t=[],e=this.j;e&&t.push(xd(e,TF,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(xd(e,TF,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(xd(n,"/"==n.charAt(0)?see:iee,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",xd(n,aee)),t.join("")};var TF=/[#\/\?@]/g,iee=/[#\?:]/g,see=/[#\?]/g,oee=/[#\?@]/g,aee=/#/g;function Md(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Xs(t){t.g||(t.g=new ec,t.h=0,t.i&&function eee(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function bF(t,e){Xs(t),e=tc(t,e),ia(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,ia((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&UD(t)))}function DF(t,e){return Xs(t),e=tc(t,e),ia(t.g.h,e)}function CF(t,e,n){bF(t,e),0<n.length&&(t.i=null,t.g.set(tc(t,e),cD(n)),t.h+=n.length)}function tc(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function SF(t){this.l=t||lee,t=le.PerformanceNavigationTiming?0<(t=le.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(le.g&&le.g.Ea&&le.g.Ea()&&le.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(G=Md.prototype).add=function(t,e){Xs(this),this.i=null,t=tc(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},G.forEach=function(t,e){Xs(this),this.g.forEach(function(n,r){UL(n,function(i){t.call(e,i,r,this)},this)},this)},G.T=function(){Xs(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},G.R=function(t){Xs(this);var e=[];if("string"==typeof t)DF(this,t)&&(e=jL(e,this.g.get(tc(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=jL(e,t[n])}return e},G.set=function(t,e){return Xs(this),this.i=null,DF(this,t=tc(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},G.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},G.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};var lee=10;function AF(t){return!!t.h||!!t.g&&t.g.size>=t.j}function xF(t){return t.h?1:t.g?t.g.size:0}function jD(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function $D(t,e){t.g?t.g.add(e):t.h=e}function MF(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function kF(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return cD(t.i)}function zD(){}function dee(){this.g=new zD}function hee(t,e,n){const r=n||"";try{BD(t,function(i,s){let o=i;yd(i)&&(o=CD(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Hg(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function kd(t){this.l=t.$b||null,this.j=t.ib||!1}function Gg(t,e){sn.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=HD,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}SF.prototype.cancel=function(){if(this.i=kF(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},zD.prototype.stringify=function(t){return le.JSON.stringify(t,void 0)},zD.prototype.parse=function(t){return le.JSON.parse(t,void 0)},wn(kd,PD),kd.prototype.g=function(){return new Gg(this.l,this.j)},kd.prototype.i=function(t){return function(){return t}}({}),wn(Gg,sn);var HD=0;function PF(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Pd(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Rd(t)}function Rd(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(G=Gg.prototype).open=function(t,e){if(this.readyState!=HD)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Rd(this)},G.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||le).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},G.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pd(this)),this.readyState=HD},G.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Rd(this)),this.g&&(this.readyState=3,Rd(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof le.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;PF(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},G.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Pd(this):Rd(this),3==this.readyState&&PF(this)}},G.Ua=function(t){this.g&&(this.response=this.responseText=t,Pd(this))},G.Ta=function(t){this.g&&(this.response=t,Pd(this))},G.ha=function(){this.g&&Pd(this)},G.setRequestHeader=function(t,e){this.v.append(t,e)},G.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},G.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Gg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var pee=le.JSON.parse;function Lt(t){sn.call(this),this.headers=new ec,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=RF,this.K=this.L=!1}wn(Lt,sn);var RF="",gee=/^https?$/i,mee=["POST","PUT"];function yee(t){return"content-type"==t.toLowerCase()}function NF(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,OF(t),qg(t)}function OF(t){t.D||(t.D=!0,In(t,"complete"),In(t,"error"))}function LF(t){if(t.h&&typeof oD<"u"&&(!t.C[1]||4!=gs(t)||2!=t.ba()))if(t.v&&4==gs(t))kD(t.Fa,0,t);else if(In(t,"readystatechange"),4==gs(t)){t.h=!1;try{const u=t.ba();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===u){var i=String(t.H).match(IF)[1]||null;if(!i&&le.self&&le.self.location){var s=le.self.location.protocol;i=s.substr(0,s.length-1)}r=!gee.test(i?i.toLowerCase():"")}n=r}if(n)In(t,"complete"),In(t,"success");else{t.m=6;try{var o=2<gs(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.ba()+"]",OF(t)}}finally{qg(t)}}}function qg(t,e){if(t.g){FF(t);const n=t.g,r=t.C[0]?Cg:null;t.g=null,t.C=null,e||In(t,"ready");try{n.onreadystatechange=r}catch{}}}function FF(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(le.clearTimeout(t.A),t.A=null)}function gs(t){return t.g?t.g.readyState:0}function VF(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case RF:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function GD(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function vee(t){let e="";return dD(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ht(t,e,n))}function Nd(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function BF(t){this.za=0,this.l=[],this.h=new Ng,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Nd("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Nd("baseRetryDelayMs",5e3,t),this.$a=Nd("retryDelaySeedMs",1e4,t),this.Ya=Nd("forwardChannelMaxRetries",2,t),this.ra=Nd("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new SF(t&&t.concurrentRequestLimit),this.Ca=new dee,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function qD(t){if(UF(t),3==t.G){var e=t.V++,n=ps(t.F);ht(n,"SID",t.J),ht(n,"RID",e),ht(n,"TYPE","terminate"),Od(t,n),(e=new Dd(t,t.h,e,void 0)).K=2,e.v=zg(ps(n)),n=!1,le.navigator&&le.navigator.sendBeacon&&(n=le.navigator.sendBeacon(e.v.toString(),"")),!n&&le.Image&&((new Image).src=e.v,n=!0),n||(e.g=ZF(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Cd(e)}WF(t)}function Wg(t){t.g&&(ZD(t),t.g.cancel(),t.g=null)}function UF(t){Wg(t),t.u&&(le.clearTimeout(t.u),t.u=null),Zg(t),t.i.cancel(),t.m&&("number"==typeof t.m&&le.clearTimeout(t.m),t.m=null)}function WD(t,e){t.l.push(new class{constructor(t,e){this.h=t,this.g=e}}(t.Za++,e)),3==t.G&&Kg(t)}function Kg(t){AF(t.i)||t.m||(t.m=!0,SD(t.Ha,t),t.C=0)}function jF(t,e){var n;n=e?e.m:t.V++;const r=ps(t.F);ht(r,"SID",t.J),ht(r,"RID",n),ht(r,"AID",t.U),Od(t,r),t.o&&t.s&&GD(r,t.o,t.s),n=new Dd(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=$F(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),$D(t.i,n),FD(n,r,e)}function Od(t,e){t.j&&BD({},function(n,r){ht(e,r,n)})}function $F(t,e,n){n=Math.min(t.l.length,n);var r=t.j?vn(t.j.Oa,t.j,t):null;e:{var i=t.l;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let u=!0;for(let c=0;c<n;c++){let d=i[c].h;const f=i[c].g;if(d-=s,0>d)s=Math.max(0,i[c].h-100),u=!1;else try{hee(f,o,"req"+d+"_")}catch{r&&r(f)}}if(u){r=o.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,r}function zF(t){t.g||t.u||(t.Y=1,SD(t.Ga,t),t.A=0)}function KD(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Td(vn(t.Ga,t),qF(t,t.A)),t.A++,0))}function ZD(t){null!=t.B&&(le.clearTimeout(t.B),t.B=null)}function HF(t){t.g=new Dd(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=ps(t.oa);ht(e,"RID","rpc"),ht(e,"SID",t.J),ht(e,"CI",t.N?"0":"1"),ht(e,"AID",t.U),Od(t,e),ht(e,"TYPE","xmlhttp"),t.o&&t.s&&GD(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=zg(ps(e)),n.s=null,n.U=!0,_F(n,t)}function Zg(t){null!=t.v&&(le.clearTimeout(t.v),t.v=null)}function GF(t,e){var n=null;if(t.g==e){Zg(t),ZD(t),t.g=null;var r=2}else{if(!jD(t.i,e))return;n=e.D,MF(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;In(r=Og(),new hF(r,n,e,i)),Kg(t)}else zF(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function wee(t,e){return!(xF(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Td(vn(t.Ha,t,e),qF(t,t.C)),t.C++,0)))}(t,e)||2==r&&KD(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:oa(t,5);break;case 4:oa(t,10);break;case 3:oa(t,6);break;default:oa(t,2)}}function qF(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function oa(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=vn(t.jb,t);n||(n=new sa("//www.google.com/images/cleardot.gif"),le.location&&"http"==le.location.protocol||Ug(n,"https"),zg(n)),function fee(t,e){const n=new Ng;if(le.Image){const r=new Image;r.onload=Sg(Hg,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Sg(Hg,n,r,"TestLoadImage: error",!1,e),r.onabort=Sg(Hg,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Sg(Hg,n,r,"TestLoadImage: timeout",!1,e),le.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Qn(2);t.G=0,t.j&&t.j.va(e),WF(t),UF(t)}function WF(t){t.G=0,t.I=-1,t.j&&((0!=kF(t.i).length||0!=t.l.length)&&(t.i.i.length=0,cD(t.l),t.l.length=0),t.j.ua())}function KF(t,e,n){let r=function tee(t){return t instanceof sa?ps(t):new sa(t,void 0)}(n);if(""!=r.i)e&&jg(r,e+"."+r.i),$g(r,r.m);else{const i=le.location;r=function nee(t,e,n,r){var i=new sa(null,void 0);return t&&Ug(i,t),e&&jg(i,e),n&&$g(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&dD(t.aa,function(i,s){ht(r,s,i)}),n=t.sa,(e=t.D)&&n&&ht(r,e,n),ht(r,"VER",t.ma),Od(t,r),r}function ZF(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Lt(n&&t.Ba&&!t.qa?new kd({ib:!0}):t.qa)).L=t.H,e}function QF(){}function Qg(){if(Ju&&!(10<=Number(RX)))throw Error("Environmental error: no available transport.")}function Cr(t,e){sn.call(this),this.g=new BF(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ag(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ag(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new nc(this)}function YF(t){RD.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function JF(){ND.call(this),this.status=1}function nc(t){this.g=t}(G=Lt.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():OD.g(),this.C=function pF(t){return t.h||(t.h=t.i())}(this.u?this.u:OD),this.g.onreadystatechange=vn(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){return void NF(this,s)}t=n||"";const i=new ec(this.headers);r&&BD(r,function(s,o){i.set(o,s)}),r=function SX(t){e:{var e=yee;const n=t.length,r="string"==typeof t?t.split(""):t;for(let i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break e}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=le.FormData&&t instanceof le.FormData,!(0<=BL(mee,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,o){this.g.setRequestHeader(o,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{FF(this),0<this.B&&((this.K=function _ee(t){return Ju&&function PX(){return function AX(t){var e=kX;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}(function(){let t=0;const e=$L(String(xg)).split("."),n=$L("9").split("."),r=Math.max(e.length,n.length);for(let o=0;0==t&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;t=lD(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||lD(0==i[2].length,0==s[2].length)||lD(i[2],s[2]),i=i[3],s=s[3]}while(0==t)}return 0<=t})}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vn(this.pa,this)):this.A=kD(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){NF(this,s)}},G.pa=function(){typeof oD<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,In(this,"timeout"),this.abort(8))},G.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,In(this,"complete"),In(this,"abort"),qg(this))},G.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qg(this,!0)),Lt.Z.M.call(this)},G.Fa=function(){this.s||(this.F||this.v||this.l?LF(this):this.cb())},G.cb=function(){LF(this)},G.ba=function(){try{return 2<gs(this)?this.g.status:-1}catch{return-1}},G.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},G.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),pee(e)}},G.Da=function(){return this.m},G.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(G=BF.prototype).ma=8,G.G=1,G.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}},G.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new Dd(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=GL(s),WL(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=$F(this,i,e),ht(n=ps(this.F),"RID",t),ht(n,"CVER",22),this.D&&ht(n,"X-HTTP-Session-Id",this.D),Od(this,n),this.o&&s&&GD(n,this.o,s),$D(this.i,i),this.Ra&&ht(n,"TYPE","init"),this.ja?(ht(n,"$req",e),ht(n,"SID","null"),i.$=!0,FD(i,n,null)):FD(i,n,e),this.G=2}}else 3==this.G&&(t?jF(this,t):0==this.l.length||AF(this.i)||jF(this))},G.Ga=function(){if(this.u=null,HF(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Td(vn(this.bb,this),t)}},G.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Qn(10),Wg(this),HF(this))},G.ab=function(){null!=this.v&&(this.v=null,Wg(this),KD(this),Qn(19))},G.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Qn(2)):(this.h.info("Failed to ping google.com"),Qn(1))},(G=QF.prototype).xa=function(){},G.wa=function(){},G.va=function(){},G.ua=function(){},G.Oa=function(){},Qg.prototype.g=function(t,e){return new Cr(t,e)},wn(Cr,sn),Cr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),SD(vn(t.hb,t,e))),Qn(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=KF(t,null,t.W),Kg(t)},Cr.prototype.close=function(){qD(this.g)},Cr.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,WD(this.g,e)}else this.v?((e={}).__data__=CD(t),WD(this.g,e)):WD(this.g,t)},Cr.prototype.M=function(){this.g.j=null,delete this.j,qD(this.g),delete this.g,Cr.Z.M.call(this)},wn(YF,RD),wn(JF,ND),wn(nc,QF),nc.prototype.xa=function(){In(this.g,"a")},nc.prototype.wa=function(t){In(this.g,new YF(t))},nc.prototype.va=function(t){In(this.g,new JF(t))},nc.prototype.ua=function(){In(this.g,"b")},Qg.prototype.createWebChannel=Qg.prototype.g,Cr.prototype.send=Cr.prototype.u,Cr.prototype.open=Cr.prototype.m,Cr.prototype.close=Cr.prototype.close,Lg.NO_ERROR=0,Lg.TIMEOUT=8,Lg.HTTP_ERROR=6,fF.COMPLETE="complete",gF.EventType=bd,bd.OPEN="a",bd.CLOSE="b",bd.ERROR="c",bd.MESSAGE="d",sn.prototype.listen=sn.prototype.N,Lt.prototype.listenOnce=Lt.prototype.O,Lt.prototype.getLastError=Lt.prototype.La,Lt.prototype.getLastErrorCode=Lt.prototype.Da,Lt.prototype.getStatus=Lt.prototype.ba,Lt.prototype.getResponseJson=Lt.prototype.Qa,Lt.prototype.getResponseText=Lt.prototype.ga,Lt.prototype.send=Lt.prototype.ea;var Iee=fs.createWebChannelTransport=function(){return new Qg},Eee=fs.getStatEventTarget=function(){return Og()},QD=fs.ErrorCode=Lg,Tee=fs.EventType=fF,bee=fs.Event=na,XF=fs.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Dee=fs.FetchXmlHttpFactory=kd,Yg=fs.WebChannel=gF,Cee=fs.XhrIo=Lt;const eV="@firebase/firestore";class on{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");let rc="9.8.3";const eo=new Hu("@firebase/firestore");function YD(){return eo.logLevel}function O(t,...e){if(eo.logLevel<=Ne.DEBUG){const n=e.map(JD);eo.debug(`Firestore (${rc}): ${t}`,...n)}}function Ft(t,...e){if(eo.logLevel<=Ne.ERROR){const n=e.map(JD);eo.error(`Firestore (${rc}): ${t}`,...n)}}function Jg(t,...e){if(eo.logLevel<=Ne.WARN){const n=e.map(JD);eo.warn(`Firestore (${rc}): ${t}`,...n)}}function JD(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function K(t="Unexpected state"){const e=`FIRESTORE (${rc}) INTERNAL ASSERTION FAILED: `+t;throw Ft(e),new Error(e)}function ae(t,e){t||K()}function $(t,e){return t}const A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class N extends is{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class an{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class tV{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class See{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(on.UNAUTHENTICATED))}shutdown(){}}class xee{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new an;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new an,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const d=o;e.enqueueRetryable(T(function*(){yield d.promise,yield s(r.currentUser)}))},c=d=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),u()};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new an)}},0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae("string"==typeof r.accessToken),new tV(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ae(null===e||"string"==typeof e),new on(e)}}class Mee{constructor(e,n,r){this.type="FirstParty",this.user=on.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class kee{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new Mee(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Pee{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,n){const r=s=>{null!=s.error&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.p;return this.p=s.token,O("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ae("string"==typeof n.token),this.p=n.token,new nV(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ree(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class rV{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Ree(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ye(t,e){return t<e?-1:t>e?1:0}function ic(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}class yt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new N(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new N(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new N(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new N(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new yt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new se(e)}static min(){return new se(new yt(0,0))}static max(){return new se(new yt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ld{constructor(e,n,r){void 0===n?n=0:n>e.length&&K(),void 0===r?r=e.length-n:r>e.length-n&&K(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===Ld.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ld?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Oe extends Ld{construct(e,n,r){return new Oe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new N(A.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Oe(n)}static emptyPath(){return new Oe([])}}const Nee=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends Ld{construct(e,n,r){return new Vt(e,n,r)}static isValidIdentifier(e){return Nee.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new N(A.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const u=e[i];if("\\"===u){if(i+1===e.length)throw new N(A.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new N(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(s(),i++)}if(s(),o)throw new N(A.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(n)}static emptyPath(){return new Vt([])}}class j{constructor(e){this.path=e}static fromPath(e){return new j(Oe.fromString(e))}static fromName(e){return new j(Oe.fromString(e).popFirst(5))}static empty(){return new j(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Oe.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new j(new Oe(e.slice()))}}function oV(t){return new Sr(t.readTime,t.key,-1)}class Sr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Sr(se.min(),j.empty(),-1)}static max(){return new Sr(se.max(),j.empty(),-1)}}function e0(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=j.comparator(t.documentKey,e.documentKey),0!==n?n:ye(t.largestBatchId,e.largestBatchId))}const aV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";function to(t){return t0.apply(this,arguments)}function t0(){return t0=T(function*(t){if(t.code!==A.FAILED_PRECONDITION||t.message!==aV)throw t;O("LocalStore","Unexpectedly lost primary lease")}),t0.apply(this,arguments)}class C{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new C((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof C?n:C.resolve(n)}catch(n){return C.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):C.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):C.reject(n)}static resolve(e){return new C((n,r)=>{n(e)})}static reject(e){return new C((n,r)=>{r(e)})}static waitFor(e){return new C((n,r)=>{let i=0,s=0,o=!1;e.forEach(u=>{++i,u.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=C.resolve(!1);for(const r of e)n=n.next(i=>i?C.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new C((r,i)=>{const s=e.length,o=new Array(s);let u=0;for(let c=0;c<s;c++){const d=c;n(e[d]).next(f=>{o[d]=f,++u,u===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new C((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}function no(t){return"IndexedDbTransactionError"===t.name}class ar{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.it(r),this.rt=r=>n.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function cV(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ca(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}ar.ot=-1;class Et{constructor(e,n){this.comparator=e,this.root=n||En.EMPTY}insert(e,n){return new Et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nm(this.root,e,this.comparator,!1)}getReverseIterator(){return new nm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nm(this.root,e,this.comparator,!0)}}class nm{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class En{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??En.RED,this.left=i??En.EMPTY,this.right=s??En.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new En(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return En.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return En.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,En.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,En.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();const e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}}En.EMPTY=null,En.RED=!0,En.BLACK=!1,En.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(t,e,n,r,i){return this}insert(t,e,n){return new En(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ye{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dV(this.data.getIterator())}getIteratorFrom(e){return new dV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class dV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ar{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new Ar([])}unionWith(e){let n=new Ye(Vt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ar(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ic(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class Qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Qt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const Uee=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ro(t){if(ae(!!t),"string"==typeof t){let e=0;const n=Uee.exec(t);if(ae(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(t.seconds),nanos:Tt(t.nanos)}}function Tt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function la(t){return"string"==typeof t?Qt.fromBase64String(t):Qt.fromUint8Array(t)}function r0(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function hV(t){const e=t.mapValue.fields.__previous_value__;return r0(e)?hV(e):e}function Bd(t){const e=ro(t.mapValue.fields.__local_write_time__.timestampValue);return new yt(e.seconds,e.nanos)}class jee{constructor(e,n,r,i,s,o,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=c}}class io{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new io("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof io&&e.projectId===this.projectId&&e.database===this.database}}function Ud(t){return null==t}function jd(t){return 0===t&&1/t==-1/0}const so_mapValue={fields:{__type__:{stringValue:"__max__"}}};function da(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?r0(t)?4:_V(t)?9007199254740991:10:K()}function ki(t,e){if(t===e)return!0;const n=da(t);if(n!==da(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bd(t).isEqual(Bd(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=ro(r.timestampValue),o=ro(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,la(t.bytesValue).isEqual(la(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Tt(r.geoPointValue.latitude)===Tt(i.geoPointValue.latitude)&&Tt(r.geoPointValue.longitude)===Tt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Tt(r.integerValue)===Tt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Tt(r.doubleValue),o=Tt(i.doubleValue);return s===o?jd(s)===jd(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return ic(t.arrayValue.values||[],e.arrayValue.values||[],ki);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(cV(s)!==cV(o))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(void 0===o[u]||!ki(s[u],o[u])))return!1;return!0}(t,e);default:return K()}var i}function $d(t,e){return void 0!==(t.values||[]).find(n=>ki(n,e))}function oo(t,e){if(t===e)return 0;const n=da(t),r=da(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Tt(i.integerValue||i.doubleValue),u=Tt(s.integerValue||s.doubleValue);return o<u?-1:o>u?1:o===u?0:isNaN(o)?isNaN(u)?0:-1:1}(t,e);case 3:return pV(t.timestampValue,e.timestampValue);case 4:return pV(Bd(t),Bd(e));case 5:return ye(t.stringValue,e.stringValue);case 6:return function(i,s){const o=la(i),u=la(s);return o.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),u=s.split("/");for(let c=0;c<o.length&&c<u.length;c++){const d=ye(o[c],u[c]);if(0!==d)return d}return ye(o.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=ye(Tt(i.latitude),Tt(s.latitude));return 0!==o?o:ye(Tt(i.longitude),Tt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],u=s.values||[];for(let c=0;c<o.length&&c<u.length;++c){const d=oo(o[c],u[c]);if(d)return d}return ye(o.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===so_mapValue&&s===so_mapValue)return 0;if(i===so_mapValue)return 1;if(s===so_mapValue)return-1;const o=i.fields||{},u=Object.keys(o),c=s.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let f=0;f<u.length&&f<d.length;++f){const p=ye(u[f],d[f]);if(0!==p)return p;const _=oo(o[u[f]],c[d[f]]);if(0!==_)return _}return ye(u.length,d.length)}(t.mapValue,e.mapValue);default:throw K()}}function pV(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ye(t,e);const n=ro(t),r=ro(e),i=ye(n.seconds,r.seconds);return 0!==i?i:ye(n.nanos,r.nanos)}function oc(t){return s0(t)}function s0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=ro(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?la(t.bytesValue).toBase64():"referenceValue"in t?j.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=s0(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const u of i)o?o=!1:s+=",",s+=`${u}:${s0(r.fields[u])}`;return s+"}"}(t.mapValue):K();var e}function o0(t){return!!t&&"integerValue"in t}function zd(t){return!!t&&"arrayValue"in t}function gV(t){return!!t&&"nullValue"in t}function mV(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function im(t){return!!t&&"mapValue"in t}function Hd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ca(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Hd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _V(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!im(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hd(n)}setAll(e){let n=Vt.emptyPath(),r={},i=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=u.popLast()}o?r[u.lastSegment()]=Hd(o):i.push(u.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());im(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ki(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];im(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ca(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Tn(Hd(this.value))}}function wV(t){const e=[];return ca(t.fields,(n,r)=>{const i=new Vt([n]);if(im(r)){const s=wV(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ar(e)}class st{constructor(e,n,r,i,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new st(e,0,se.min(),se.min(),Tn.empty(),0)}static newFoundDocument(e,n,r){return new st(e,1,n,se.min(),r,0)}static newNoDocument(e,n){return new st(e,2,n,se.min(),Tn.empty(),0)}static newUnknownDocument(e,n){return new st(e,3,n,se.min(),Tn.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof st&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new st(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hee{constructor(e,n=null,r=[],i=[],s=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=u,this.ut=null}}function IV(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Hee(t,e,n,r,i,s,o)}function fa(t){const e=$(t);if(null===e.ut){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+oc(i.value);var i}).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Ud(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>oc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>oc(r)).join(",")),e.ut=n}return e.ut}function Gd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!Xee(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if((n=t.filters[i]).op!==(r=e.filters[i]).op||!n.field.isEqual(r.field)||!ki(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!CV(t.startAt,e.startAt)&&CV(t.endAt,e.endAt)}function sm(t){return j.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class bn extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.ct(e,n,r):new qee(e,n,r):"array-contains"===n?new Zee(e,r):"in"===n?new Qee(e,r):"not-in"===n?new Yee(e,r):"array-contains-any"===n?new Jee(e,r):new bn(e,n,r)}static ct(e,n,r){return"in"===n?new Wee(e,r):new Kee(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.at(oo(n,this.value)):null!==n&&da(this.value)===da(n)&&this.at(oo(n,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return K()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class qee extends bn{constructor(e,n,r){super(e,n,r),this.key=j.fromName(r.referenceValue)}matches(e){const n=j.comparator(e.key,this.key);return this.at(n)}}class Wee extends bn{constructor(e,n){super(e,"in",n),this.keys=bV(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Kee extends bn{constructor(e,n){super(e,"not-in",n),this.keys=bV(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function bV(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>j.fromName(r.referenceValue))}class Zee extends bn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return zd(n)&&$d(n.arrayValue,this.value)}}class Qee extends bn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&$d(this.value.arrayValue,n)}}class Yee extends bn{constructor(e,n){super(e,"not-in",n)}matches(e){if($d(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!$d(this.value.arrayValue,n)}}class Jee extends bn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!zd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>$d(this.value.arrayValue,r))}}class ao{constructor(e,n){this.position=e,this.inclusive=n}}class ac{constructor(e,n="asc"){this.field=e,this.dir=n}}function Xee(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function DV(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?j.comparator(j.fromName(o.referenceValue),n.key):oo(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function CV(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ki(t.position[n],e.position[n]))return!1;return!0}class ms{constructor(e,n=null,r=[],i=[],s=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=u,this.endAt=c,this.lt=null,this.ft=null}}function uc(t){return new ms(t)}function cc(t){const e=$(t);if(null===e.lt){e.lt=[];const n=function u0(t){for(const e of t.filters)if(e.ht())return e.field;return null}(e),r=function a0(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==n&&null===r)n.isKeyField()||e.lt.push(new ac(n)),e.lt.push(new ac(Vt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.lt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new ac(Vt.keyField(),s))}}}return e.lt}function Hr(t){const e=$(t);if(!e.ft)if("F"===e.limitType)e.ft=IV(e.path,e.collectionGroup,cc(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of cc(e))n.push(new ac(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new ao(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ao(e.startAt.position,e.startAt.inclusive):null;e.ft=IV(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.ft}function qd(t,e){return Gd(Hr(t),Hr(e))&&t.limitType===e.limitType}function xV(t){return`${fa(Hr(t))}|lt:${t.limitType}`}function l0(t){return`Query(target=${function Gee(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${oc(r.value)}`;var r}).join(", ")}]`),Ud(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>{return`${(r=n).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>oc(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>oc(n)).join(",")),`Target(${e})`}(Hr(t))}; limitType=${t.limitType})`}function d0(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):j.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of n.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&(r=e,!((n=t).startAt&&!function(i,s,o){const u=DV(i,s,o);return i.inclusive?u<=0:u<0}(n.startAt,cc(n),r)||n.endAt&&!function(i,s,o){const u=DV(i,s,o);return i.inclusive?u>=0:u>0}(n.endAt,cc(n),r)));var n,r}function kV(t){return(e,n)=>{let r=!1;for(const i of cc(t)){const s=tte(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function tte(t,e,n){const r=t.field.isKeyField()?j.comparator(e.key,n.key):function(i,s,o){const u=s.data.field(i),c=o.data.field(i);return null!==u&&null!==c?oo(u,c):K()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}function PV(t,e){if(t.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jd(e)?"-0":e}}function RV(t){return{integerValue:""+t}}function NV(t,e){return function fV(t){return"number"==typeof t&&Number.isInteger(t)&&!jd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?RV(e):PV(t,e)}class am{constructor(){this._=void 0}}function nte(t,e,n){return t instanceof lc?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof pa?LV(t,e):t instanceof ga?FV(t,e):function(r,i){const s=OV(r,i),o=VV(s)+VV(r._t);return o0(s)&&o0(r._t)?RV(o):PV(r.wt,o)}(t,e)}function rte(t,e,n){return t instanceof pa?LV(t,e):t instanceof ga?FV(t,e):n}function OV(t,e){return t instanceof dc?o0(n=e)||(r=n)&&"doubleValue"in r?e:{integerValue:0}:null;var r,n}class lc extends am{}class pa extends am{constructor(e){super(),this.elements=e}}function LV(t,e){const n=BV(e);for(const r of t.elements)n.some(i=>ki(i,r))||n.push(r);return{arrayValue:{values:n}}}class ga extends am{constructor(e){super(),this.elements=e}}function FV(t,e){let n=BV(e);for(const r of t.elements)n=n.filter(i=>!ki(i,r));return{arrayValue:{values:n}}}class dc extends am{constructor(e,n){super(),this.wt=e,this._t=n}}function VV(t){return Tt(t.integerValue||t.doubleValue)}function BV(t){return zd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class ste{constructor(e,n){this.version=e,this.transformResults=n}}class vt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vt}static exists(e){return new vt(void 0,e)}static updateTime(e){return new vt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function um(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class cm{}function UV(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new fc(t.key,vt.none()):new hc(t.key,t.data,vt.none());{const n=t.data,r=Tn.empty();let i=new Ye(Vt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new _s(t.key,r,new Ar(i.toArray()),vt.none())}}function ote(t,e,n){t instanceof hc?function(r,i,s){const o=r.value.clone(),u=zV(r.fieldTransforms,i,s.transformResults);o.setAll(u),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof _s?function(r,i,s){if(!um(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=zV(r.fieldTransforms,i,s.transformResults),u=i.data;u.setAll($V(r)),u.setAll(o),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Kd(t,e,n,r){return t instanceof hc?function(i,s,o,u){if(!um(i.precondition,s))return o;const c=i.value.clone(),d=HV(i.fieldTransforms,u,s);return c.setAll(d),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof _s?function(i,s,o,u){if(!um(i.precondition,s))return o;const c=HV(i.fieldTransforms,u,s),d=s.data;return d.setAll($V(i)),d.setAll(c),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):(o=n,um(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function ate(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=OV(r.transform,i||null);null!=s&&(null===n&&(n=Tn.empty()),n.set(r.field,s))}return n||null}function jV(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(n=t.fieldTransforms)&&void 0===r||n&&r&&ic(n,r,(i,s)=>function ite(t,e){return t.field.isEqual(e.field)&&(r=e.transform,(n=t.transform)instanceof pa&&r instanceof pa||n instanceof ga&&r instanceof ga?ic(n.elements,r.elements,ki):n instanceof dc&&r instanceof dc?ki(n._t,r._t):n instanceof lc&&r instanceof lc);var n,r}(i,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}class hc extends cm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class _s extends cm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function $V(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zV(t,e,n){const r=new Map;ae(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,u=e.data.field(s.field);r.set(s.field,rte(o,u,n[i]))}return r}function HV(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,nte(s,o,e))}return r}class fc extends cm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h0 extends cm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ute{constructor(e){this.count=e}}var Bt,Le;function GV(t){switch(t){default:return K();case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return!1;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return!0}}function qV(t){if(void 0===t)return Ft("GRPC error has no .code"),A.UNKNOWN;switch(t){case Bt.OK:return A.OK;case Bt.CANCELLED:return A.CANCELLED;case Bt.UNKNOWN:return A.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return A.INTERNAL;case Bt.UNAVAILABLE:return A.UNAVAILABLE;case Bt.UNAUTHENTICATED:return A.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case Bt.NOT_FOUND:return A.NOT_FOUND;case Bt.ALREADY_EXISTS:return A.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return A.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case Bt.ABORTED:return A.ABORTED;case Bt.OUT_OF_RANGE:return A.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return A.UNIMPLEMENTED;case Bt.DATA_LOSS:return A.DATA_LOSS;default:return K()}}(Le=Bt||(Bt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";class uo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ca(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return lV(this.inner)}size(){return this.innerSize}}const cte=new Et(j.comparator);function ur(){return cte}const WV=new Et(j.comparator);function Zd(...t){let e=WV;for(const n of t)e=e.insert(n.key,n);return e}function KV(t){let e=WV;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Pi(){return Qd()}function ZV(){return Qd()}function Qd(){return new uo(t=>t.toString(),(t,e)=>t.isEqual(e))}const lte=new Et(j.comparator),dte=new Ye(j.comparator);function we(...t){let e=dte;for(const n of t)e=e.add(n);return e}const hte=new Ye(ye);function lm(){return hte}class Yd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n){const r=new Map;return r.set(e,Jd.createSynthesizedTargetChangeForCurrentChange(e,n)),new Yd(se.min(),r,lm(),ur(),we())}}class Jd{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n){return new Jd(Qt.EMPTY_BYTE_STRING,n,we(),we(),we())}}class dm{constructor(e,n,r,i){this.gt=e,this.removedTargetIds=n,this.key=r,this.yt=i}}class QV{constructor(e,n){this.targetId=e,this.It=n}}class YV{constructor(e,n,r=Qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class JV{constructor(){this.Tt=0,this.Et=eB(),this.At=Qt.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=we(),n=we(),r=we();return this.Et.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:K()}}),new Jd(this.At,this.Rt,e,n,r)}Dt(){this.bt=!1,this.Et=eB()}Ct(e,n){this.bt=!0,this.Et=this.Et.insert(e,n)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class fte{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=ur(),this.Bt=XV(),this.Lt=new Ye(ye)}Ut(e){for(const n of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(n,e.yt):this.Kt(n,e.key,e.yt);for(const n of e.removedTargetIds)this.Kt(n,e.key,e.yt)}Gt(e){this.forEachTarget(e,n=>{const r=this.Qt(n);switch(e.state){case 0:this.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(n);break;case 3:this.jt(n)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(n)&&(this.Wt(n),r.Vt(e.resumeToken));break;default:K()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ft.forEach((r,i)=>{this.jt(i)&&n(i)})}zt(e){const n=e.targetId,r=e.It.count,i=this.Ht(n);if(i){const s=i.target;if(sm(s))if(0===r){const o=new j(s.path);this.Kt(n,o,st.newNoDocument(o,se.min()))}else ae(1===r);else this.Jt(n)!==r&&(this.Wt(n),this.Lt=this.Lt.add(n))}}Yt(e){const n=new Map;this.Ft.forEach((s,o)=>{const u=this.Ht(o);if(u){if(s.current&&sm(u.target)){const c=new j(u.target.path);null!==this.$t.get(c)||this.Xt(o,c)||this.Kt(o,c,st.newNoDocument(c,e))}s.vt&&(n.set(o,s.St()),s.Dt())}});let r=we();this.Bt.forEach((s,o)=>{let u=!0;o.forEachWhile(c=>{const d=this.Ht(c);return!d||2===d.purpose||(u=!1,!1)}),u&&(r=r.add(s))}),this.$t.forEach((s,o)=>o.setReadTime(e));const i=new Yd(e,n,this.Lt,this.$t,r);return this.$t=ur(),this.Bt=XV(),this.Lt=new Ye(ye),i}qt(e,n){if(!this.jt(e))return;const r=this.Xt(e,n.key)?2:0;this.Qt(e).Ct(n.key,r),this.$t=this.$t.insert(n.key,n),this.Bt=this.Bt.insert(n.key,this.Zt(n.key).add(e))}Kt(e,n,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,n)?i.Ct(n,1):i.xt(n),this.Bt=this.Bt.insert(n,this.Zt(n).delete(e)),r&&(this.$t=this.$t.insert(n,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const n=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let n=this.Ft.get(e);return n||(n=new JV,this.Ft.set(e,n)),n}Zt(e){let n=this.Bt.get(e);return n||(n=new Ye(ye),this.Bt=this.Bt.insert(e,n)),n}jt(e){const n=null!==this.Ht(e);return n||O("WatchChangeAggregator","Detected inactive target",e),n}Ht(e){const n=this.Ft.get(e);return n&&n.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new JV),this.Mt.getRemoteKeysForTarget(e).forEach(n=>{this.Kt(e,n,null)})}Xt(e,n){return this.Mt.getRemoteKeysForTarget(e).has(n)}}function XV(){return new Et(j.comparator)}function eB(){return new Et(j.comparator)}const pte={asc:"ASCENDING",desc:"DESCENDING"},gte={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class mte{constructor(e,n){this.databaseId=e,this.dt=n}}function Xd(t,e){return t.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tB(t,e){return t.dt?e.toBase64():e.toUint8Array()}function _te(t,e){return Xd(t,e.toTimestamp())}function un(t){return ae(!!t),se.fromTimestamp(function(e){const n=ro(e);return new yt(n.seconds,n.nanos)}(t))}function f0(t,e){return(n=t,new Oe(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function nB(t){const e=Oe.fromString(t);return ae(dB(e)),e}function eh(t,e){return f0(t.databaseId,e.path)}function Ri(t,e){const n=nB(e);if(n.get(1)!==t.databaseId.projectId)throw new N(A.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new N(A.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new j(iB(n))}function p0(t,e){return f0(t.databaseId,e)}function th(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iB(t){return ae(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function sB(t,e,n){return{name:eh(t,e),fields:n.value.mapValue.fields}}function aB(t,e){return{documents:[p0(t,e.path)]}}function uB(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=p0(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=p0(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(c){if(0===c.length)return;const d=c.map(f=>function(p){if("=="===p.op){if(mV(p.value))return{unaryFilter:{field:pc(p.field),op:"IS_NAN"}};if(gV(p.value))return{unaryFilter:{field:pc(p.field),op:"IS_NULL"}}}else if("!="===p.op){if(mV(p.value))return{unaryFilter:{field:pc(p.field),op:"IS_NOT_NAN"}};if(gV(p.value))return{unaryFilter:{field:pc(p.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pc(p.field),op:Tte(p.op),value:p.value}}}(f));return 1===d.length?d[0]:{compositeFilter:{op:"AND",filters:d}}}(e.filters);i&&(n.structuredQuery.where=i);const s=function(c){if(0!==c.length)return c.map(d=>{return{field:pc((f=d).field),direction:Ete(f.dir)};var f})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=(d=e.limit,t.dt||Ud(d)?d:{value:d});var d,u,c;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt={before:!(c=e.endAt).inclusive,values:c.position}),n}function cB(t){let e=function rB(t){const e=nB(t);return 4===e.length?Oe.emptyPath():iB(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ae(1===r);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=lB(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(f=>{return new ac(gc((p=f).field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction));var p}));let u=null;n.limit&&(u=function(f){let p;return p="object"==typeof f?f.value:f,Ud(p)?null:p}(n.limit));let c=null;var f;n.startAt&&(c=new ao((f=n.startAt).values||[],!!f.before));let d=null;return n.endAt&&(d=function(f){return new ao(f.values||[],!f.before)}(n.endAt)),function SV(t,e,n,r,i,s,o,u){return new ms(t,e,n,r,i,s,o,u)}(e,i,o,s,u,"F",c,d)}function lB(t){return t?void 0!==t.unaryFilter?[Dte(t)]:void 0!==t.fieldFilter?[bte(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(e=>lB(e)).reduce((e,n)=>e.concat(n)):K():[]}function Ete(t){return pte[t]}function Tte(t){return gte[t]}function pc(t){return{fieldPath:t.canonicalString()}}function gc(t){return Vt.fromServerFormat(t.fieldPath)}function bte(t){return bn.create(gc(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(t.fieldFilter.op),t.fieldFilter.value)}function Dte(t){switch(t.unaryFilter.op){case"IS_NAN":const e=gc(t.unaryFilter.field);return bn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=gc(t.unaryFilter.field);return bn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=gc(t.unaryFilter.field);return bn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=gc(t.unaryFilter.field);return bn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return K()}}function Cte(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function dB(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class _0{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&ote(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Kd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Kd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ZV();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let u=this.applyToLocalView(o,s.mutatedFields);u=n.has(i.key)?null:u;const c=UV(o,u);null!==c&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),we())}isEqual(e){return this.batchId===e.batchId&&ic(this.mutations,e.mutations,(n,r)=>jV(n,r))&&ic(this.baseMutations,e.baseMutations,(n,r)=>jV(n,r))}}class y0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ae(e.mutations.length===r.length);let i=lte;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new y0(e,n,r,i)}}class v0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class co{constructor(e,n,r,i,s=se.min(),o=se.min(),u=Qt.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}withSequenceNumber(e){return new co(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class yB{constructor(e){this.ne=e}}function w0(t){const e=cB({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?function AV(t,e,n){return new ms(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}(e,e.limit,"L"):e}class va{constructor(){}re(e,n){this.oe(e,n),n.ue()}oe(e,n){if("nullValue"in e)this.ce(n,5);else if("booleanValue"in e)this.ce(n,10),n.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(n,15),n.ae(Tt(e.integerValue));else if("doubleValue"in e){const r=Tt(e.doubleValue);isNaN(r)?this.ce(n,13):(this.ce(n,15),jd(r)?n.ae(0):n.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(n,20),"string"==typeof r?n.he(r):(n.he(`${r.seconds||""}`),n.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,n),this.fe(n);else if("bytesValue"in e)this.ce(n,30),n.de(la(e.bytesValue)),this.fe(n);else if("referenceValue"in e)this._e(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(n,45),n.ae(r.latitude||0),n.ae(r.longitude||0)}else"mapValue"in e?_V(e)?this.ce(n,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,n),this.fe(n)):"arrayValue"in e?(this.me(e.arrayValue,n),this.fe(n)):K()}le(e,n){this.ce(n,25),this.ge(e,n)}ge(e,n){n.he(e)}we(e,n){const r=e.fields||{};this.ce(n,55);for(const i of Object.keys(r))this.le(i,n),this.oe(r[i],n)}me(e,n){const r=e.values||[];this.ce(n,50);for(const i of r)this.oe(i,n)}_e(e,n){this.ce(n,37),j.fromName(e).path.forEach(r=>{this.ce(n,60),this.ge(r,n)})}ce(e,n){e.ae(n)}fe(e){e.ae(2)}}va.ye=new va;class Jte{constructor(){this.ze=new E0}addToCollectionParentIndex(e,n){return this.ze.add(n),C.resolve()}getCollectionParents(e,n){return C.resolve(this.ze.getEntries(n))}addFieldIndex(e,n){return C.resolve()}deleteFieldIndex(e,n){return C.resolve()}getDocumentsMatchingTarget(e,n){return C.resolve(null)}getIndexType(e,n){return C.resolve(0)}getFieldIndexes(e,n){return C.resolve([])}getNextCollectionGroupToUpdate(e){return C.resolve(null)}getMinOffset(e,n){return C.resolve(Sr.min())}getMinOffsetFromCollectionGroup(e,n){return C.resolve(Sr.min())}updateCollectionGroup(e,n,r){return C.resolve()}updateIndexEntries(e,n){return C.resolve()}}class E0{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ye(Oe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(Oe.comparator)).toArray()}}new Uint8Array(0);class cr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new cr(e,cr.DEFAULT_COLLECTION_PERCENTILE,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}cr.DEFAULT_COLLECTION_PERCENTILE=10,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cr.DEFAULT=new cr(41943040,cr.DEFAULT_COLLECTION_PERCENTILE,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cr.DISABLED=new cr(-1,0,0);class Ea{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Ea(0)}static Rn(){return new Ea(-1)}}class une{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class BB{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.getBaseDocument(e,n,r))).next(i=>(null!==r&&Kd(r.mutation,i,Ar.empty(),yt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,n,r=we()){const i=Pi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Zd();return s.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Pi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,we()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,i){let s=ur();const o=Qd(),u=Qd();return n.forEach((c,d)=>{const f=r.get(d.key);i.has(d.key)&&(void 0===f||f.mutation instanceof _s)?s=s.insert(d.key,d):void 0!==f&&(o.set(d.key,f.mutation.getFieldMask()),Kd(f.mutation,d,f.mutation.getFieldMask(),yt.now()))}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var p;return u.set(d,new une(f,null!==(p=o.get(d))&&void 0!==p?p:null))}),u))}recalculateAndSaveOverlays(e,n){const r=Qd();let i=new Et((o,u)=>o-u),s=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const d=n.get(c);if(null===d)return;let f=r.get(c)||Ar.empty();f=u.applyToLocalView(d,f),r.set(c,f);const p=(i.get(u.batchId)||we()).add(c);i=i.insert(u.batchId,p)})}).next(()=>{const o=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),d=c.key,f=c.value,p=ZV();f.forEach(_=>{if(!s.has(_)){const y=UV(n.get(_),r.get(_));null!==y&&p.set(_,y),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return C.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return j.isDocumentKey((i=n).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):function c0(t){return null!==t.collectionGroup}(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r);var i}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):C.resolve(Pi());let u=-1,c=s;return o.next(d=>C.forEach(d,(f,p)=>(u<p.largestBatchId&&(u=p.largestBatchId),s.get(f)?C.resolve():this.getBaseDocument(e,f,p).next(_=>{c=c.insert(f,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,we())).next(f=>({batchId:u,changes:KV(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new j(n)).next(r=>{let i=Zd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Zd();return this.indexManager.getCollectionParents(e,i).next(o=>C.forEach(o,u=>{const c=(d=n,f=u.child(i),new ms(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt));var d,f;return this.getDocumentsMatchingCollectionQuery(e,c,r).next(d=>{d.forEach((f,p)=>{s=s.insert(f,p)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,n.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId))).next(s=>{s.forEach((u,c)=>{const d=c.getKey();null===i.get(d)&&(i=i.insert(d,st.newInvalidDocument(d)))});let o=Zd();return i.forEach((u,c)=>{const d=s.get(u);void 0!==d&&Kd(d.mutation,c,Ar.empty(),yt.now()),d0(n,c)&&(o=o.insert(u,c))}),o})}getBaseDocument(e,n,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,n):C.resolve(st.newInvalidDocument(n))}}class cne{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,n){return C.resolve(this.Jn.get(n))}saveBundleMetadata(e,n){var r;return this.Jn.set(n.id,{id:(r=n).id,version:r.version,createTime:un(r.createTime)}),C.resolve()}getNamedQuery(e,n){return C.resolve(this.Yn.get(n))}saveNamedQuery(e,n){return this.Yn.set(n.name,{name:(r=n).name,query:w0(r.bundledQuery),readTime:un(r.readTime)}),C.resolve();var r}}class lne{constructor(){this.overlays=new Et(j.comparator),this.Xn=new Map}getOverlay(e,n){return C.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Pi();return C.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ie(e,n,s)}),C.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(r)),C.resolve()}getOverlaysForCollection(e,n,r){const i=Pi(),s=n.length+1,o=new j(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return C.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Et((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);null===f&&(f=Pi(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const u=Pi(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>u.set(d,f)),!(u.size()>=i)););return C.resolve(u)}ie(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new v0(n,r));let s=this.Xn.get(n);void 0===s&&(s=we(),this.Xn.set(n,s)),this.Xn.set(n,s.add(r.key))}}class T0{constructor(){this.Zn=new Ye(ln.ts),this.es=new Ye(ln.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,n){const r=new ln(e,n);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.rs(new ln(e,n))}os(e,n){e.forEach(r=>this.removeReference(r,n))}us(e){const n=new j(new Oe([])),r=new ln(n,e),i=new ln(n,e+1),s=[];return this.es.forEachInRange([r,i],o=>{this.rs(o),s.push(o.key)}),s}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const n=new j(new Oe([])),r=new ln(n,e),i=new ln(n,e+1);let s=we();return this.es.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ln(e,0),r=this.Zn.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class ln{constructor(e,n){this.key=e,this.ls=n}static ts(e,n){return j.comparator(e.key,n.key)||ye(e.ls,n.ls)}static ns(e,n){return ye(e.ls,n.ls)||j.comparator(e.key,n.key)}}class dne{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new Ye(ln.ts)}checkEmpty(e){return C.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.fs;this.fs++;const o=new _0(s,n,r,i);this.mutationQueue.push(o);for(const u of i)this.ds=this.ds.add(new ln(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return C.resolve(o)}lookupMutationBatch(e,n){return C.resolve(this._s(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.ws(n+1),s=i<0?0:i;return C.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return C.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return C.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ln(n,0),i=new ln(n,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([r,i],o=>{const u=this._s(o.ls);s.push(u)}),C.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(ye);return n.forEach(i=>{const s=new ln(i,0),o=new ln(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,o],u=>{r=r.add(u.ls)})}),C.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;j.isDocumentKey(s)||(s=s.child(""));const o=new ln(new j(s),0);let u=new Ye(ye);return this.ds.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(u=u.add(c.ls)),!0)},o),C.resolve(this.gs(u))}gs(e){const n=[];return e.forEach(r=>{const i=this._s(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){ae(0===this.ys(n.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return C.forEach(n.mutations,i=>{const s=new ln(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,n){const r=new ln(n,0),i=this.ds.firstAfterOrEqual(r);return C.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return C.resolve()}ys(e,n){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const n=this.ws(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class hne{constructor(e){this.ps=e,this.docs=new Et(j.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ps(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return C.resolve(r?r.document.mutableCopy():st.newInvalidDocument(n))}getEntries(e,n){let r=ur();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():st.newInvalidDocument(i))}),C.resolve(r)}getAllFromCollection(e,n,r){let i=ur();const s=new j(n.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:u,value:{document:c}}=o.getNext();if(!n.isPrefixOf(u.path))break;u.path.length>n.length+1||e0(oV(c),r)<=0||(i=i.insert(c.key,c.mutableCopy()))}return C.resolve(i)}getAllFromCollectionGroup(e,n,r,i){K()}Is(e,n){return C.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new fne(this)}getSize(e){return C.resolve(this.size)}}class fne extends class sne{constructor(){this.changes=new uo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,st.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?C.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}{constructor(e){super(),this.zn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),C.waitFor(n)}getFromCache(e,n){return this.zn.getEntry(e,n)}getAllFromCache(e,n){return this.zn.getEntries(e,n)}}class pne{constructor(e){this.persistence=e,this.Ts=new uo(n=>fa(n),Gd),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Es=0,this.As=new T0,this.targetCount=0,this.Rs=Ea.An()}forEachTarget(e,n){return this.Ts.forEach((r,i)=>n(i)),C.resolve()}getLastRemoteSnapshotVersion(e){return C.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return C.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),C.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Es&&(this.Es=n),C.resolve()}vn(e){this.Ts.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Rs=new Ea(n),this.highestTargetId=n),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,n){return this.vn(n),this.targetCount+=1,C.resolve()}updateTargetData(e,n){return this.vn(n),C.resolve()}removeTargetData(e,n){return this.Ts.delete(n.target),this.As.us(n.targetId),this.targetCount-=1,C.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Ts.forEach((o,u)=>{u.sequenceNumber<=n&&null===r.get(u.targetId)&&(this.Ts.delete(o),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),C.waitFor(s).next(()=>i)}getTargetCount(e){return C.resolve(this.targetCount)}getTargetData(e,n){const r=this.Ts.get(n)||null;return C.resolve(r)}addMatchingKeys(e,n,r){return this.As.ss(n,r),C.resolve()}removeMatchingKeys(e,n,r){this.As.os(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),C.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.As.us(n),C.resolve()}getMatchingKeysForTargetId(e,n){const r=this.As.hs(n);return C.resolve(r)}containsKey(e,n){return C.resolve(this.As.containsKey(n))}}class UB{constructor(e,n){this.bs={},this.overlays={},this.Ps=new ar(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new pne(this),this.indexManager=new Jte,this.remoteDocumentCache=new hne(r=>this.referenceDelegate.Ss(r)),this.wt=new yB(n),this.Ds=new cne(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lne,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.bs[e.toKey()];return r||(r=new dne(n,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,n,r){O("MemoryPersistence","Starting transaction:",e);const i=new gne(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(s=>this.referenceDelegate.xs(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ns(e,n){return C.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,n)))}}class gne extends class Oee{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}{constructor(e){super(),this.currentSequenceNumber=e}}class wm{constructor(e){this.persistence=e,this.ks=new T0,this.Os=null}static Ms(e){return new wm(e)}get Fs(){if(this.Os)return this.Os;throw K()}addReference(e,n,r){return this.ks.addReference(r,n),this.Fs.delete(r.toString()),C.resolve()}removeReference(e,n,r){return this.ks.removeReference(r,n),this.Fs.add(r.toString()),C.resolve()}markPotentiallyOrphaned(e,n){return this.Fs.add(n.toString()),C.resolve()}removeTarget(e,n){this.ks.us(n.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Fs.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Cs(){this.Os=new Set}xs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return C.forEach(this.Fs,r=>{const i=j.fromPath(r);return this.$s(e,i).next(s=>{s||n.removeEntry(i,se.min())})}).next(()=>(this.Os=null,n.apply(e)))}updateLimboDocument(e,n){return this.$s(e,n).next(r=>{r?this.Fs.delete(n.toString()):this.Fs.add(n.toString())})}Ss(e){return 0}$s(e,n){return C.or([()=>C.resolve(this.ks.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ns(e,n)])}}class S0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Pi=r,this.vi=i}static Vi(e,n){let r=we(),i=we();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new S0(e,n.fromCache,r,i)}}class $B{constructor(){this.Si=!1}initialize(e,n){this.Di=e,this.indexManager=n,this.Si=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ci(e,n).next(s=>s||this.xi(e,n,i,r)).next(s=>s||this.Ni(e,n))}Ci(e,n){return C.resolve(null)}xi(e,n,r,i){return function ete(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(n)||i.isEqual(se.min())?this.Ni(e,n):this.Di.getDocuments(e,r).next(s=>{const o=this.ki(n,s);return this.Oi(n,o,r,i)?this.Ni(e,n):(YD()<=Ne.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),l0(n)),this.Mi(e,o,n,function sV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=se.fromTimestamp(1e9===r?new yt(n+1,0):new yt(n,r));return new Sr(i,j.empty(),e)}(i,-1)))})}ki(e,n){let r=new Ye(kV(e));return n.forEach((i,s)=>{d0(e,s)&&(r=r.add(s))}),r}Oi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ni(e,n){return YD()<=Ne.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",l0(n)),this.Di.getDocumentsMatchingQuery(e,n,Sr.min())}Mi(e,n,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class _ne{constructor(e,n,r,i){this.persistence=e,this.Fi=n,this.wt=i,this.$i=new Et(ye),this.Bi=new uo(s=>fa(s),Gd),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BB(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.$i))}}function HB(t,e){return A0.apply(this,arguments)}function A0(){return A0=T(function*(t,e){const n=$(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.qi(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],u=[];let c=we();for(const d of i){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of s){u.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ki:d,removedBatchIds:o,addedBatchIds:u}))})})}),A0.apply(this,arguments)}function yne(t,e){const n=$(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ui.newChangeBuffer({trackRemovals:!0});return function(o,u,c,d){const f=c.batch,p=f.keys();let _=C.resolve();return p.forEach(y=>{_=_.next(()=>d.getEntry(u,y)).next(w=>{const E=c.docVersions.get(y);ae(null!==E),w.version.compareTo(E)<0&&(f.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),d.addEntry(w)))})}),_.next(()=>o.mutationQueue.removeMutationBatch(u,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let u=we();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(u=u.add(o.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function GB(t){const e=$(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Vs.getLastRemoteSnapshotVersion(n))}function vne(t,e){const n=$(t),r=e.snapshotVersion;let i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;const u=[];e.targetChanges.forEach((f,p)=>{const _=i.get(p);if(!_)return;u.push(n.Vs.removeMatchingKeys(s,f.removedDocuments,p).next(()=>n.Vs.addMatchingKeys(s,f.addedDocuments,p)));let y=_.withSequenceNumber(s.currentSequenceNumber);var w,E,b;e.targetMismatches.has(p)?y=y.withResumeToken(Qt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),E=y,b=f,(0===(w=_).resumeToken.approximateByteSize()||E.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8||b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0)&&u.push(n.Vs.updateTargetData(s,y))});let c=ur(),d=we();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),u.push(function qB(t,e,n){let r=we(),i=we();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ur();return n.forEach((u,c)=>{const d=s.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(se.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||0===c.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):O("LocalStore","Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{Gi:o,Qi:i}})}(s,o,e.documentUpdates).next(f=>{c=f.Gi,d=f.Qi})),!r.isEqual(se.min())){const f=n.Vs.getLastRemoteSnapshotVersion(s).next(p=>n.Vs.setTargetsMetadata(s,s.currentSequenceNumber,r));u.push(f)}return C.waitFor(u).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(n.$i=i,s))}function wne(t,e){const n=$(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function yc(t,e){const n=$(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Vs.getTargetData(r,e).next(s=>s?(i=s,C.resolve(i)):n.Vs.allocateTargetId(r).next(o=>(i=new co(e,o,0,r.currentSequenceNumber),n.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.$i=n.$i.insert(r.targetId,r),n.Bi.set(e,r.targetId)),r})}function vc(t,e,n){return x0.apply(this,arguments)}function x0(){return x0=T(function*(t,e,n){const r=$(t),i=r.$i.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!no(o))throw o;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),x0.apply(this,arguments)}function Em(t,e,n){const r=$(t);let i=se.min(),s=we();return r.persistence.runTransaction("Execute query","readonly",o=>function(u,c,d){const f=$(u),p=f.Bi.get(d);return void 0!==p?C.resolve(f.$i.get(p)):f.Vs.getTargetData(c,d)}(r,o,Hr(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(o,u.targetId).next(c=>{s=c})}).next(()=>r.Fi.getDocumentsMatchingQuery(o,e,n?i:se.min(),n?s:we())).next(u=>(function ZB(t,e,n){let r=se.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Li.set(e,r)}(r,function MV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),u),{documents:u,ji:s})))}class N0{constructor(){this.activeTargetIds=lm()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JB{constructor(){this.Fr=new N0,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,n,r){this.$r[e]=n}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new N0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Tne{Br(e){}shutdown(){}}class XB{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const bne={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Dne{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Cne extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,n,r,i,s){const o=this.oo(e,n);O("RestConnection","Sending: ",o,r);const u={};return this.uo(u,i,s),this.co(e,o,u,r).then(c=>(O("RestConnection","Received: ",c),c),c=>{throw Jg("RestConnection",`${e} failed with error: `,c,"url: ",o,"request:",r),c})}ao(e,n,r,i,s){return this.ro(e,n,r,i,s)}uo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+rc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}oo(e,n){return`${this.so}/v1/${n}:${bne[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,n,r,i){return new Promise((s,o)=>{const u=new Cee;u.listenOnce(Tee.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case QD.NO_ERROR:const d=u.getResponseJson();O("Connection","XHR received:",JSON.stringify(d)),s(d);break;case QD.TIMEOUT:O("Connection",'RPC "'+e+'" timed out'),o(new N(A.DEADLINE_EXCEEDED,"Request time out"));break;case QD.HTTP_ERROR:const f=u.getStatus();if(O("Connection",'RPC "'+e+'" failed with status:',f,"response text:",u.getResponseText()),f>0){const p=u.getResponseJson().error;if(p&&p.status&&p.message){const _=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(A).indexOf(w)>=0?w:A.UNKNOWN}(p.status);o(new N(_,p.message))}else o(new N(A.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new N(A.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{O("Connection",'RPC "'+e+'" completed.')}});const c=JSON.stringify(i);u.send(n,"POST",c,r,15)})}ho(e,n,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Iee(),o=Eee(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new Dee({})),this.uo(u.initMessageHeaders,n,r),X1()||eN()||function XK(){return br().indexOf("Electron/")>=0}()||function e5(){const t=br();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||function t5(){return br().indexOf("MSAppHost/")>=0}()||Wp()||(u.httpHeadersOverwriteParam="$httpHeaders");const c=i.join("");O("Connection","Creating WebChannel: "+c,u);const d=s.createWebChannel(c,u);let f=!1,p=!1;const _=new Dne({jr:w=>{p?O("Connection","Not sending because WebChannel is closed:",w):(f||(O("Connection","Opening WebChannel transport."),d.open(),f=!0),O("Connection","WebChannel sending:",w),d.send(w))},Wr:()=>d.close()}),y=(w,E,b)=>{w.listen(E,M=>{try{b(M)}catch(P){setTimeout(()=>{throw P},0)}})};return y(d,Yg.EventType.OPEN,()=>{p||O("Connection","WebChannel transport opened.")}),y(d,Yg.EventType.CLOSE,()=>{p||(p=!0,O("Connection","WebChannel transport closed"),_.eo())}),y(d,Yg.EventType.ERROR,w=>{p||(p=!0,Jg("Connection","WebChannel transport errored:",w),_.eo(new N(A.UNAVAILABLE,"The operation could not be completed")))}),y(d,Yg.EventType.MESSAGE,w=>{var E;if(!p){const b=w.data[0];ae(!!b);const M=b,P=M.error||(null===(E=M[0])||void 0===E?void 0:E.error);if(P){O("Connection","WebChannel received error:",P);const S=P.status;let F=function(ee){const lt=Bt[ee];if(void 0!==lt)return qV(lt)}(S),H=P.message;void 0===F&&(F=A.INTERNAL,H="Unknown error status: "+S+" with message "+P.message),p=!0,_.eo(new N(F,H)),d.close()}else O("Connection","WebChannel received:",b),_.no(b)}}),y(o,bee.STAT_EVENT,w=>{w.stat===XF.PROXY?O("Connection","Detected buffering proxy"):w.stat===XF.NOPROXY&&O("Connection","Detected no buffering proxy")}),setTimeout(()=>{_.Zr()},0),_}}function Dm(){return typeof document<"u"?document:null}function dh(t){return new mte(t,!0)}class L0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.js=e,this.timerId=n,this.lo=r,this.fo=i,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class t2{constructor(e,n,r,i,s,o,u,c){this.js=e,this.Ao=r,this.Ro=i,this.bo=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new L0(e,n)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return T(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return T(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,n){var r=this;return T(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():n&&n.code===A.RESOURCE_EXHAUSTED?(Ft(n.toString()),Ft("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):n&&n.code===A.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(n)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===n&&this.Uo(r,i)},r=>{e(()=>{const i=new N(A.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,n){const r=this.Lo(this.Po);this.stream=this.Ko(e,n),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io(T(function*(){e.state=0,e.start()}))}qo(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return n=>{this.js.enqueueAndForget(()=>this.Po===e?n():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sne extends t2{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.wt=s}Ko(e,n){return this.bo.ho("Listen",e,n)}onMessage(e){this.So.reset();const n=function vte(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:K(),i=e.targetChange.targetIds||[],s=function(c,d){return c.dt?(ae(void 0===d||"string"==typeof d),Qt.fromBase64String(d||"")):(ae(void 0===d||d instanceof Uint8Array),Qt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(c){const d=void 0===c.code?A.UNKNOWN:qV(c.code);return new N(d,c.message||"")}(o);n=new YV(r,i,s,u||null)}else if("documentChange"in e){const r=e.documentChange,i=Ri(t,r.document.name),s=un(r.document.updateTime),o=new Tn({mapValue:{fields:r.document.fields}}),u=st.newFoundDocument(i,s,o);n=new dm(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Ri(t,r.document),s=r.readTime?un(r.readTime):se.min(),o=st.newNoDocument(i,s);n=new dm([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Ri(t,r.document);n=new dm([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return K();{const r=e.filter,s=new ute(r.count||0);n=new QV(r.targetId,s)}}var c;return n}(this.wt,e),r=function(i){if(!("targetChange"in i))return se.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?se.min():s.readTime?un(s.readTime):se.min()}(e);return this.listener.Go(n,r)}Qo(e){const n={};n.database=th(this.wt),n.addTarget=function(i,s){let o;const u=s.target;return o=sm(u)?{documents:aB(i,u)}:{query:uB(i,u)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=tB(i,s.resumeToken):s.snapshotVersion.compareTo(se.min())>0&&(o.readTime=Xd(i,s.snapshotVersion.toTimestamp())),o}(this.wt,e);const r=function Ite(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return K()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.Mo(n)}jo(e){const n={};n.database=th(this.wt),n.removeTarget=e,this.Mo(n)}}class Ane extends t2{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.wt=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,n){return this.bo.ho("Write",e,n)}onMessage(e){if(ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const n=function wte(t,e){return t&&t.length>0?(ae(void 0!==e),t.map(n=>function(r,i){let s=un(r.updateTime?r.updateTime:i);return s.isEqual(se.min())&&(s=un(i)),new ste(s,r.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=un(e.commitTime);return this.listener.Jo(r,n)}return ae(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=th(this.wt),this.Mo(e)}Ho(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function nh(t,e){let n;if(e instanceof hc)n={update:sB(t,e.key,e.value)};else if(e instanceof fc)n={delete:eh(t,e.key)};else if(e instanceof _s)n={update:sB(t,e.key,e.data),updateMask:Cte(e.fieldMask)};else{if(!(e instanceof h0))return K();n={verify:eh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof lc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof pa)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof ga)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof dc)return{fieldPath:s.field.canonicalString(),increment:o._t};throw K()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:_te(t,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:K()),n;var i}(this.wt,r))};this.Mo(n)}}class xne extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new N(A.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,n,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.bo.ro(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new N(A.UNKNOWN,i.toString())})}ao(e,n,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.bo.ao(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new N(A.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class Mne{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Ft(n),this.su=!1):O("OnlineStateTracker",n)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class kne{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(u=>{r.enqueueAndForget(T(function*(){var c;fo(o)&&(O("RemoteStore","Restarting streams for network reachability change."),yield(c=T(function*(d){const f=$(d);f.lu.add(4),yield wc(f),f._u.set("Unknown"),f.lu.delete(4),yield hh(f)}),function(d){return c.apply(this,arguments)})(o))}))}),this._u=new Mne(r,i)}}function hh(t){return F0.apply(this,arguments)}function F0(){return F0=T(function*(t){if(fo(t))for(const e of t.fu)yield e(!0)}),F0.apply(this,arguments)}function wc(t){return V0.apply(this,arguments)}function V0(){return V0=T(function*(t){for(const e of t.fu)yield e(!1)}),V0.apply(this,arguments)}function Cm(t,e){const n=$(t);n.hu.has(e.targetId)||(n.hu.set(e.targetId,e),j0(n)?U0(n):Ec(n).Co()&&B0(n,e))}function fh(t,e){const n=$(t),r=Ec(n);n.hu.delete(e),r.Co()&&n2(n,e),0===n.hu.size&&(r.Co()?r.ko():fo(n)&&n._u.set("Unknown"))}function B0(t,e){t.wu.Nt(e.targetId),Ec(t).Qo(e)}function n2(t,e){t.wu.Nt(e),Ec(t).jo(e)}function U0(t){t.wu=new fte({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),te:e=>t.hu.get(e)||null}),Ec(t).start(),t._u.iu()}function j0(t){return fo(t)&&!Ec(t).Do()&&t.hu.size>0}function fo(t){return 0===$(t).lu.size}function r2(t){t.wu=void 0}function Pne(t){return $0.apply(this,arguments)}function $0(){return $0=T(function*(t){t.hu.forEach((e,n)=>{B0(t,e)})}),$0.apply(this,arguments)}function Rne(t,e){return z0.apply(this,arguments)}function z0(){return z0=T(function*(t,e){r2(t),j0(t)?(t._u.uu(e),U0(t)):t._u.set("Unknown")}),z0.apply(this,arguments)}function Nne(t,e,n){return H0.apply(this,arguments)}function H0(){return H0=T(function*(t,e,n){if(t._u.set("Online"),e instanceof YV&&2===e.state&&e.cause)try{yield(r=T(function*(i,s){const o=s.cause;for(const u of s.targetIds)i.hu.has(u)&&(yield i.remoteSyncer.rejectListen(u,o),i.hu.delete(u),i.wu.removeTarget(u))}),function(i,s){return r.apply(this,arguments)})(t,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Sm(t,r)}else if(e instanceof dm?t.wu.Ut(e):e instanceof QV?t.wu.zt(e):t.wu.Gt(e),!n.isEqual(se.min()))try{const r=yield GB(t.localStore);n.compareTo(r)>=0&&(yield function(i,s){const o=i.wu.Yt(s);return o.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.hu.get(c);d&&i.hu.set(c,d.withResumeToken(u.resumeToken,s))}}),o.targetMismatches.forEach(u=>{const c=i.hu.get(u);if(!c)return;i.hu.set(u,c.withResumeToken(Qt.EMPTY_BYTE_STRING,c.snapshotVersion)),n2(i,u);const d=new co(c.target,u,1,c.sequenceNumber);B0(i,d)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n))}catch(r){O("RemoteStore","Failed to raise snapshot:",r),yield Sm(t,r)}var r}),H0.apply(this,arguments)}function Sm(t,e,n){return G0.apply(this,arguments)}function G0(){return G0=T(function*(t,e,n){if(!no(e))throw e;t.lu.add(1),yield wc(t),t._u.set("Offline"),n||(n=()=>GB(t.localStore)),t.asyncQueue.enqueueRetryable(T(function*(){O("RemoteStore","Retrying IndexedDB access"),yield n(),t.lu.delete(1),yield hh(t)}))}),G0.apply(this,arguments)}function i2(t,e){return e().catch(n=>Sm(t,n,e))}function Ic(t){return q0.apply(this,arguments)}function q0(){return q0=T(function*(t){const e=$(t),n=po(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;One(e);)try{const i=yield wne(e.localStore,r);if(null===i){0===e.au.length&&n.ko();break}r=i.batchId,Lne(e,i)}catch(i){yield Sm(e,i)}s2(e)&&o2(e)}),q0.apply(this,arguments)}function One(t){return fo(t)&&t.au.length<10}function Lne(t,e){t.au.push(e);const n=po(t);n.Co()&&n.zo&&n.Ho(e.mutations)}function s2(t){return fo(t)&&!po(t).Do()&&t.au.length>0}function o2(t){po(t).start()}function Fne(t){return W0.apply(this,arguments)}function W0(){return W0=T(function*(t){po(t).Xo()}),W0.apply(this,arguments)}function Vne(t){return K0.apply(this,arguments)}function K0(){return K0=T(function*(t){const e=po(t);for(const n of t.au)e.Ho(n.mutations)}),K0.apply(this,arguments)}function Bne(t,e,n){return Z0.apply(this,arguments)}function Z0(){return Z0=T(function*(t,e,n){const r=t.au.shift(),i=y0.from(r,e,n);yield i2(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Ic(t)}),Z0.apply(this,arguments)}function Une(t,e){return Q0.apply(this,arguments)}function Q0(){return Q0=T(function*(t,e){var n;e&&po(t).zo&&(yield(n=T(function*(r,i){if(GV(s=i.code)&&s!==A.ABORTED){const o=r.au.shift();po(r).No(),yield i2(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ic(r)}var s}),function(r,i){return n.apply(this,arguments)})(t,e)),s2(t)&&o2(t)}),Q0.apply(this,arguments)}function a2(t,e){return Y0.apply(this,arguments)}function Y0(){return Y0=T(function*(t,e){const n=$(t);n.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");const r=fo(n);n.lu.add(3),yield wc(n),r&&n._u.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.lu.delete(3),yield hh(n)}),Y0.apply(this,arguments)}function X0(){return X0=T(function*(t,e){const n=$(t);e?(n.lu.delete(2),yield hh(n)):e||(n.lu.add(2),yield wc(n),n._u.set("Unknown"))}),X0.apply(this,arguments)}function Ec(t){return t.mu||(t.mu=function(e,n,r){const i=$(e);return i.tu(),new Sne(n,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(t.datastore,t.asyncQueue,{zr:Pne.bind(null,t),Jr:Rne.bind(null,t),Go:Nne.bind(null,t)}),t.fu.push(function(){var e=T(function*(n){n?(t.mu.No(),j0(t)?U0(t):t._u.set("Unknown")):(yield t.mu.stop(),r2(t))});return function(n){return e.apply(this,arguments)}}())),t.mu}function po(t){return t.gu||(t.gu=function(e,n,r){const i=$(e);return i.tu(),new Ane(n,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(t.datastore,t.asyncQueue,{zr:Fne.bind(null,t),Jr:Une.bind(null,t),Yo:Vne.bind(null,t),Jo:Bne.bind(null,t)}),t.fu.push(function(){var e=T(function*(n){n?(t.gu.No(),yield Ic(t)):(yield t.gu.stop(),t.au.length>0&&(O("RemoteStore",`Stopping write stream with ${t.au.length} pending writes`),t.au=[]))});return function(n){return e.apply(this,arguments)}}())),t.gu}class eC{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new an,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,u=new eC(e,n,o,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new N(A.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tc(t,e){if(Ft("AsyncQueue",`${e}: ${t}`),no(t))return new N(A.UNAVAILABLE,`${e}: ${t}`);throw t}class bc{constructor(e){this.comparator=e?(n,r)=>e(n,r)||j.comparator(n.key,r.key):(n,r)=>j.comparator(n.key,r.key),this.keyedMap=Zd(),this.sortedSet=new Et(this.comparator)}static emptySet(e){return new bc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new bc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class u2{constructor(){this.yu=new Et(j.comparator)}track(e){const n=e.doc.key,r=this.yu.get(n);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(n,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(n):1===e.type&&2===r.type?this.yu=this.yu.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):K():this.yu=this.yu.insert(n,e)}pu(){const e=[];return this.yu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Dc{constructor(e,n,r,i,s,o,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c}static fromInitialDocuments(e,n,r,i){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new Dc(e,n,bc.emptySet(n),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class jne{constructor(){this.Iu=void 0,this.listeners=[]}}class $ne{constructor(){this.queries=new uo(e=>xV(e),qd),this.onlineState="Unknown",this.Tu=new Set}}function nC(){return nC=T(function*(t,e){const n=$(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new jne),i)try{s.Iu=yield n.onListen(r)}catch(o){const u=Tc(o,`Initialization of query '${l0(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,s),s.listeners.push(e),e.Eu(n.onlineState),s.Iu&&e.Au(s.Iu)&&sC(n)}),nC.apply(this,arguments)}function iC(){return iC=T(function*(t,e){const n=$(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),iC.apply(this,arguments)}function zne(t,e){const n=$(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const u of o.listeners)u.Au(i)&&(r=!0);o.Iu=i}}r&&sC(n)}function Hne(t,e,n){const r=$(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function sC(t){t.Tu.forEach(e=>{e.next()})}class oC{constructor(e,n,r){this.query=e,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Dc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),n=!0):this.Vu(e,this.onlineState)&&(this.Su(e),n=!0),this.Pu=e,n}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let n=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),n=!0),n}Vu(e,n){return!e.fromCache||!(this.options.Du&&"Offline"!==n||e.docs.isEmpty()&&"Offline"!==n)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Dc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class d2{constructor(e){this.key=e}}class h2{constructor(e){this.key=e}}class f2{constructor(e,n){this.query=e,this.Fu=n,this.$u=null,this.current=!1,this.Bu=we(),this.mutatedKeys=we(),this.Lu=kV(e),this.Uu=new bc(this.Lu)}get qu(){return this.Fu}Ku(e,n){const r=n?n.Gu:new u2,i=n?n.Uu:this.Uu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,u=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const _=i.get(f),y=d0(this.query,p)?p:null,w=!!_&&this.mutatedKeys.has(_.key),E=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let b=!1;_&&y?_.data.isEqual(y.data)?w!==E&&(r.track({type:3,doc:y}),b=!0):this.Qu(_,y)||(r.track({type:2,doc:y}),b=!0,(c&&this.Lu(y,c)>0||d&&this.Lu(y,d)<0)&&(u=!0)):!_&&y?(r.track({type:0,doc:y}),b=!0):_&&!y&&(r.track({type:1,doc:_}),b=!0,(c||d)&&(u=!0)),b&&(y?(o=o.add(y),s=E?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Uu:o,Gu:r,Oi:u,mutatedKeys:s}}Qu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Gu.pu();s.sort((d,f)=>function(p,_){const y=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return y(p)-y(_)}(d.type,f.type)||this.Lu(d.doc,f.doc)),this.ju(r);const o=n?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,c=u!==this.$u;return this.$u=u,0!==s.length||c?{snapshot:new Dc(this.query,e.Uu,i,s,e.mutatedKeys,0===u,c,!1),zu:o}:{zu:o}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new u2,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(n=>this.Fu=this.Fu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Fu=this.Fu.delete(n)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=we(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const n=[];return e.forEach(r=>{this.Bu.has(r)||n.push(new h2(r))}),this.Bu.forEach(r=>{e.has(r)||n.push(new d2(r))}),n}Ju(e){this.Fu=e.ji,this.Bu=we();const n=this.Ku(e.documents);return this.applyChanges(n,!0)}Yu(){return Dc.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class Wne{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Kne{constructor(e){this.key=e,this.Xu=!1}}class Zne{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new uo(u=>xV(u),qd),this.ec=new Map,this.nc=new Set,this.sc=new Et(j.comparator),this.ic=new Map,this.rc=new T0,this.oc={},this.uc=new Map,this.cc=Ea.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function Qne(t,e){return aC.apply(this,arguments)}function aC(){return aC=T(function*(t,e){const n=MC(t);let r,i;const s=n.tc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Yu();else{const o=yield yc(n.localStore,Hr(e));n.isPrimaryClient&&Cm(n.remoteStore,o);const u=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield uC(n,e,r,"current"===u)}return i}),aC.apply(this,arguments)}function uC(t,e,n,r){return cC.apply(this,arguments)}function cC(){return cC=T(function*(t,e,n,r){t.hc=(f,p,_)=>{return(y=T(function*(w,E,b,M){let P=E.view.Ku(b);P.Oi&&(P=yield Em(w.localStore,E.query,!1).then(({documents:H})=>E.view.Ku(H,P)));const S=M&&M.targetChanges.get(E.targetId),F=E.view.applyChanges(P,w.isPrimaryClient,S);return vC(w,E.targetId,F.zu),F.snapshot}),function(w,E,b,M){return y.apply(this,arguments)})(t,f,p,_);var y};const i=yield Em(t.localStore,e,!0),s=new f2(e,i.ji),o=s.Ku(i.documents),u=Jd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),c=s.applyChanges(o,t.isPrimaryClient,u);vC(t,n,c.zu);const d=new Wne(e,n,s);return t.tc.set(e,d),t.ec.has(n)?t.ec.get(n).push(e):t.ec.set(n,[e]),c.snapshot}),cC.apply(this,arguments)}function Yne(t,e){return lC.apply(this,arguments)}function lC(){return lC=T(function*(t,e){const n=$(t),r=n.tc.get(e),i=n.ec.get(r.targetId);if(i.length>1)return n.ec.set(r.targetId,i.filter(s=>!qd(s,e))),void n.tc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield vc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),fh(n.remoteStore,r.targetId),Cc(n,r.targetId)}).catch(to))):(Cc(n,r.targetId),yield vc(n.localStore,r.targetId,!0))}),lC.apply(this,arguments)}function dC(){return dC=T(function*(t,e,n){const r=kC(t);try{const i=yield function(s,o){const u=$(s),c=yt.now(),d=o.reduce((_,y)=>_.add(y.key),we());let f,p;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let y=ur(),w=we();return u.Ui.getEntries(_,d).next(E=>{y=E,y.forEach((b,M)=>{M.isValidDocument()||(w=w.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,y)).next(E=>{f=E;const b=[];for(const M of o){const P=ate(M,f.get(M.key).overlayedDocument);null!=P&&b.push(new _s(M.key,P,wV(P.value.mapValue),vt.exists(!0)))}return u.mutationQueue.addMutationBatch(_,c,b,o)}).next(E=>{p=E;const b=E.applyToLocalDocumentSet(f,w);return u.documentOverlayCache.saveOverlays(_,E.batchId,b)})}).then(()=>({batchId:p.batchId,changes:KV(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,u){let c=s.oc[s.currentUser.toKey()];c||(c=new Et(ye)),c=c.insert(o,u),s.oc[s.currentUser.toKey()]=c}(r,i.batchId,n),yield ys(r,i.changes),yield Ic(r.remoteStore)}catch(i){const s=Tc(i,"Failed to persist write");n.reject(s)}}),dC.apply(this,arguments)}function p2(t,e){return hC.apply(this,arguments)}function hC(){return hC=T(function*(t,e){const n=$(t);try{const r=yield vne(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ic.get(s);o&&(ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Xu=!0:i.modifiedDocuments.size>0?ae(o.Xu):i.removedDocuments.size>0&&(ae(o.Xu),o.Xu=!1))}),yield ys(n,r,e)}catch(r){yield to(r)}}),hC.apply(this,arguments)}function g2(t,e,n){const r=$(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.tc.forEach((s,o)=>{const u=o.view.Eu(e);u.snapshot&&i.push(u.snapshot)}),function(s,o){const u=$(s);u.onlineState=o;let c=!1;u.queries.forEach((d,f)=>{for(const p of f.listeners)p.Eu(o)&&(c=!0)}),c&&sC(u)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Xne(t,e,n){return fC.apply(this,arguments)}function fC(){return fC=T(function*(t,e,n){const r=$(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ic.get(e),s=i&&i.key;if(s){let o=new Et(j.comparator);o=o.insert(s,st.newNoDocument(s,se.min()));const u=we().add(s),c=new Yd(se.min(),new Map,new Ye(ye),o,u);yield p2(r,c),r.sc=r.sc.remove(s),r.ic.delete(e),wC(r)}else yield vc(r.localStore,e,!1).then(()=>Cc(r,e,n)).catch(to)}),fC.apply(this,arguments)}function ere(t,e){return pC.apply(this,arguments)}function pC(){return pC=T(function*(t,e){const n=$(t),r=e.batch.batchId;try{const i=yield yne(n.localStore,e);yC(n,r,null),_C(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield ys(n,i)}catch(i){yield to(i)}}),pC.apply(this,arguments)}function tre(t,e,n){return gC.apply(this,arguments)}function gC(){return gC=T(function*(t,e,n){const r=$(t);try{const i=yield function(s,o){const u=$(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,o).next(f=>(ae(null!==f),d=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,o)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(r.localStore,e);yC(r,e,n),_C(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield ys(r,i)}catch(i){yield to(i)}}),gC.apply(this,arguments)}function _C(t,e){(t.uc.get(e)||[]).forEach(n=>{n.resolve()}),t.uc.delete(e)}function yC(t,e,n){const r=$(t);let i=r.oc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function Cc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.ec.get(e))t.tc.delete(r),n&&t.Zu.lc(r,n);t.ec.delete(e),t.isPrimaryClient&&t.rc.us(e).forEach(r=>{t.rc.containsKey(r)||m2(t,r)})}function m2(t,e){t.nc.delete(e.path.canonicalString());const n=t.sc.get(e);null!==n&&(fh(t.remoteStore,n),t.sc=t.sc.remove(e),t.ic.delete(n),wC(t))}function vC(t,e,n){for(const r of n)r instanceof d2?(t.rc.addReference(r.key,e),rre(t,r)):r instanceof h2?(O("SyncEngine","Document no longer in limbo: "+r.key),t.rc.removeReference(r.key,e),t.rc.containsKey(r.key)||m2(t,r.key)):K()}function rre(t,e){const n=e.key,r=n.path.canonicalString();t.sc.get(n)||t.nc.has(r)||(O("SyncEngine","New document in limbo: "+n),t.nc.add(r),wC(t))}function wC(t){for(;t.nc.size>0&&t.sc.size<t.maxConcurrentLimboResolutions;){const e=t.nc.values().next().value;t.nc.delete(e);const n=new j(Oe.fromString(e)),r=t.cc.next();t.ic.set(r,new Kne(n)),t.sc=t.sc.insert(n,r),Cm(t.remoteStore,new co(Hr(uc(n.path)),r,2,ar.ot))}}function ys(t,e,n){return IC.apply(this,arguments)}function IC(){return IC=T(function*(t,e,n){const r=$(t),i=[],s=[],o=[];var u;r.tc.isEmpty()||(r.tc.forEach((u,c)=>{o.push(r.hc(c,e,n).then(d=>{if(d){r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,d.fromCache?"not-current":"current"),i.push(d);const f=S0.Vi(c.targetId,d);s.push(f)}}))}),yield Promise.all(o),r.Zu.Go(i),yield(u=T(function*(c,d){const f=$(c);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>C.forEach(d,_=>C.forEach(_.Pi,y=>f.persistence.referenceDelegate.addReference(p,_.targetId,y)).next(()=>C.forEach(_.vi,y=>f.persistence.referenceDelegate.removeReference(p,_.targetId,y)))))}catch(p){if(!no(p))throw p;O("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const _=p.targetId;if(!p.fromCache){const y=f.$i.get(_),E=y.withLastLimboFreeSnapshotVersion(y.snapshotVersion);f.$i=f.$i.insert(_,E)}}}),function(c,d){return u.apply(this,arguments)})(r.localStore,s))}),IC.apply(this,arguments)}function ire(t,e){return EC.apply(this,arguments)}function EC(){return EC=T(function*(t,e){const n=$(t);if(!n.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());const r=yield HB(n.localStore,e);n.currentUser=e,(i=n).uc.forEach(o=>{o.forEach(u=>{u.reject(new N(A.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ys(n,r.Ki)}var i}),EC.apply(this,arguments)}function sre(t,e){const n=$(t),r=n.ic.get(e);if(r&&r.Xu)return we().add(r.key);{let i=we();const s=n.ec.get(e);if(!s)return i;for(const o of s){const u=n.tc.get(o);i=i.unionWith(u.view.qu)}return i}}function MC(t){const e=$(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=p2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sre.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xne.bind(null,e),e.Zu.Go=zne.bind(null,e.eventManager),e.Zu.lc=Hne.bind(null,e.eventManager),e}function kC(t){const e=$(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ere.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tre.bind(null,e),e}class pre{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return T(function*(){n.wt=dh(e.databaseInfo.databaseId),n.sharedClientState=n.dc(e),n.persistence=n._c(e),yield n.persistence.start(),n.localStore=n.wc(e),n.gcScheduler=n.mc(e,n.localStore),n.indexBackfillerScheduler=n.gc(e,n.localStore)})()}mc(e,n){return null}gc(e,n){return null}wc(e){return function zB(t,e,n,r){return new _ne(t,e,n,r)}(this.persistence,new $B,e.initialUser,this.wt)}_c(e){return new UB(wm.Ms,this.wt)}dc(e){return new JB}terminate(){var e=this;return T(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class PC{initialize(e,n){var r=this;return T(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>g2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=ire.bind(null,r.syncEngine),yield function J0(t,e){return X0.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new $ne}createDatastore(e){const n=dh(e.databaseInfo.databaseId),r=new Cne(e.databaseInfo);return new xne(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=u=>g2(this.syncEngine,u,0),o=XB.V()?new XB:new Tne,new kne(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,u,c,d){const f=new Zne(r,i,s,o,u,c);return d&&(f.ac=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=T(function*(n){const r=$(n);O("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield wc(r),r.du.shutdown(),r._u.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}class Am{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class wre{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=on.UNAUTHENTICATED,this.clientId=rV.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=T(function*(u){O("FirestoreClient","Received user=",u.uid),yield s.authCredentialListener(u),s.user=u});return function(u){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(O("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return T(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new N(A.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new an;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(T(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Tc(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function w2(t,e){return RC.apply(this,arguments)}function RC(){return RC=T(function*(t,e){t.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=T(function*(s){r.isEqual(s)||(yield HB(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}),RC.apply(this,arguments)}function I2(t,e){return NC.apply(this,arguments)}function NC(){return NC=T(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield OC(t);O("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>a2(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>a2(e.remoteStore,s)),t.onlineComponents=e}),NC.apply(this,arguments)}function OC(t){return LC.apply(this,arguments)}function LC(){return LC=T(function*(t){return t.offlineComponents||(O("FirestoreClient","Using default OfflineComponentProvider"),yield w2(t,new pre)),t.offlineComponents}),LC.apply(this,arguments)}function xm(t){return FC.apply(this,arguments)}function FC(){return FC=T(function*(t){return t.onlineComponents||(O("FirestoreClient","Using default OnlineComponentProvider"),yield I2(t,new PC)),t.onlineComponents}),FC.apply(this,arguments)}function Sc(t){return UC.apply(this,arguments)}function UC(){return UC=T(function*(t){const e=yield xm(t),n=e.eventManager;return n.onListen=Qne.bind(null,e.syncEngine),n.onUnlisten=Yne.bind(null,e.syncEngine),n}),UC.apply(this,arguments)}const C2=new Map;function jC(t,e,n){if(!n)throw new N(A.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function S2(t){if(!j.isDocumentKey(t))throw new N(A.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function A2(t){if(j.isDocumentKey(t))throw new N(A.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Mm(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(n=t).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof t?"a function":K()}function Fe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new N(A.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mm(t);throw new N(A.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class M2{constructor(e){var n;if(void 0===e.host){if(void 0!==e.ssl)throw new N(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new N(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function xre(t,e,n,r){if(!0===e&&!0===r)throw new N(A.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ph{constructor(e,n,r){this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new M2({}),this._settingsFrozen=!1,e instanceof io?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new N(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new io(i.options.projectId)}(e))}get app(){if(!this._app)throw new N(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new N(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new M2(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new See;switch(n.type){case"gapi":const r=n.client;return ae(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new kee(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new N(A.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=C2.get(e);n&&(O("ComponentProvider","Removing Datastore"),C2.delete(e),n.terminate())}(this),Promise.resolve()}}class Mt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}}class On{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new On(this.firestore,e,this._query)}}class Oi extends On{constructor(e,n,r){super(e,n,uc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new j(e))}withConverter(e){return new Oi(this.firestore,e,this._path)}}function Mre(t,e,...n){if(t=$r(t),jC("collection","path",e),t instanceof ph){const r=Oe.fromString(e,...n);return A2(r),new Oi(t,null,r)}{if(!(t instanceof Mt||t instanceof Oi))throw new N(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return A2(r),new Oi(t.firestore,null,r)}}function k2(t,e,...n){if(t=$r(t),1===arguments.length&&(e=rV.I()),jC("doc","path",e),t instanceof ph){const r=Oe.fromString(e,...n);return S2(r),new Mt(t,null,new j(r))}{if(!(t instanceof Mt||t instanceof Oi))throw new N(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return S2(r),new Mt(t.firestore,t instanceof Oi?t.converter:null,new j(r))}}class Pre{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new L0(this,"async_queue_retry"),this.Kc=()=>{const n=Dm();n&&O("AsyncQueue","Visibility state changed to "+n.visibilityState),this.So.Eo()};const e=Dm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const n=Dm();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const n=new an;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return T(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(n){if(!no(n))throw n;O("AsyncQueue","Operation failed with retryable error: "+n)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const n=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,Ft("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=n,n}enqueueAfterDelay(e,n,r){this.Gc(),this.qc.indexOf(e)>-1&&(n=0);const i=eC.createAndSchedule(this,e,n,r,s=>this.Wc(s));return this.$c.push(i),i}Gc(){this.Bc&&K()}verifyOperationInProgress(){}zc(){var e=this;return T(function*(){let n;do{n=e.Oc,yield n}while(n!==e.Oc)})()}Hc(e){for(const n of this.$c)if(n.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.$c)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const n=this.$c.indexOf(e);this.$c.splice(n,1)}}function $C(t){return function(e,n){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(t)}class ft extends ph{constructor(e,n,r){super(e,n,r),this.type="firestore",this._queue=new Pre,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||P2(this),this._firestoreClient.terminate()}}function Nre(t=dN()){return Yp(t,"firestore").getImmediate()}function Yt(t){return t._firestoreClient||P2(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function P2(t){var e;const n=t._freezeSettings(),r=(s=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new jee(t._databaseId,s,t._persistenceKey,(u=n).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,u.useFetchStreams));var s,u;t._firestoreClient=new wre(t._authCredentials,t._appCheckCredentials,t._queue,r)}class Ac{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new N(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ba{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ba(Qt.fromBase64String(e))}catch(n){throw new N(A.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ba(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class O2{constructor(e){this._methodName=e}}class zC{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new N(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new N(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}}const Ore=/^__.*__$/;class Lre{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new _s(e,this.data,this.fieldMask,n,this.fieldTransforms):new hc(e,this.data,n,this.fieldTransforms)}}function F2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}class km{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new km(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return Rm(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(F2(this.Zc)&&Ore.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class Fre{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.wt=r||dh(e)}aa(e,n,r,i=!1){return new km({Zc:e,methodName:n,ca:r,path:Vt.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function xc(t){const e=t._freezeSettings(),n=dh(t._databaseId);return new Fre(t._databaseId,!!e.ignoreUndefinedProperties,n)}function HC(t,e,n,r,i,s={}){const o=t.aa(s.merge||s.mergeFields?2:0,e,n,i);qC("Data must be an object, but it was:",o,r);const u=$2(r,o);let c,d;if(s.merge)c=new Ar(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const _=WC(e,p,n);if(!o.contains(_))throw new N(A.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);H2(f,_)||f.push(_)}c=new Ar(f),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new Lre(new Tn(u),c,d)}function Da(t,e){if(z2(t=$r(t)))return qC("Unsupported field value:",e,t),$2(t,e);if(t instanceof O2)return function(n,r){if(!F2(r.Zc))throw r.oa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let u=Da(o,r.ra(s));null==u&&(u={nullValue:"NULL_VALUE"}),i.push(u),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if(null===(n=$r(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return NV(r.wt,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const i=yt.fromDate(n);return{timestampValue:Xd(r.wt,i)}}if(n instanceof yt){const i=new yt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Xd(r.wt,i)}}if(n instanceof zC)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ba)return{bytesValue:tB(r.wt,n._byteString)};if(n instanceof Mt){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.oa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:f0(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.oa(`Unsupported field value: ${Mm(n)}`)}(t,e)}function $2(t,e){const n={};return lV(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ca(t,(r,i)=>{const s=Da(i,e.ea(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function z2(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof yt||t instanceof zC||t instanceof ba||t instanceof Mt||t instanceof O2)}function qC(t,e,n){if(!z2(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Mm(n);throw e.oa("an object"===r?t+" a custom object":t+" "+r)}var r}function WC(t,e,n){if((e=$r(e))instanceof Ac)return e._internalPath;if("string"==typeof e)return Pm(t,e);throw Rm("Field path arguments must be of type string or ",t,!1,void 0,n)}const jre=new RegExp("[~\\*/\\[\\]]");function Pm(t,e,n){if(e.search(jre)>=0)throw Rm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ac(...e.split("."))._internalPath}catch{throw Rm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rm(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new N(A.INVALID_ARGUMENT,u+t+c)}function H2(t,e){return t.some(n=>n.isEqual(e))}class KC{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new $re(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Nm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class $re extends KC{data(){return super.data()}}function Nm(t,e){return"string"==typeof e?Pm(t,e):e instanceof Ac?e._internalPath:e._delegate._internalPath}class Ca{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mc extends KC{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Om(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Nm("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Om extends Mc{data(e={}){return super.data(e)}}class kc{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ca(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Om(this._firestore,this._userDataWriter,r.key,r,new Ca(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new N(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new Om(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ca(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const u=new Om(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ca(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,d=-1;return 0!==o.type&&(c=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),d=s.indexOf(o.doc.key)),{type:zre(o.type),doc:u,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function zre(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}class Sa extends class Wre{convertValue(e,n="none"){switch(da(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(la(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw K()}}convertObject(e,n){const r={};return ca(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new zC(Tt(e.latitude),Tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=hV(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Bd(e));default:return null}}convertTimestamp(e){const n=ro(e);return new yt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Oe.fromString(e);ae(dB(r));const i=new io(r.get(1),r.get(3)),s=new j(r.popFirst(5));return i.isEqual(n)||Ft(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}{constructor(e){super(),this.firestore=e}convertBytes(e){return new ba(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,n)}}function Zre(t){return mh(Fe(t.firestore,ft),[new fc(t._key,vt.none())])}function Qre(t,e){const n=Fe(t.firestore,ft),r=k2(t),i=function ZC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}(t.converter,e);return mh(n,[HC(xc(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,vt.exists(!1))]).then(()=>r)}function mh(t,e){return function(n,r){const i=new an;return n.asyncQueue.enqueueAndForget(T(function*(){return function Jne(t,e,n){return dC.apply(this,arguments)}(yield function BC(t){return xm(t).then(e=>e.syncEngine)}(n),r,i)})),i.promise}(Yt(t),e)}!function(t,e=!0){rc="9.8.3",qn(new Rn("firestore",(n,{options:r})=>{const i=n.getProvider("app").getImmediate(),s=new ft(i,new xee(n.getProvider("auth-internal")),new Pee(n.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),xt(eV,"3.4.10",t),xt(eV,"3.4.10","esm2017")}();var Xre={includeMetadataChanges:!1};function YC(t,e){return void 0===e&&(e=Xre),new Xe(function(n){var r=function Yre(t,...e){var n,r,i;t=$r(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||$C(e[o])||(s=e[o],o++);const u={includeMetadataChanges:s.includeMetadataChanges};if($C(e[o])){const p=e[o];e[o]=null===(n=p.next)||void 0===n?void 0:n.bind(p),e[o+1]=null===(r=p.error)||void 0===r?void 0:r.bind(p),e[o+2]=null===(i=p.complete)||void 0===i?void 0:i.bind(p)}let c,d,f;if(t instanceof Mt)d=Fe(t.firestore,ft),f=uc(t._key.path),c={next:p=>{e[o]&&e[o](function QC(t,e,n){const r=n.docs.get(e._key),i=new Sa(t);return new Mc(t,i,e._key,r,new Ca(n.hasPendingWrites,n.fromCache),e.converter)}(d,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Fe(t,On);d=Fe(p.firestore,ft),f=p._query;const _=new Sa(d);c={next:y=>{e[o]&&e[o](new kc(d,_,p,y))},error:e[o+1],complete:e[o+2]},function G2(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new N(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query)}return function(p,_,y,w){const E=new Am(w),b=new oC(_,E,y);return p.asyncQueue.enqueueAndForget(T(function*(){return function tC(t,e){return nC.apply(this,arguments)}(yield Sc(p),b)})),()=>{E.Tc(),p.asyncQueue.enqueueAndForget(T(function*(){return function rC(t,e){return iC.apply(this,arguments)}(yield Sc(p),b)}))}}(Yt(d),f,u,c)}(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function tie(t,e){return void 0===e&&(e={}),function eie(t){return YC(t,{includeMetadataChanges:!0})}(t).pipe(Ve(function(n){return eU(n,e)}))}function eU(t,e){void 0===e&&(e={});var n=t.data();return!t.exists()||"object"!=typeof n||null===n||e.idField&&(n[e.idField]=t.id),n}function aie(t,e){return void 0===e&&(e={}),function oie(t){return YC(t,{includeMetadataChanges:!0}).pipe(Ve(function(e){return e.docs}))}(t).pipe(Ve(function(n){return n.map(function(r){return eU(r,e)})}))}class _h{constructor(e){return e}}const iU="firestore",eS=new me("angularfire2.firestore-instances");function lie(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new _h(r)}}const die={provide:class uie{constructor(){return GE(iU)}},deps:[[new Gt,eS]]},hie={provide:_h,useFactory:function cie(t,e){const n=function HE(t,e,n){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===n);if(1===s.length)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}(iU,t,e);return n&&new _h(n)},deps:[[new Gt,eS],Zu]};let fie=(()=>{class t{constructor(){xt("angularfire",LE.full,"fst")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Kr({type:t}),t.\u0275inj=Xt({providers:[hie,die]}),t})();function pie(t,...e){return{ngModule:fie,providers:[{provide:eS,useFactory:lie(t),multi:!0,deps:[mt,$n,pO,gO,[new Gt,gL],[new Gt,VL],...e]}]}}const gie=Zs(aie,!0),mie=Zs(tie,!0),_ie=Zs(Qre,!0),sU=Zs(Mre,!0),yie=Zs(Zre,!0),oU=Zs(k2,!0),vie=Zs(Nre,!0);let wie=(()=>{class t{constructor(n){this.firestore=n}getNotes(){const n=sU(this.firestore,"locations");return gie(n,{idField:"id"})}getNoteById(n){const r=oU(this.firestore,`notes/${n}`);return mie(r,{idField:"id"})}addNote(n){const r=sU(this.firestore,"locations");return _ie(r,n)}deleteNote(n){const r=oU(this.firestore,`notes/${n.id}`);return yie(r)}}return t.\u0275fac=function(n){return new(n||t)(Q(_h))},t.\u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Iie(t,e){if(1&t&&(Vs(0,"p"),Qf(1),Bs()),2&t){const n=EM();gu(1),iv(n.notes.length)}}function Eie(t,e){if(1&t&&(Vs(0,"li")(1,"label"),Qf(2),function Yk(t,e){const n=Re();let r;const i=t+22;n.firstCreatePass?(r=function Bq(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=gi(r.type)),o=Xn(Y);try{const u=_f(!1),c=s();return _f(u),function vH(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,k(),i,c),c}finally{Xn(o)}}(3,"date"),Bs(),Vs(4,"label"),Qf(5),Bs()()),2&t){const n=e.$implicit;gu(2),Yf(" ",Jk(3,3,n.timestamp,"h:mm:ss a ")," "),gu(3),sv(" ",n.latitude," ",n.longitude," ")}}let Tie=(()=>{class t{constructor(n,r,i){this.firestore=n,this.dataService=r,this.cd=i,this.title="ngTrack",this.notes=[],this.dataService.getNotes().subscribe(s=>{this.notes=s,this.lastLocation=this.notes[this.notes.length-1],this.cd.detectChanges()})}ngAfterViewInit(){this.loadMap()}getCurrentPosition(){return console.log("ttttttttttt"),new Xe(n=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(r=>{this.lastLocation=this.notes[this.notes.length-1],this.lastLocation&&this.lastLocation.latitude!==r.coords.latitude&&this.lastLocation.longitude!==r.coords.longitude&&(n.next({latitude:r.coords.latitude,longitude:r.coords.longitude,accuracy:r.coords.accuracy}),this.dataService.addNote({timestamp:r.timestamp,accuracy:r.coords.accuracy,altitude:r.coords.altitude,altitudeAccuracy:r.coords.altitudeAccuracy,heading:r.coords.heading,latitude:r.coords.latitude,longitude:r.coords.longitude,speed:r.coords.speed})),n.complete(),this.dataService.getNotes().subscribe(i=>{this.notes=i,this.cd.detectChanges()})}):n.error()})}loadMap(){this.map=Ws.map("map").setView([0,0],1),Ws.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:"test",maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:Uw_mapbox_accessToken}).addTo(this.map),setTimeout(()=>{var n=Ws.featureGroup();const r=Ws.icon({iconUrl:"https://res.cloudinary.com/rodrigokamada/image/upload/v1637581626/Blog/angular-leaflet/marker-icon.png",shadowUrl:"https://res.cloudinary.com/rodrigokamada/image/upload/v1637581626/Blog/angular-leaflet/marker-shadow.png",popupAnchor:[13,0]});for(var i=0;i<this.notes.length-1;i++){var s=Ws.marker([Number(this.notes[i].latitude),Number(this.notes[i].longitude)],{icon:r}),o=Ws.polyline([[Number(this.notes[i].latitude),Number(this.notes[i].longitude)],[Number(this.notes[i+1].latitude),Number(this.notes[i+1].longitude)]]);n.addLayer(s),n.addLayer(o)}this.map.fitBounds(n.getBounds()),this.map.addLayer(n),n.on("snakestart snake snakeend",function(u){console.log("ev",u),console.log(u.type)})},3e3),this.lastLocation=this.notes[this.notes.length-1],this.secondLastLocation=this.notes[this.notes.length-2],console.log(" this.secondLastLocation",this.secondLastLocation),setInterval(()=>{this.getCurrentPosition().subscribe(n=>{const r=Ws.icon({iconUrl:"https://res.cloudinary.com/rodrigokamada/image/upload/v1637581626/Blog/angular-leaflet/marker-icon.png",shadowUrl:"https://res.cloudinary.com/rodrigokamada/image/upload/v1637581626/Blog/angular-leaflet/marker-shadow.png",popupAnchor:[13,0]});this.map.flyTo([n.latitude,n.longitude],9),Ws.marker([n.latitude,n.longitude],{icon:r}).bindPopup("Angular Leaflet").addTo(this.map)})},3e3)}}return t.\u0275fac=function(n){return new(n||t)(Y(_h),Y(wie),Y(fp))},t.\u0275cmp=Rr({type:t,selectors:[["app-root"]],decls:5,vars:2,consts:[[1,"container","py-3"],[4,"ngIf"],[2,"overflow-y","scroll","height","100px"],[4,"ngFor","ngForOf"],["id","map"]],template:function(n,r){1&n&&(Vs(0,"div",0),Yy(1,Iie,2,1,"p",1),Vs(2,"ul",2),Yy(3,Eie,6,6,"li",3),Bs(),qf(4,"div",4),Bs()),2&n&&(gu(1),Gf("ngIf",r.notes),gu(2),Gf("ngForOf",r.notes))},dependencies:[fR,gR,yR],styles:["#map[_ngcontent-%COMP%]{height:400px;width:100%;max-width:600px}"]}),t})(),bie=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Kr({type:t,bootstrap:[Tie]}),t.\u0275inj=Xt({providers:[],imports:[u4,qK,lQ(()=>dQ(Uw_firebaseConfig)),pie(()=>vie())]}),t})();(function GW(){$P=!1})(),a4().bootstrapModule(bie).catch(t=>console.error(t))},407:function(vh,wh){!function(V){"use strict";function Be(a){var l,h,g,m;for(h=1,g=arguments.length;h<g;h++)for(l in m=arguments[h])a[l]=m[l];return a}var vs=Object.create||function(){function a(){}return function(l){return a.prototype=l,new a}}();function $e(a,l){var h=Array.prototype.slice;if(a.bind)return a.bind.apply(a,h.call(arguments,1));var g=h.call(arguments,2);return function(){return a.apply(l,g.length?g.concat(h.call(arguments)):arguments)}}var Dn=0;function xe(a){return"_leaflet_id"in a||(a._leaflet_id=++Dn),a._leaflet_id}function Pc(a,l,h){var g,m,v,I;return I=function(){g=!1,m&&(v.apply(h,m),m=!1)},v=function(){g?m=arguments:(a.apply(h,arguments),setTimeout(I,l),g=!0)},v}function ws(a,l,h){var g=l[1],m=l[0],v=g-m;return a===g&&h?a:((a-m)%v+v)%v+m}function Ze(){return!1}function Ln(a,l){if(!1===l)return a;var h=Math.pow(10,void 0===l?6:l);return Math.round(a*h)/h}function xa(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function Li(a){return xa(a).split(/\s+/)}function ot(a,l){for(var h in Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?vs(a.options):{}),l)a.options[h]=l[h];return a.options}function Ih(a,l,h){var g=[];for(var m in a)g.push(encodeURIComponent(h?m.toUpperCase():m)+"="+encodeURIComponent(a[m]));return(l&&-1!==l.indexOf("?")?"&":"?")+g.join("&")}var Fm=/\{ *([\w_ -]+) *\}/g;function Ma(a,l){return a.replace(Fm,function(h,g){var m=l[g];if(void 0===m)throw new Error("No value provided for variable "+h);return"function"==typeof m&&(m=m(l)),m})}var Jt=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};function Is(a,l){for(var h=0;h<a.length;h++)if(a[h]===l)return h;return-1}var ka="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function go(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var Eh=0;function Pa(a){var l=+new Date,h=Math.max(0,16-(l-Eh));return Eh=l+h,window.setTimeout(a,h)}var Rc=window.requestAnimationFrame||go("RequestAnimationFrame")||Pa,mo=window.cancelAnimationFrame||go("CancelAnimationFrame")||go("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function Ut(a,l,h){if(!h||Rc!==Pa)return Rc.call(window,$e(a,l));a.call(l)}function Jn(a){a&&mo.call(window,a)}var Nc={__proto__:null,extend:Be,create:vs,bind:$e,get lastId(){return Dn},stamp:xe,throttle:Pc,wrapNum:ws,falseFn:Ze,formatNum:Ln,trim:xa,splitWords:Li,setOptions:ot,getParamString:Ih,template:Ma,isArray:Jt,indexOf:Is,emptyImageUrl:ka,requestFn:Rc,cancelFn:mo,requestAnimFrame:Ut,cancelAnimFrame:Jn};function Gr(){}Gr.extend=function(a){var l=function(){ot(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=l.__super__=this.prototype,g=vs(h);for(var m in g.constructor=l,l.prototype=g,this)Object.prototype.hasOwnProperty.call(this,m)&&"prototype"!==m&&"__super__"!==m&&(l[m]=this[m]);return a.statics&&Be(l,a.statics),a.includes&&(function Oc(a){if(!(typeof L>"u")&&L&&L.Mixin){a=Jt(a)?a:[a];for(var l=0;l<a.length;l++)a[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(a.includes),Be.apply(null,[g].concat(a.includes))),Be(g,a),delete g.statics,delete g.includes,g.options&&(g.options=h.options?vs(h.options):{},Be(g.options,a.options)),g._initHooks=[],g.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var v=0,I=g._initHooks.length;v<I;v++)g._initHooks[v].call(this)}},l},Gr.include=function(a){var l=this.prototype.options;return Be(this.prototype,a),a.options&&(this.prototype.options=l,this.mergeOptions(a.options)),this},Gr.mergeOptions=function(a){return Be(this.prototype.options,a),this},Gr.addInitHook=function(a){var l=Array.prototype.slice.call(arguments,1),h="function"==typeof a?a:function(){this[a].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};var bt={on:function(a,l,h){if("object"==typeof a)for(var g in a)this._on(g,a[g],l);else for(var m=0,v=(a=Li(a)).length;m<v;m++)this._on(a[m],l,h);return this},off:function(a,l,h){if(arguments.length)if("object"==typeof a)for(var g in a)this._off(g,a[g],l);else{a=Li(a);for(var m=1===arguments.length,v=0,I=a.length;v<I;v++)m?this._off(a[v]):this._off(a[v],l,h)}else delete this._events;return this},_on:function(a,l,h){if("function"==typeof l){this._events=this._events||{};var g=this._events[a];g||(this._events[a]=g=[]),h===this&&(h=void 0);for(var m={fn:l,ctx:h},v=g,I=0,D=v.length;I<D;I++)if(v[I].fn===l&&v[I].ctx===h)return;v.push(m)}else console.warn("wrong listener type: "+typeof l)},_off:function(a,l,h){var g,m,v;if(this._events&&(g=this._events[a])){if(1===arguments.length){if(this._firingCount)for(m=0,v=g.length;m<v;m++)g[m].fn=Ze;return void delete this._events[a]}if(h===this&&(h=void 0),"function"!=typeof l)return void console.warn("wrong listener type: "+typeof l);for(m=0,v=g.length;m<v;m++){var I=g[m];if(I.ctx===h&&I.fn===l)return this._firingCount&&(I.fn=Ze,this._events[a]=g=g.slice()),void g.splice(m,1)}console.warn("listener not found")}},fire:function(a,l,h){if(!this.listens(a,h))return this;var g=Be({},l,{type:a,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var m=this._events[a];if(m){this._firingCount=this._firingCount+1||1;for(var v=0,I=m.length;v<I;v++){var D=m[v];D.fn.call(D.ctx||this,g)}this._firingCount--}}return h&&this._propagateEvent(g),this},listens:function(a,l){"string"!=typeof a&&console.warn('"string" type argument expected');var h=this._events&&this._events[a];if(h&&h.length)return!0;if(l)for(var g in this._eventParents)if(this._eventParents[g].listens(a,l))return!0;return!1},once:function(a,l,h){if("object"==typeof a){for(var g in a)this.once(g,a[g],l);return this}var m=$e(function(){this.off(a,l,h).off(a,m,h)},this);return this.on(a,l,h).on(a,m,h)},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[xe(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[xe(a)],this},_propagateEvent:function(a){for(var l in this._eventParents)this._eventParents[l].fire(a.type,Be({layer:a.target,propagatedFrom:a.target},a),!0)}};bt.addEventListener=bt.on,bt.removeEventListener=bt.clearAllEventListeners=bt.off,bt.addOneTimeEventListener=bt.once,bt.fireEvent=bt.fire,bt.hasEventListeners=bt.listens;var Ra=Gr.extend(bt);function ue(a,l,h){this.x=h?Math.round(a):a,this.y=h?Math.round(l):l}var Xe=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};function Ie(a,l,h){return a instanceof ue?a:Jt(a)?new ue(a[0],a[1]):null==a?a:"object"==typeof a&&"x"in a&&"y"in a?new ue(a.x,a.y):new ue(a,l,h)}function at(a,l){if(a)for(var h=l?[a,l]:a,g=0,m=h.length;g<m;g++)this.extend(h[g])}function lr(a,l){return!a||a instanceof at?a:new at(a,l)}function Cn(a,l){if(a)for(var h=l?[a,l]:a,g=0,m=h.length;g<m;g++)this.extend(h[g])}function qe(a,l){return a instanceof Cn?a:new Cn(a,l)}function ze(a,l,h){if(isNaN(a)||isNaN(l))throw new Error("Invalid LatLng object: ("+a+", "+l+")");this.lat=+a,this.lng=+l,void 0!==h&&(this.alt=+h)}function et(a,l,h){return a instanceof ze?a:Jt(a)&&"object"!=typeof a[0]?3===a.length?new ze(a[0],a[1],a[2]):2===a.length?new ze(a[0],a[1]):null:null==a?a:"object"==typeof a&&"lat"in a?new ze(a.lat,"lng"in a?a.lng:a.lon,a.alt):void 0===l?null:new ze(a,l,h)}ue.prototype={clone:function(){return new ue(this.x,this.y)},add:function(a){return this.clone()._add(Ie(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(Ie(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new ue(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new ue(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Xe(this.x),this.y=Xe(this.y),this},distanceTo:function(a){var l=(a=Ie(a)).x-this.x,h=a.y-this.y;return Math.sqrt(l*l+h*h)},equals:function(a){return(a=Ie(a)).x===this.x&&a.y===this.y},contains:function(a){return a=Ie(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+Ln(this.x)+", "+Ln(this.y)+")"}},at.prototype={extend:function(a){return a=Ie(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new ue((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new ue(this.min.x,this.max.y)},getTopRight:function(){return new ue(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var l,h;return(a="number"==typeof a[0]||a instanceof ue?Ie(a):lr(a))instanceof at?(l=a.min,h=a.max):l=h=a,l.x>=this.min.x&&h.x<=this.max.x&&l.y>=this.min.y&&h.y<=this.max.y},intersects:function(a){a=lr(a);var l=this.min,h=this.max,g=a.min,m=a.max;return m.x>=l.x&&g.x<=h.x&&m.y>=l.y&&g.y<=h.y},overlaps:function(a){a=lr(a);var l=this.min,h=this.max,g=a.min,m=a.max;return m.x>l.x&&g.x<h.x&&m.y>l.y&&g.y<h.y},isValid:function(){return!(!this.min||!this.max)}},Cn.prototype={extend:function(a){var g,m,l=this._southWest,h=this._northEast;if(a instanceof ze)g=a,m=a;else{if(!(a instanceof Cn))return a?this.extend(et(a)||qe(a)):this;if(m=a._northEast,!(g=a._southWest)||!m)return this}return l||h?(l.lat=Math.min(g.lat,l.lat),l.lng=Math.min(g.lng,l.lng),h.lat=Math.max(m.lat,h.lat),h.lng=Math.max(m.lng,h.lng)):(this._southWest=new ze(g.lat,g.lng),this._northEast=new ze(m.lat,m.lng)),this},pad:function(a){var l=this._southWest,h=this._northEast,g=Math.abs(l.lat-h.lat)*a,m=Math.abs(l.lng-h.lng)*a;return new Cn(new ze(l.lat-g,l.lng-m),new ze(h.lat+g,h.lng+m))},getCenter:function(){return new ze((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ze(this.getNorth(),this.getWest())},getSouthEast:function(){return new ze(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){a="number"==typeof a[0]||a instanceof ze||"lat"in a?et(a):qe(a);var g,m,l=this._southWest,h=this._northEast;return a instanceof Cn?(g=a.getSouthWest(),m=a.getNorthEast()):g=m=a,g.lat>=l.lat&&m.lat<=h.lat&&g.lng>=l.lng&&m.lng<=h.lng},intersects:function(a){a=qe(a);var l=this._southWest,h=this._northEast,g=a.getSouthWest(),m=a.getNorthEast();return m.lat>=l.lat&&g.lat<=h.lat&&m.lng>=l.lng&&g.lng<=h.lng},overlaps:function(a){a=qe(a);var l=this._southWest,h=this._northEast,g=a.getSouthWest(),m=a.getNorthEast();return m.lat>l.lat&&g.lat<h.lat&&m.lng>l.lng&&g.lng<h.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,l){return!!a&&(a=qe(a),this._southWest.equals(a.getSouthWest(),l)&&this._northEast.equals(a.getNorthEast(),l))},isValid:function(){return!(!this._southWest||!this._northEast)}},ze.prototype={equals:function(a,l){return!!a&&(a=et(a),Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng))<=(void 0===l?1e-9:l))},toString:function(a){return"LatLng("+Ln(this.lat,a)+", "+Ln(this.lng,a)+")"},distanceTo:function(a){return tt.distance(this,et(a))},wrap:function(){return tt.wrapLatLng(this)},toBounds:function(a){var l=180*a/40075017,h=l/Math.cos(Math.PI/180*this.lat);return qe([this.lat-l,this.lng-h],[this.lat+l,this.lng+h])},clone:function(){return new ze(this.lat,this.lng,this.alt)}};var a,Je={latLngToPoint:function(a,l){var h=this.projection.project(a),g=this.scale(l);return this.transformation._transform(h,g)},pointToLatLng:function(a,l){var h=this.scale(l),g=this.transformation.untransform(a,h);return this.projection.unproject(g)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var l=this.projection.bounds,h=this.scale(a);return new at(this.transformation.transform(l.min,h),this.transformation.transform(l.max,h))},infinite:!1,wrapLatLng:function(a){var l=this.wrapLng?ws(a.lng,this.wrapLng,!0):a.lng;return new ze(this.wrapLat?ws(a.lat,this.wrapLat,!0):a.lat,l,a.alt)},wrapLatLngBounds:function(a){var l=a.getCenter(),h=this.wrapLatLng(l),g=l.lat-h.lat,m=l.lng-h.lng;if(0===g&&0===m)return a;var v=a.getSouthWest(),I=a.getNorthEast();return new Cn(new ze(v.lat-g,v.lng-m),new ze(I.lat-g,I.lng-m))}},tt=Be({},Je,{wrapLng:[-180,180],R:6371e3,distance:function(a,l){var h=Math.PI/180,g=a.lat*h,m=l.lat*h,v=Math.sin((l.lat-a.lat)*h/2),I=Math.sin((l.lng-a.lng)*h/2),D=v*v+Math.cos(g)*Math.cos(m)*I*I,x=2*Math.atan2(Math.sqrt(D),Math.sqrt(1-D));return this.R*x}}),Ve={R:6378137,MAX_LATITUDE:85.0511287798,project:function(a){var l=Math.PI/180,h=this.MAX_LATITUDE,g=Math.max(Math.min(h,a.lat),-h),m=Math.sin(g*l);return new ue(this.R*a.lng*l,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(a){var l=180/Math.PI;return new ze((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*l,a.x*l/this.R)},bounds:(a=6378137*Math.PI,new at([-a,-a],[a,a]))};function _o(a,l,h,g){if(Jt(a))return this._a=a[0],this._b=a[1],this._c=a[2],void(this._d=a[3]);this._a=a,this._b=l,this._c=h,this._d=g}function Na(a,l,h,g){return new _o(a,l,h,g)}_o.prototype={transform:function(a,l){return this._transform(a.clone(),l)},_transform:function(a,l){return a.x=(l=l||1)*(this._a*a.x+this._b),a.y=l*(this._c*a.y+this._d),a},untransform:function(a,l){return new ue((a.x/(l=l||1)-this._b)/this._a,(a.y/l-this._d)/this._c)}};var Oa=Be({},tt,{code:"EPSG:3857",projection:Ve,transformation:function(){var a=.5/(Math.PI*Ve.R);return Na(a,.5,-a,.5)}()}),bh=Be({},Oa,{code:"EPSG:900913"});function Vm(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Bm(a,l){var g,m,v,I,D,x,h="";for(g=0,v=a.length;g<v;g++){for(m=0,I=(D=a[g]).length;m<I;m++)h+=(m?"L":"M")+(x=D[m]).x+" "+x.y;h+=l?Z.svg?"z":"x":""}return h||"M0 0"}var Dh=document.documentElement.style,La="ActiveXObject"in window,aS=La&&!document.addEventListener,Lc="msLaunchUri"in navigator&&!("documentMode"in document),Ch=xr("webkit"),Fc=xr("android"),Sh=xr("android 2")||xr("android 3"),uS=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),cS=Fc&&xr("Google")&&uS<537&&!("AudioNode"in window),Ah=!!window.opera,ci=!Lc&&xr("chrome"),xh=xr("gecko")&&!Ch&&!Ah&&!La,lS=!ci&&xr("safari"),Mh=xr("phantom"),Um="OTransition"in Dh,jm=0===navigator.platform.indexOf("Win"),$m=La&&"transition"in Dh,kh="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Sh,zm="MozPerspective"in Dh,dS=!window.L_DISABLE_3D&&($m||kh||zm)&&!Um&&!Mh,Fa=typeof orientation<"u"||xr("mobile"),Ph=Fa&&Ch,Rh=Fa&&kh,Vc=!window.PointerEvent&&window.MSPointerEvent,Bc=!(!window.PointerEvent&&!Vc),Uc="ontouchstart"in window||!!window.TouchEvent,Hm=!window.L_NO_TOUCH&&(Uc||Bc),Nh=Fa&&Ah,Oh=Fa&&xh,Lh=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Fh=function(){var a=!1;try{var l=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",Ze,l),window.removeEventListener("testPassiveEventSupport",Ze,l)}catch{}return a}(),qr=!!document.createElement("canvas").getContext,jc=!(!document.createElementNS||!Vm("svg").createSVGRect),Gm=!!jc&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(a.firstChild&&a.firstChild.namespaceURI)}(),qm=!jc&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var l=a.firstChild;return l.style.behavior="url(#default#VML)",l&&"object"==typeof l.adj}catch{return!1}}();function xr(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Z={ie:La,ielt9:aS,edge:Lc,webkit:Ch,android:Fc,android23:Sh,androidStock:cS,opera:Ah,chrome:ci,gecko:xh,safari:lS,phantom:Mh,opera12:Um,win:jm,ie3d:$m,webkit3d:kh,gecko3d:zm,any3d:dS,mobile:Fa,mobileWebkit:Ph,mobileWebkit3d:Rh,msPointer:Vc,pointer:Bc,touch:Hm,touchNative:Uc,mobileOpera:Nh,mobileGecko:Oh,retina:Lh,passiveEvents:Fh,canvas:qr,svg:jc,vml:qm,inlineSvg:Gm},Vh=Z.msPointer?"MSPointerDown":"pointerdown",Bh=Z.msPointer?"MSPointerMove":"pointermove",Mr=Z.msPointer?"MSPointerUp":"pointerup",Uh=Z.msPointer?"MSPointerCancel":"pointercancel",Dt={touchstart:Vh,touchmove:Bh,touchend:Mr,touchcancel:Uh},Fi={touchstart:function Va(a,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&fn(l),Vi(a,l)},touchmove:Vi,touchend:Vi,touchcancel:Vi},Sn={},Wm=!1;function Km(a,l,h){return"touchstart"===l&&function Ym(){Wm||(document.addEventListener(Vh,$c,!0),document.addEventListener(Bh,Qm,!0),document.addEventListener(Mr,Es,!0),document.addEventListener(Uh,Es,!0),Wm=!0)}(),Fi[l]?(h=Fi[l].bind(this,h),a.addEventListener(Dt[l],h,!1),h):(console.warn("wrong event specified:",l),L.Util.falseFn)}function $c(a){Sn[a.pointerId]=a}function Qm(a){Sn[a.pointerId]&&(Sn[a.pointerId]=a)}function Es(a){delete Sn[a.pointerId]}function Vi(a,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){for(var h in l.touches=[],Sn)l.touches.push(Sn[h]);l.changedTouches=[l],a(l)}}var Io,Ua,zc,ja,zh,Ba=pe(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),yo=pe(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),jh="webkitTransition"===yo||"OTransition"===yo?yo+"End":"transitionend";function Ct(a){return"string"==typeof a?document.getElementById(a):a}function vo(a,l){var h=a.style[l]||a.currentStyle&&a.currentStyle[l];if((!h||"auto"===h)&&document.defaultView){var g=document.defaultView.getComputedStyle(a,null);h=g?g[l]:null}return"auto"===h?null:h}function De(a,l,h){var g=document.createElement(a);return g.className=l||"",h&&h.appendChild(g),g}function ut(a){var l=a.parentNode;l&&l.removeChild(a)}function Ts(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Me(a){var l=a.parentNode;l&&l.lastChild!==a&&l.appendChild(a)}function li(a){var l=a.parentNode;l&&l.firstChild!==a&&l.insertBefore(a,l.firstChild)}function Ue(a,l){if(void 0!==a.classList)return a.classList.contains(l);var h=te(a);return h.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(h)}function de(a,l){if(void 0!==a.classList)for(var h=Li(l),g=0,m=h.length;g<m;g++)a.classList.add(h[g]);else if(!Ue(a,l)){var v=te(a);wo(a,(v?v+" ":"")+l)}}function pt(a,l){void 0!==a.classList?a.classList.remove(l):wo(a,xa((" "+te(a)+" ").replace(" "+l+" "," ")))}function wo(a,l){void 0===a.className.baseVal?a.className=l:a.className.baseVal=l}function te(a){return a.correspondingElement&&(a=a.correspondingElement),void 0===a.className.baseVal?a.className:a.className.baseVal}function An(a,l){"opacity"in a.style?a.style.opacity=l:"filter"in a.style&&function hS(a,l){var h=!1,g="DXImageTransform.Microsoft.Alpha";try{h=a.filters.item(g)}catch{if(1===l)return}l=Math.round(100*l),h?(h.Enabled=100!==l,h.Opacity=l):a.style.filter+=" progid:"+g+"(opacity="+l+")"}(a,l)}function pe(a){for(var l=document.documentElement.style,h=0;h<a.length;h++)if(a[h]in l)return a[h];return!1}function kr(a,l,h){var g=l||new ue(0,0);a.style[Ba]=(Z.ie3d?"translate("+g.x+"px,"+g.y+"px)":"translate3d("+g.x+"px,"+g.y+"px,0)")+(h?" scale("+h+")":"")}function q(a,l){a._leaflet_pos=l,Z.any3d?kr(a,l):(a.style.left=l.x+"px",a.style.top=l.y+"px")}function Ee(a){return a._leaflet_pos||new ue(0,0)}if("onselectstart"in document)Io=function(){ge(window,"selectstart",fn)},Ua=function(){Qe(window,"selectstart",fn)};else{var di=pe(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Io=function(){if(di){var a=document.documentElement.style;zc=a[di],a[di]="none"}},Ua=function(){di&&(document.documentElement.style[di]=zc,zc=void 0)}}function dn(){ge(window,"dragstart",fn)}function $h(){Qe(window,"dragstart",fn)}function dr(a){for(;-1===a.tabIndex;)a=a.parentNode;!a.style||(Hc(),ja=a,zh=a.style.outline,a.style.outline="none",ge(window,"keydown",Hc))}function Hc(){!ja||(ja.style.outline=zh,ja=void 0,zh=void 0,Qe(window,"keydown",Hc))}function n_(a){do{a=a.parentNode}while(!(a.offsetWidth&&a.offsetHeight||a===document.body));return a}function Hh(a){var l=a.getBoundingClientRect();return{x:l.width/a.offsetWidth||1,y:l.height/a.offsetHeight||1,boundingClientRect:l}}var fS={__proto__:null,TRANSFORM:Ba,TRANSITION:yo,TRANSITION_END:jh,get:Ct,getStyle:vo,create:De,remove:ut,empty:Ts,toFront:Me,toBack:li,hasClass:Ue,addClass:de,removeClass:pt,setClass:wo,getClass:te,setOpacity:An,testProp:pe,setTransform:kr,setPosition:q,getPosition:Ee,get disableTextSelection(){return Io},get enableTextSelection(){return Ua},disableImageDrag:dn,enableImageDrag:$h,preventOutline:dr,restoreOutline:Hc,getSizedParentNode:n_,getScale:Hh};function ge(a,l,h,g){if(l&&"object"==typeof l)for(var m in l)ke(a,m,l[m],h);else for(var v=0,I=(l=Li(l)).length;v<I;v++)ke(a,l[v],h,g);return this}var Wr="_leaflet_events";function Qe(a,l,h,g){if(1===arguments.length)r_(a),delete a[Wr];else if(l&&"object"==typeof l)for(var m in l)Gh(a,m,l[m],h);else if(l=Li(l),2===arguments.length)r_(a,function(D){return-1!==Is(l,D)});else for(var v=0,I=l.length;v<I;v++)Gh(a,l[v],h,g);return this}function r_(a,l){for(var h in a[Wr]){var g=h.split(/\d/)[0];(!l||l(g))&&Gh(a,g,null,null,h)}}var hn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ke(a,l,h,g){var m=l+xe(h)+(g?"_"+xe(g):"");if(a[Wr]&&a[Wr][m])return this;var v=function(D){return h.call(g||a,D||window.event)},I=v;!Z.touchNative&&Z.pointer&&0===l.indexOf("touch")?v=Km(a,l,v):Z.touch&&"dblclick"===l?v=function e_(a,l){a.addEventListener("dblclick",l);var g,h=0;function m(v){if(1===v.detail){if("mouse"!==v.pointerType&&(!v.sourceCapabilities||v.sourceCapabilities.firesTouchEvents)){var I=Date.now();I-h<=200?2==++g&&l(function Jm(a){var h,g,l={};for(g in a)l[g]=(h=a[g])&&h.bind?h.bind(a):h;return a=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}(v)):g=1,h=I}}else g=v.detail}return a.addEventListener("click",m),{dblclick:l,simDblclick:m}}(a,v):"addEventListener"in a?"touchstart"===l||"touchmove"===l||"wheel"===l||"mousewheel"===l?a.addEventListener(hn[l]||l,v,!!Z.passiveEvents&&{passive:!1}):"mouseenter"===l||"mouseleave"===l?a.addEventListener(hn[l],v=function(D){D=D||window.event,Gc(a,D)&&I(D)},!1):a.addEventListener(l,I,!1):a.attachEvent("on"+l,v),a[Wr]=a[Wr]||{},a[Wr][m]=v}function Gh(a,l,h,g,m){m=m||l+xe(h)+(g?"_"+xe(g):"");var v=a[Wr]&&a[Wr][m];if(!v)return this;!Z.touchNative&&Z.pointer&&0===l.indexOf("touch")?function Zm(a,l,h){Dt[l]?a.removeEventListener(Dt[l],h,!1):console.warn("wrong event specified:",l)}(a,l,v):Z.touch&&"dblclick"===l?function t_(a,l){a.removeEventListener("dblclick",l.dblclick),a.removeEventListener("click",l.simDblclick)}(a,v):"removeEventListener"in a?a.removeEventListener(hn[l]||l,v,!1):a.detachEvent("on"+l,v),a[Wr][m]=null}function bs(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function qh(a){return ke(a,"wheel",bs),this}function ce(a){return ge(a,"mousedown touchstart dblclick contextmenu",bs),a._leaflet_disable_click=!0,this}function fn(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Xt(a){return fn(a),bs(a),this}function $a(a,l){if(!l)return new ue(a.clientX,a.clientY);var h=Hh(l),g=h.boundingClientRect;return new ue((a.clientX-g.left)/h.x-l.clientLeft,(a.clientY-g.top)/h.y-l.clientTop)}var Wh=Z.win&&Z.chrome?2*window.devicePixelRatio:Z.gecko?window.devicePixelRatio:1;function Kh(a){return Z.edge?a.wheelDeltaY/2:a.deltaY&&0===a.deltaMode?-a.deltaY/Wh:a.deltaY&&1===a.deltaMode?20*-a.deltaY:a.deltaY&&2===a.deltaMode?60*-a.deltaY:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?20*-a.detail:a.detail?a.detail/-32765*60:0}function Gc(a,l){var h=l.relatedTarget;if(!h)return!0;try{for(;h&&h!==a;)h=h.parentNode}catch{return!1}return h!==a}var Zh={__proto__:null,on:ge,off:Qe,stopPropagation:bs,disableScrollPropagation:qh,disableClickPropagation:ce,preventDefault:fn,stop:Xt,getMousePosition:$a,getWheelDelta:Kh,isExternalTarget:Gc,addListener:ge,removeListener:Qe},Eo=Ra.extend({run:function(a,l,h,g){this.stop(),this._el=a,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(g||.5,.2),this._startPos=Ee(a),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=Ut(this._animate,this),this._step()},_step:function(a){var l=+new Date-this._startTime,h=1e3*this._duration;l<h?this._runFrame(this._easeOut(l/h),a):(this._runFrame(1),this._complete())},_runFrame:function(a,l){var h=this._startPos.add(this._offset.multiplyBy(a));l&&h._round(),q(this._el,h),this.fire("step")},_complete:function(){Jn(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Ce=Ra.extend({options:{crs:Oa,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,l){l=ot(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=$e(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),void 0!==l.zoom&&(this._zoom=this._limitZoom(l.zoom)),l.center&&void 0!==l.zoom&&this.setView(et(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=yo&&Z.any3d&&!Z.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ge(this._proxy,jh,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,l,h){return l=void 0===l?this._zoom:this._limitZoom(l),a=this._limitCenter(et(a),l,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&!0!==h&&(void 0!==h.animate&&(h.zoom=Be({animate:h.animate},h.zoom),h.pan=Be({animate:h.animate,duration:h.duration},h.pan)),this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,l,h.zoom):this._tryAnimatedPan(a,h.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(a,l),this)},setZoom:function(a,l){return this._loaded?this.setView(this.getCenter(),a,{zoom:l}):(this._zoom=a,this)},zoomIn:function(a,l){return this.setZoom(this._zoom+(a=a||(Z.any3d?this.options.zoomDelta:1)),l)},zoomOut:function(a,l){return this.setZoom(this._zoom-(a=a||(Z.any3d?this.options.zoomDelta:1)),l)},setZoomAround:function(a,l,h){var g=this.getZoomScale(l),m=this.getSize().divideBy(2),I=(a instanceof ue?a:this.latLngToContainerPoint(a)).subtract(m).multiplyBy(1-1/g),D=this.containerPointToLatLng(m.add(I));return this.setView(D,l,{zoom:h})},_getBoundsCenterZoom:function(a,l){l=l||{},a=a.getBounds?a.getBounds():qe(a);var h=Ie(l.paddingTopLeft||l.padding||[0,0]),g=Ie(l.paddingBottomRight||l.padding||[0,0]),m=this.getBoundsZoom(a,!1,h.add(g));if((m="number"==typeof l.maxZoom?Math.min(l.maxZoom,m):m)===1/0)return{center:a.getCenter(),zoom:m};var v=g.subtract(h).divideBy(2),I=this.project(a.getSouthWest(),m),D=this.project(a.getNorthEast(),m);return{center:this.unproject(I.add(D).divideBy(2).add(v),m),zoom:m}},fitBounds:function(a,l){if(!(a=qe(a)).isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(a,l);return this.setView(h.center,h.zoom,l)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,l){return this.setView(a,this._zoom,{pan:l})},panBy:function(a,l){if(l=l||{},!(a=Ie(a).round()).x&&!a.y)return this.fire("moveend");if(!0!==l.animate&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Eo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),!1!==l.animate){de(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,h,l.duration||.25,l.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,l,h){if(!1===(h=h||{}).animate||!Z.any3d)return this.setView(a,l,h);this._stop();var g=this.project(this.getCenter()),m=this.project(a),v=this.getSize(),I=this._zoom;a=et(a),l=void 0===l?I:l;var D=Math.max(v.x,v.y),x=D*this.getZoomScale(I,l),R=m.distanceTo(g)||1,W=1.42,Te=W*W;function J(gt){var xo=(x*x-D*D+(gt?-1:1)*Te*Te*R*R)/(2*(gt?x:D)*Te*R),oe=Math.sqrt(xo*xo+1)-xo;return oe<1e-9?-18:Math.log(oe)}function Fr(gt){return(Math.exp(gt)-Math.exp(-gt))/2}function Gi(gt){return(Math.exp(gt)+Math.exp(-gt))/2}var _i=J(0);function Xa(gt){return D*(Gi(_i)*function ct(gt){return Fr(gt)/Gi(gt)}(_i+W*gt)-Fr(_i))/Te}var v_=Date.now(),eu=(J(1)-_i)/W,ks=h.duration?1e3*h.duration:1e3*eu*.8;return this._moveStart(!0,h.noMoveStart),function Mn(){var gt=(Date.now()-v_)/ks,Ps=function tr(gt){return 1-Math.pow(1-gt,1.5)}(gt)*eu;gt<=1?(this._flyToFrame=Ut(Mn,this),this._move(this.unproject(g.add(m.subtract(g).multiplyBy(Xa(Ps)/R)),I),this.getScaleZoom(D/function of(gt){return D*(Gi(_i)/Gi(_i+W*gt))}(Ps),I),{flyTo:!0})):this._move(a,l)._moveEnd(!0)}.call(this),this},flyToBounds:function(a,l){var h=this._getBoundsCenterZoom(a,l);return this.flyTo(h.center,h.zoom,l)},setMaxBounds:function(a){return(a=qe(a)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(a){var l=this.options.minZoom;return this.options.minZoom=a,this._loaded&&l!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var l=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&l!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,l){this._enforcingBounds=!0;var h=this.getCenter(),g=this._limitCenter(h,this._zoom,qe(a));return h.equals(g)||this.panTo(g,l),this._enforcingBounds=!1,this},panInside:function(a,l){var h=Ie((l=l||{}).paddingTopLeft||l.padding||[0,0]),g=Ie(l.paddingBottomRight||l.padding||[0,0]),m=this.project(this.getCenter()),v=this.project(a),I=this.getPixelBounds(),D=lr([I.min.add(h),I.max.subtract(g)]),x=D.getSize();if(!D.contains(v)){this._enforcingBounds=!0;var R=v.subtract(D.getCenter()),W=D.extend(v).getSize().subtract(x);m.x+=R.x<0?-W.x:W.x,m.y+=R.y<0?-W.y:W.y,this.panTo(this.unproject(m),l),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=Be({animate:!1,pan:!0},!0===a?{animate:!0}:a);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),g=l.divideBy(2).round(),m=h.divideBy(2).round(),v=g.subtract(m);return v.x||v.y?(a.animate&&a.pan?this.panBy(v):(a.pan&&this._rawPanBy(v),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout($e(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:h})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=Be({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=$e(this._handleGeolocationResponse,this),h=$e(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,h,a):navigator.geolocation.getCurrentPosition(l,h,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var l=a.code,h=a.message||(1===l?"permission denied":2===l?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var g=new ze(a.coords.latitude,a.coords.longitude),m=g.toBounds(2*a.coords.accuracy),v=this._locateOptions;if(v.setView){var I=this.getBoundsZoom(m);this.setView(g,v.maxZoom?Math.min(I,v.maxZoom):I)}var D={latlng:g,bounds:m,timestamp:a.timestamp};for(var x in a.coords)"number"==typeof a.coords[x]&&(D[x]=a.coords[x]);this.fire("locationfound",D)}},addHandler:function(a,l){if(!l)return this;var h=this[a]=new l(this);return this._handlers.push(h),this.options[a]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}var a;for(a in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ut(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Jn(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[a].remove();for(a in this._panes)ut(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,l){var g=De("div","leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),l||this._mapPane);return a&&(this._panes[a]=g),g},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds();return new Cn(this.unproject(a.getBottomLeft()),this.unproject(a.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,l,h){a=qe(a),h=Ie(h||[0,0]);var g=this.getZoom()||0,m=this.getMinZoom(),v=this.getMaxZoom(),I=a.getNorthWest(),D=a.getSouthEast(),x=this.getSize().subtract(h),R=lr(this.project(D,g),this.project(I,g)).getSize(),W=Z.any3d?this.options.zoomSnap:1,Te=x.x/R.x,J=x.y/R.y,Fr=l?Math.max(Te,J):Math.min(Te,J);return g=this.getScaleZoom(Fr,g),W&&(g=Math.round(g/(W/100))*(W/100),g=l?Math.ceil(g/W)*W:Math.floor(g/W)*W),Math.max(m,Math.min(v,g))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ue(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,l){var h=this._getTopLeftPoint(a,l);return new at(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(void 0===a?this.getZoom():a)},getPane:function(a){return"string"==typeof a?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,l){var h=this.options.crs;return l=void 0===l?this._zoom:l,h.scale(a)/h.scale(l)},getScaleZoom:function(a,l){var h=this.options.crs,g=h.zoom(a*h.scale(l=void 0===l?this._zoom:l));return isNaN(g)?1/0:g},project:function(a,l){return l=void 0===l?this._zoom:l,this.options.crs.latLngToPoint(et(a),l)},unproject:function(a,l){return l=void 0===l?this._zoom:l,this.options.crs.pointToLatLng(Ie(a),l)},layerPointToLatLng:function(a){var l=Ie(a).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(a){return this.project(et(a))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(et(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(qe(a))},distance:function(a,l){return this.options.crs.distance(et(a),et(l))},containerPointToLayerPoint:function(a){return Ie(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return Ie(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var l=this.containerPointToLayerPoint(Ie(a));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(et(a)))},mouseEventToContainerPoint:function(a){return $a(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var l=this._container=Ct(a);if(!l)throw new Error("Map container not found.");if(l._leaflet_id)throw new Error("Map container is already initialized.");ge(l,"scroll",this._onScroll,this),this._containerId=xe(l)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Z.any3d,de(a,"leaflet-container"+(Z.touch?" leaflet-touch":"")+(Z.retina?" leaflet-retina":"")+(Z.ielt9?" leaflet-oldie":"")+(Z.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=vo(a,"position");"absolute"!==l&&"relative"!==l&&"fixed"!==l&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),q(this._mapPane,new ue(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(de(a.markerPane,"leaflet-zoom-hide"),de(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,l){q(this._mapPane,new ue(0,0));var h=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var g=this._zoom!==l;this._moveStart(g,!1)._move(a,l)._moveEnd(g),this.fire("viewreset"),h&&this.fire("load")},_moveStart:function(a,l){return a&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(a,l,h,g){void 0===l&&(l=this._zoom);var m=this._zoom!==l;return this._zoom=l,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),g?h&&h.pinch&&this.fire("zoom",h):((m||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Jn(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){q(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[xe(this._container)]=this;var l=a?Qe:ge;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),Z.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Jn(this._resizeRequest),this._resizeRequest=Ut(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,l){for(var g,h=[],m="mouseout"===l||"mouseover"===l,v=a.target||a.srcElement,I=!1;v;){if((g=this._targets[xe(v)])&&("click"===l||"preclick"===l)&&this._draggableMoved(g)){I=!0;break}if(g&&g.listens(l,!0)&&(m&&!Gc(v,a)||(h.push(g),m))||v===this._container)break;v=v.parentNode}return!h.length&&!I&&!m&&this.listens(l,!0)&&(h=[this]),h},_isClickDisabled:function(a){for(;a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var l=a.target||a.srcElement;if(!(!this._loaded||l._leaflet_disable_events||"click"===a.type&&this._isClickDisabled(l))){var h=a.type;"mousedown"===h&&dr(l),this._fireDOMEvent(a,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,l,h){if("click"===a.type){var g=Be({},a);g.type="preclick",this._fireDOMEvent(g,g.type,h)}var m=this._findEventTargets(a,l);if(h){for(var v=[],I=0;I<h.length;I++)h[I].listens(l,!0)&&v.push(h[I]);m=v.concat(m)}if(m.length){"contextmenu"===l&&fn(a);var D=m[0],x={originalEvent:a};if("keypress"!==a.type&&"keydown"!==a.type&&"keyup"!==a.type){var R=D.getLatLng&&(!D._radius||D._radius<=10);x.containerPoint=R?this.latLngToContainerPoint(D.getLatLng()):this.mouseEventToContainerPoint(a),x.layerPoint=this.containerPointToLayerPoint(x.containerPoint),x.latlng=R?D.getLatLng():this.layerPointToLatLng(x.layerPoint)}for(I=0;I<m.length;I++)if(m[I].fire(l,x,!0),x.originalEvent._stopped||!1===m[I].options.bubblingMouseEvents&&-1!==Is(this._mouseEvents,l))return}},_draggableMoved:function(a){return(a=a.dragging&&a.dragging.enabled()?a:this).dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,l=this._handlers.length;a<l;a++)this._handlers[a].disable()},whenReady:function(a,l){return this._loaded?a.call(l||this,{target:this}):this.on("load",a,l),this},_getMapPanePos:function(){return Ee(this._mapPane)||new ue(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,l){return(a&&void 0!==l?this._getNewPixelOrigin(a,l):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,l){var h=this.getSize()._divideBy(2);return this.project(a,l)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,l,h){var g=this._getNewPixelOrigin(h,l);return this.project(a,l)._subtract(g)},_latLngBoundsToNewLayerBounds:function(a,l,h){var g=this._getNewPixelOrigin(h,l);return lr([this.project(a.getSouthWest(),l)._subtract(g),this.project(a.getNorthWest(),l)._subtract(g),this.project(a.getSouthEast(),l)._subtract(g),this.project(a.getNorthEast(),l)._subtract(g)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,l,h){if(!h)return a;var g=this.project(a,l),m=this.getSize().divideBy(2),v=new at(g.subtract(m),g.add(m)),I=this._getBoundsOffset(v,h,l);return I.round().equals([0,0])?a:this.unproject(g.add(I),l)},_limitOffset:function(a,l){if(!l)return a;var h=this.getPixelBounds(),g=new at(h.min.add(a),h.max.add(a));return a.add(this._getBoundsOffset(g,l))},_getBoundsOffset:function(a,l,h){var g=lr(this.project(l.getNorthEast(),h),this.project(l.getSouthWest(),h)),m=g.min.subtract(a.min),v=g.max.subtract(a.max);return new ue(this._rebound(m.x,-v.x),this._rebound(m.y,-v.y))},_rebound:function(a,l){return a+l>0?Math.round(a-l)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(l))},_limitZoom:function(a){var l=this.getMinZoom(),h=this.getMaxZoom(),g=Z.any3d?this.options.zoomSnap:1;return g&&(a=Math.round(a/g)*g),Math.max(l,Math.min(h,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){pt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,l){var h=this._getCenterOffset(a)._trunc();return!(!0!==(l&&l.animate)&&!this.getSize().contains(h)||(this.panBy(h,l),0))},_createAnimProxy:function(){var a=this._proxy=De("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(l){var h=Ba,g=this._proxy.style[h];kr(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),g===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ut(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),l=this.getZoom();kr(this._proxy,this.project(a,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,l,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||!1===h.animate||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var g=this.getZoomScale(l),m=this._getCenterOffset(a)._divideBy(1-1/g);return!(!0!==h.animate&&!this.getSize().contains(m)||(Ut(function(){this._moveStart(!0,!1)._animateZoom(a,l,!0)},this),0))},_animateZoom:function(a,l,h,g){!this._mapPane||(h&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=l,de(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:l,noUpdate:g}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout($e(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&pt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});var hr=Gr.extend({options:{position:"topright"},initialize:function(a){ot(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var l=this._map;return l&&l.removeControl(this),this.options.position=a,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var l=this._container=this.onAdd(a),h=this.getPosition(),g=a._controlCorners[h];return de(l,"leaflet-control"),-1!==h.indexOf("bottom")?g.insertBefore(l,g.firstChild):g.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ut(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),X=function(a){return new hr(a)};Ce.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},l="leaflet-",h=this._controlContainer=De("div",l+"control-container",this._container);function g(m,v){a[m+v]=De("div",l+m+" "+l+v,h)}g("top","left"),g("top","right"),g("bottom","left"),g("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)ut(this._controlCorners[a]);ut(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var za=hr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,l,h,g){return h<g?-1:g<h?1:0}},initialize:function(a,l,h){for(var g in ot(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,a)this._addLayer(a[g],g);for(g in l)this._addLayer(l[g],g,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return hr.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,l){return this._addLayer(a,l),this._map?this._update():this},addOverlay:function(a,l){return this._addLayer(a,l,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var l=this._getLayer(xe(a));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){de(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(de(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):pt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return pt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",l=this._container=De("div",a),h=this.options.collapsed;l.setAttribute("aria-haspopup",!0),ce(l),qh(l);var g=this._section=De("section",a+"-list");h&&(this._map.on("click",this.collapse,this),ge(l,{mouseenter:function(){ge(g,"click",fn),this.expand(),setTimeout(function(){Qe(g,"click",fn)})},mouseleave:this.collapse},this));var m=this._layersLink=De("a",a+"-toggle",l);m.href="#",m.title="Layers",m.setAttribute("role","button"),ge(m,"click",fn),ge(m,"focus",this.expand,this),h||this.expand(),this._baseLayersList=De("div",a+"-base",g),this._separator=De("div",a+"-separator",g),this._overlaysList=De("div",a+"-overlays",g),l.appendChild(g)},_getLayer:function(a){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&xe(this._layers[l].layer)===a)return this._layers[l]},_addLayer:function(a,l,h){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:l,overlay:h}),this.options.sortLayers&&this._layers.sort($e(function(g,m){return this.options.sortFunction(g.layer,m.layer,g.name,m.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ts(this._baseLayersList),Ts(this._overlaysList),this._layerControlInputs=[];var a,l,h,g,m=0;for(h=0;h<this._layers.length;h++)this._addItem(g=this._layers[h]),l=l||g.overlay,a=a||!g.overlay,m+=g.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(a=a&&m>1)?"":"none"),this._separator.style.display=l&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var l=this._getLayer(xe(a.target)),h=l.overlay?"add"===a.type?"overlayadd":"overlayremove":"add"===a.type?"baselayerchange":null;h&&this._map.fire(h,l)},_createRadioElement:function(a,l){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(l?' checked="checked"':"")+"/>",g=document.createElement("div");return g.innerHTML=h,g.firstChild},_addItem:function(a){var g,l=document.createElement("label"),h=this._map.hasLayer(a.layer);a.overlay?((g=document.createElement("input")).type="checkbox",g.className="leaflet-control-layers-selector",g.defaultChecked=h):g=this._createRadioElement("leaflet-base-layers_"+xe(this),h),this._layerControlInputs.push(g),g.layerId=xe(a.layer),ge(g,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+a.name;var v=document.createElement("span");return l.appendChild(v),v.appendChild(g),v.appendChild(m),(a.overlay?this._overlaysList:this._baseLayersList).appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){var l,h,a=this._layerControlInputs,g=[],m=[];this._handlingClick=!0;for(var v=a.length-1;v>=0;v--)h=this._getLayer((l=a[v]).layerId).layer,l.checked?g.push(h):l.checked||m.push(h);for(v=0;v<m.length;v++)this._map.hasLayer(m[v])&&this._map.removeLayer(m[v]);for(v=0;v<g.length;v++)this._map.hasLayer(g[v])||this._map.addLayer(g[v]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var l,h,a=this._layerControlInputs,g=this._map.getZoom(),m=a.length-1;m>=0;m--)h=this._getLayer((l=a[m]).layerId).layer,l.disabled=void 0!==h.options.minZoom&&g<h.options.minZoom||void 0!==h.options.maxZoom&&g>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this}}),Xn=hr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var l="leaflet-control-zoom",h=De("div",l+" leaflet-bar"),g=this.options;return this._zoomInButton=this._createButton(g.zoomInText,g.zoomInTitle,l+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(g.zoomOutText,g.zoomOutTitle,l+"-out",h,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,l,h,g,m){var v=De("a",h,g);return v.innerHTML=a,v.href="#",v.title=l,v.setAttribute("role","button"),v.setAttribute("aria-label",l),ce(v),ge(v,"click",Xt),ge(v,"click",m,this),ge(v,"click",this._refocusOnMap,this),v},_updateDisabled:function(){var a=this._map,l="leaflet-disabled";pt(this._zoomInButton,l),pt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(de(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(de(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ce.mergeOptions({zoomControl:!0}),Ce.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Xn,this.addControl(this.zoomControl))});var s_=hr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var l="leaflet-control-scale",h=De("div",l),g=this.options;return this._addScales(g,l+"-line",h),a.on(g.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),h},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,l,h){a.metric&&(this._mScale=De("div",l,h)),a.imperial&&(this._iScale=De("div",l,h))},_update:function(){var a=this._map,l=a.getSize().y/2,h=a.distance(a.containerPointToLatLng([0,l]),a.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(h)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var l=this._getRoundNum(a);this._updateScale(this._mScale,l<1e3?l+" m":l/1e3+" km",l/a)},_updateImperial:function(a){var h,g,m,l=3.2808399*a;l>5280?(g=this._getRoundNum(h=l/5280),this._updateScale(this._iScale,g+" mi",g/h)):(m=this._getRoundNum(l),this._updateScale(this._iScale,m+" ft",m/l))},_updateScale:function(a,l,h){a.style.width=Math.round(this.options.maxWidth*h)+"px",a.innerHTML=l},_getRoundNum:function(a){var l=Math.pow(10,(Math.floor(a)+"").length-1),h=a/l;return l*(h>=10?10:h>=5?5:h>=3?3:h>=2?2:1)}}),Jh=hr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Z.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(a){ot(this,a),this._attributions={}},onAdd:function(a){for(var l in a.attributionControl=this,this._container=De("div","leaflet-control-attribution"),ce(this._container),a._layers)a._layers[l].getAttribution&&this.addAttribution(a._layers[l].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var l in this._attributions)this._attributions[l]&&a.push(l);var h=[];this.options.prefix&&h.push(this.options.prefix),a.length&&h.push(a.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});Ce.mergeOptions({attributionControl:!0}),Ce.addInitHook(function(){this.options.attributionControl&&(new Jh).addTo(this)});hr.Layers=za,hr.Zoom=Xn,hr.Scale=s_,hr.Attribution=Jh,X.layers=function(a,l,h){return new za(a,l,h)},X.zoom=function(a){return new Xn(a)},X.scale=function(a){return new s_(a)},X.attribution=function(a){return new Jh(a)};var St=Gr.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});St.addTo=function(a,l){return a.addHandler(l,this),this};var Pr,He={Events:bt},o_=Z.touch?"touchstart mousedown":"mousedown",Bi=Ra.extend({options:{clickTolerance:3},initialize:function(a,l,h,g){ot(this,g),this._element=a,this._dragStartTarget=l||a,this._preventOutline=h},enable:function(){this._enabled||(ge(this._dragStartTarget,o_,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(Bi._dragging===this&&this.finishDrag(!0),Qe(this._dragStartTarget,o_,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Ue(this._element,"leaflet-zoom-anim"))){if(a.touches&&1!==a.touches.length)return void(Bi._dragging===this&&this.finishDrag());if(!(Bi._dragging||a.shiftKey||1!==a.which&&1!==a.button&&!a.touches||(Bi._dragging=this,this._preventOutline&&dr(this._element),dn(),Io(),this._moving))){this.fire("down");var l=a.touches?a.touches[0]:a,h=n_(this._element);this._startPoint=new ue(l.clientX,l.clientY),this._startPos=Ee(this._element),this._parentScale=Hh(h);var g="mousedown"===a.type;ge(document,g?"mousemove":"touchmove",this._onMove,this),ge(document,g?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1)return void(this._moved=!0);var l=a.touches&&1===a.touches.length?a.touches[0]:a,h=new ue(l.clientX,l.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,fn(a),this._moved||(this.fire("dragstart"),this._moved=!0,de(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),de(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),q(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function(a){pt(document.body,"leaflet-dragging"),this._lastTarget&&(pt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Qe(document,"mousemove touchmove",this._onMove,this),Qe(document,"mouseup touchend touchcancel",this._onUp,this),$h(),Ua(),this._moved&&this._moving&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,Bi._dragging=!1}});function Ui(a,l){if(!l||!a.length)return a.slice();var h=l*l;return function qc(a,l){var h=a.length,m=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(h);m[0]=m[h-1]=1,To(a,m,l,0,h-1);var v,I=[];for(v=0;v<h;v++)m[v]&&I.push(a[v]);return I}(a=function Xh(a,l){for(var h=[a[0]],g=1,m=0,v=a.length;g<v;g++)a_(a[g],a[m])>l&&(h.push(a[g]),m=g);return m<v-1&&h.push(a[v-1]),h}(a,h),h)}function Pe(a,l,h){return Math.sqrt(Cs(a,l,h,!0))}function To(a,l,h,g,m){var I,D,x,v=0;for(D=g+1;D<=m-1;D++)(x=Cs(a[D],a[g],a[m],!0))>v&&(I=D,v=x);v>h&&(l[I]=1,To(a,l,h,g,I),To(a,l,h,I,m))}function Ds(a,l,h,g,m){var D,x,R,v=g?Pr:Rr(a,h),I=Rr(l,h);for(Pr=I;;){if(!(v|I))return[a,l];if(v&I)return!1;R=Rr(x=Ga(a,l,D=v||I,h,m),h),D===v?(a=x,v=R):(l=x,I=R)}}function Ga(a,l,h,g,m){var R,W,v=l.x-a.x,I=l.y-a.y,D=g.min,x=g.max;return 8&h?(R=a.x+v*(x.y-a.y)/I,W=x.y):4&h?(R=a.x+v*(D.y-a.y)/I,W=D.y):2&h?(R=x.x,W=a.y+I*(x.x-a.x)/v):1&h&&(R=D.x,W=a.y+I*(D.x-a.x)/v),new ue(R,W,m)}function Rr(a,l){var h=0;return a.x<l.min.x?h|=1:a.x>l.max.x&&(h|=2),a.y<l.min.y?h|=4:a.y>l.max.y&&(h|=8),h}function a_(a,l){var h=l.x-a.x,g=l.y-a.y;return h*h+g*g}function Cs(a,l,h,g){var R,m=l.x,v=l.y,I=h.x-m,D=h.y-v,x=I*I+D*D;return x>0&&((R=((a.x-m)*I+(a.y-v)*D)/x)>1?(m=h.x,v=h.y):R>0&&(m+=I*R,v+=D*R)),I=a.x-m,D=a.y-v,g?I*I+D*D:new ue(m,v)}function Nr(a){return!Jt(a[0])||"object"!=typeof a[0][0]&&typeof a[0][0]<"u"}function ef(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Nr(a)}var Kr={__proto__:null,simplify:Ui,pointToSegmentDistance:Pe,closestPointOnSegment:function Ha(a,l,h){return Cs(a,l,h)},clipSegment:Ds,_getEdgeIntersection:Ga,_getBitCode:Rr,_sqClosestPointOnSegment:Cs,isFlat:Nr,_flat:ef};function tf(a,l,h){var g,v,I,D,x,R,W,Te,J,m=[1,4,2,8];for(v=0,W=a.length;v<W;v++)a[v]._code=Rr(a[v],l);for(D=0;D<4;D++){for(Te=m[D],g=[],v=0,I=(W=a.length)-1;v<W;I=v++)R=a[I],(x=a[v])._code&Te?R._code&Te||((J=Ga(R,x,Te,l,h))._code=Rr(J,l),g.push(J)):(R._code&Te&&((J=Ga(R,x,Te,l,h))._code=Rr(J,l),g.push(J)),g.push(x));a=g}return a}var nf={__proto__:null,clipPolygon:tf},kt={project:function(a){return new ue(a.lng,a.lat)},unproject:function(a){return new ze(a.y,a.x)},bounds:new at([-180,-90],[180,90])},en={R:6378137,R_MINOR:6356752.314245179,bounds:new at([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(a){var l=Math.PI/180,h=this.R,g=a.lat*l,m=this.R_MINOR/h,v=Math.sqrt(1-m*m),I=v*Math.sin(g),D=Math.tan(Math.PI/4-g/2)/Math.pow((1-I)/(1+I),v/2);return g=-h*Math.log(Math.max(D,1e-10)),new ue(a.lng*l*h,g)},unproject:function(a){for(var R,l=180/Math.PI,h=this.R,g=this.R_MINOR/h,m=Math.sqrt(1-g*g),v=Math.exp(-a.y/h),I=Math.PI/2-2*Math.atan(v),D=0,x=.1;D<15&&Math.abs(x)>1e-7;D++)R=m*Math.sin(I),R=Math.pow((1-R)/(1+R),m/2),I+=x=Math.PI/2-2*Math.atan(v*R)-I;return new ze(I*l,a.x*l/h)}},We={__proto__:null,LonLat:kt,Mercator:en,SphericalMercator:Ve},pn=Be({},tt,{code:"EPSG:3395",projection:en,transformation:function(){var a=.5/(Math.PI*en.R);return Na(a,.5,-a,.5)}()}),tn=Be({},tt,{code:"EPSG:4326",projection:kt,transformation:Na(1/180,1,-1/180,.5)}),Fn=Be({},Je,{projection:kt,transformation:Na(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,l){var h=l.lng-a.lng,g=l.lat-a.lat;return Math.sqrt(h*h+g*g)},infinite:!0});Je.Earth=tt,Je.EPSG3395=pn,Je.EPSG3857=Oa,Je.EPSG900913=bh,Je.EPSG4326=tn,Je.Simple=Fn;var dt=Ra.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[xe(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[xe(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var l=a.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var h=this.getEvents();l.on(h,this),this.once("remove",function(){l.off(h,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Ce.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var l=xe(a);return this._layers[l]||(this._layers[l]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a)),this},removeLayer:function(a){var l=xe(a);return this._layers[l]?(this._loaded&&a.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return xe(a)in this._layers},eachLayer:function(a,l){for(var h in this._layers)a.call(l,this._layers[h]);return this},_addLayers:function(a){for(var l=0,h=(a=a?Jt(a)?a:[a]:[]).length;l<h;l++)this.addLayer(a[l])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[xe(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var l=xe(a);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,l=-1/0,h=this._getZoomSpan();for(var g in this._zoomBoundLayers){var m=this._zoomBoundLayers[g].options;a=void 0===m.minZoom?a:Math.min(a,m.minZoom),l=void 0===m.maxZoom?l:Math.max(l,m.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=a===1/0?void 0:a,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var U=dt.extend({initialize:function(a,l){var h,g;if(ot(this,l),this._layers={},a)for(h=0,g=a.length;h<g;h++)this.addLayer(a[h])},addLayer:function(a){var l=this.getLayerId(a);return this._layers[l]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var l=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(a){return("number"==typeof a?a:this.getLayerId(a))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var h,g,l=Array.prototype.slice.call(arguments,1);for(h in this._layers)(g=this._layers[h])[a]&&g[a].apply(g,l);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,l){for(var h in this._layers)a.call(l,this._layers[h]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return xe(a)}}),je=U.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),U.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),U.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new Cn;for(var l in this._layers){var h=this._layers[l];a.extend(h.getBounds?h.getBounds():h.getLatLng())}return a}}),er=Gr.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){ot(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,l){var h=this._getIconUrl(a);if(!h){if("icon"===a)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var g=this._createImg(h,l&&"IMG"===l.tagName?l:null);return this._setIconStyles(g,a),(this.options.crossOrigin||""===this.options.crossOrigin)&&(g.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),g},_setIconStyles:function(a,l){var h=this.options,g=h[l+"Size"];"number"==typeof g&&(g=[g,g]);var m=Ie(g),v=Ie("shadow"===l&&h.shadowAnchor||h.iconAnchor||m&&m.divideBy(2,!0));a.className="leaflet-marker-"+l+" "+(h.className||""),v&&(a.style.marginLeft=-v.x+"px",a.style.marginTop=-v.y+"px"),m&&(a.style.width=m.x+"px",a.style.height=m.y+"px")},_createImg:function(a,l){return(l=l||document.createElement("img")).src=a,l},_getIconUrl:function(a){return Z.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});var pr=er.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return"string"!=typeof pr.imagePath&&(pr.imagePath=this._detectIconPath()),(this.options.imagePath||pr.imagePath)+er.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var l=function(h,g,m){var v=g.exec(h);return v&&v[m]};return(a=l(a,/^url\((['"])?(.+)\1\)$/,2))&&l(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=De("div","leaflet-default-icon-path",document.body),l=vo(a,"background-image")||vo(a,"backgroundImage");if(document.body.removeChild(a),l=this._stripUrl(l))return l;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),nt=St.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Bi(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),de(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&pt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var l=this._marker,h=l._map,g=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,v=Ee(l._icon),I=h.getPixelBounds(),D=h.getPixelOrigin(),x=lr(I.min._subtract(D).add(m),I.max._subtract(D).subtract(m));if(!x.contains(v)){var R=Ie((Math.max(x.max.x,v.x)-x.max.x)/(I.max.x-x.max.x)-(Math.min(x.min.x,v.x)-x.min.x)/(I.min.x-x.min.x),(Math.max(x.max.y,v.y)-x.max.y)/(I.max.y-x.max.y)-(Math.min(x.min.y,v.y)-x.min.y)/(I.min.y-x.min.y)).multiplyBy(g);h.panBy(R,{animate:!1}),this._draggable._newPos._add(R),this._draggable._startPos._add(R),q(l._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=Ut(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(Jn(this._panRequest),this._panRequest=Ut(this._adjustPan.bind(this,a)))},_onDrag:function(a){var l=this._marker,h=l._shadow,g=Ee(l._icon),m=l._map.layerPointToLatLng(g);h&&q(h,g),l._latlng=m,a.latlng=m,a.oldLatLng=this._oldLatLng,l.fire("move",a).fire("drag",a)},_onDragEnd:function(a){Jn(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),fi=dt.extend({options:{icon:new pr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,l){ot(this,l),this._latlng=et(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var l=this._latlng;return this._latlng=et(a),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=a.icon.createIcon(this._icon),g=!1;h!==this._icon&&(this._icon&&this._removeIcon(),g=!0,a.title&&(h.title=a.title),"IMG"===h.tagName&&(h.alt=a.alt||"")),de(h,l),a.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ge(h,"focus",this._panOnFocus,this);var m=a.icon.createShadow(this._shadow),v=!1;m!==this._shadow&&(this._removeShadow(),v=!0),m&&(de(m,l),m.alt=""),this._shadow=m,a.opacity<1&&this._updateOpacity(),g&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&v&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Qe(this._icon,"focus",this._panOnFocus,this),ut(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ut(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&q(this._icon,a),this._shadow&&q(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var l=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(de(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),nt)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new nt(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&An(this._icon,a),this._shadow&&An(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var l=this.options.icon.options,h=l.iconSize?Ie(l.iconSize):Ie(0,0),g=l.iconAnchor?Ie(l.iconAnchor):Ie(0,0);a.panInside(this._latlng,{paddingTopLeft:g,paddingBottomRight:h.subtract(g)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var re=dt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return ot(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ji=re.extend({options:{fill:!0,radius:10},initialize:function(a,l){ot(this,l),this._latlng=et(a),this._radius=this.options.radius},setLatLng:function(a){var l=this._latlng;return this._latlng=et(a),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var l=a&&a.radius||this._radius;return re.prototype.setStyle.call(this,a),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,l=this._radiusY||a,h=this._clickTolerance(),g=[a+h,l+h];this._pxBounds=new at(this._point.subtract(g),this._point.add(g))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var bo=ji.extend({initialize:function(a,l,h){if("number"==typeof l&&(l=Be({},h,{radius:l})),ot(this,l),this._latlng=et(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new Cn(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:re.prototype.setStyle,_project:function(){var a=this._latlng.lng,l=this._latlng.lat,h=this._map,g=h.options.crs;if(g.distance===tt.distance){var m=Math.PI/180,v=this._mRadius/tt.R/m,I=h.project([l+v,a]),D=h.project([l-v,a]),x=I.add(D).divideBy(2),R=h.unproject(x).lat,W=Math.acos((Math.cos(v*m)-Math.sin(l*m)*Math.sin(R*m))/(Math.cos(l*m)*Math.cos(R*m)))/m;(isNaN(W)||0===W)&&(W=v/Math.cos(Math.PI/180*l)),this._point=x.subtract(h.getPixelOrigin()),this._radius=isNaN(W)?0:x.x-h.project([R,a-W]).x,this._radiusY=x.y-I.y}else{var Te=g.unproject(g.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(Te).x}this._updateBounds()}});var rt=re.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,l){ot(this,l),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var m,v,l=1/0,h=null,g=Cs,I=0,D=this._parts.length;I<D;I++)for(var x=this._parts[I],R=1,W=x.length;R<W;R++){var Te=g(a,m=x[R-1],v=x[R],!0);Te<l&&(l=Te,h=g(a,m,v))}return h&&(h.distance=Math.sqrt(l)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var a,l,h,g,m,v,I,D=this._rings[0],x=D.length;if(!x)return null;for(a=0,l=0;a<x-1;a++)l+=D[a].distanceTo(D[a+1])/2;if(0===l)return this._map.layerPointToLatLng(D[0]);for(a=0,g=0;a<x-1;a++)if((g+=h=(m=D[a]).distanceTo(v=D[a+1]))>l)return this._map.layerPointToLatLng([v.x-(I=(g-l)/h)*(v.x-m.x),v.y-I*(v.y-m.y)])},getBounds:function(){return this._bounds},addLatLng:function(a,l){return l=l||this._defaultShape(),a=et(a),l.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new Cn,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return Nr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var l=[],h=Nr(a),g=0,m=a.length;g<m;g++)h?(l[g]=et(a[g]),this._bounds.extend(l[g])):l[g]=this._convertLatLngs(a[g]);return l},_project:function(){var a=new at;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),l=new ue(a,a);!this._rawPxBounds||(this._pxBounds=new at([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(a,l,h){var v,I,m=a.length;if(a[0]instanceof ze){for(I=[],v=0;v<m;v++)I[v]=this._map.latLngToLayerPoint(a[v]),h.extend(I[v]);l.push(I)}else for(v=0;v<m;v++)this._projectLatlngs(a[v],l,h)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(a)){if(this.options.noClip)return void(this._parts=this._rings);var h,g,m,v,I,D,x,l=this._parts;for(h=0,m=0,v=this._rings.length;h<v;h++)for(g=0,I=(x=this._rings[h]).length;g<I-1;g++)(D=Ds(x[g],x[g+1],a,g,!0))&&(l[m]=l[m]||[],l[m].push(D[0]),(D[1]!==x[g+1]||g===I-2)&&(l[m].push(D[1]),m++))}},_simplifyPoints:function(){for(var a=this._parts,l=this.options.smoothFactor,h=0,g=a.length;h<g;h++)a[h]=Ui(a[h],l)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,l){var h,g,m,v,I,D,x=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(h=0,v=this._parts.length;h<v;h++)for(g=0,m=(I=(D=this._parts[h]).length)-1;g<I;m=g++)if((l||0!==g)&&Pe(a,D[m],D[g])<=x)return!0;return!1}});rt._flat=ef;var gr=rt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var a,l,h,g,m,v,I,D,R=this._rings[0],W=R.length;if(!W)return null;for(v=I=D=0,a=0,l=W-1;a<W;l=a++)I+=((h=R[a]).x+(g=R[l]).x)*(m=h.y*g.x-g.y*h.x),D+=(h.y+g.y)*m,v+=3*m;return this._map.layerPointToLatLng(0===v?R[0]:[I/v,D/v])},_convertLatLngs:function(a){var l=rt.prototype._convertLatLngs.call(this,a),h=l.length;return h>=2&&l[0]instanceof ze&&l[0].equals(l[h-1])&&l.pop(),l},_setLatLngs:function(a){rt.prototype._setLatLngs.call(this,a),Nr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Nr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,l=this.options.weight,h=new ue(l,l);if(a=new at(a.min.subtract(h),a.max.add(h)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(a)){if(this.options.noClip)return void(this._parts=this._rings);for(var v,g=0,m=this._rings.length;g<m;g++)(v=tf(this._rings[g],a,!0)).length&&this._parts.push(v)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var h,g,m,v,I,D,x,R,l=!1;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(v=0,x=this._parts.length;v<x;v++)for(I=0,D=(R=(h=this._parts[v]).length)-1;I<R;D=I++)(g=h[I]).y>a.y!=(m=h[D]).y>a.y&&a.x<(m.x-g.x)*(a.y-g.y)/(m.y-g.y)+g.x&&(l=!l);return l||rt.prototype._containsPoint.call(this,a,!0)}});var xn=je.extend({initialize:function(a,l){ot(this,l),this._layers={},a&&this.addData(a)},addData:function(a){var h,g,m,l=Jt(a)?a:a.features;if(l){for(h=0,g=l.length;h<g;h++)((m=l[h]).geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var v=this.options;if(v.filter&&!v.filter(a))return this;var I=qa(a,v);return I?(I.feature=zi(a),I.defaultOptions=I.options,this.resetStyle(I),v.onEachFeature&&v.onEachFeature(a,I),this.addLayer(I)):this},resetStyle:function(a){return void 0===a?this.eachLayer(this.resetStyle,this):(a.options=Be({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(l){this._setLayerStyle(l,a)},this)},_setLayerStyle:function(a,l){a.setStyle&&("function"==typeof l&&(l=l(a.feature)),a.setStyle(l))}});function qa(a,l){var D,x,R,W,h="Feature"===a.type?a.geometry:a,g=h?h.coordinates:null,m=[],v=l&&l.pointToLayer,I=l&&l.coordsToLatLng||Wc;if(!g&&!h)return null;switch(h.type){case"Point":return Ke(v,a,D=I(g),l);case"MultiPoint":for(R=0,W=g.length;R<W;R++)D=I(g[R]),m.push(Ke(v,a,D,l));return new je(m);case"LineString":case"MultiLineString":return x=Wa(g,"LineString"===h.type?0:1,I),new rt(x,l);case"Polygon":case"MultiPolygon":return x=Wa(g,"Polygon"===h.type?1:2,I),new gr(x,l);case"GeometryCollection":for(R=0,W=h.geometries.length;R<W;R++){var Te=qa({geometry:h.geometries[R],type:"Feature",properties:a.properties},l);Te&&m.push(Te)}return new je(m);default:throw new Error("Invalid GeoJSON object.")}}function Ke(a,l,h,g){return a?a(l,h):new fi(h,g&&g.markersInheritOptions&&g)}function Wc(a){return new ze(a[1],a[0],a[2])}function Wa(a,l,h){for(var I,g=[],m=0,v=a.length;m<v;m++)I=l?Wa(a[m],l-1,h):(h||Wc)(a[m]),g.push(I);return g}function xs(a,l){return void 0!==(a=et(a)).alt?[Ln(a.lng,l),Ln(a.lat,l),Ln(a.alt,l)]:[Ln(a.lng,l),Ln(a.lat,l)]}function Ms(a,l,h,g){for(var m=[],v=0,I=a.length;v<I;v++)m.push(l?Ms(a[v],l-1,h,g):xs(a[v],g));return!l&&h&&m.push(m[0]),m}function Or(a,l){return a.feature?Be({},a.feature,{geometry:l}):zi(l)}function zi(a){return"Feature"===a.type||"FeatureCollection"===a.type?a:{type:"Feature",properties:{},geometry:a}}var Zr={toGeoJSON:function(a){return Or(this,{type:"Point",coordinates:xs(this.getLatLng(),a)})}};function jt(a,l){return new xn(a,l)}fi.include(Zr),bo.include(Zr),ji.include(Zr),rt.include({toGeoJSON:function(a){var l=!Nr(this._latlngs);return Or(this,{type:(l?"Multi":"")+"LineString",coordinates:Ms(this._latlngs,l?1:0,!1,a)})}}),gr.include({toGeoJSON:function(a){var l=!Nr(this._latlngs),h=l&&!Nr(this._latlngs[0]),g=Ms(this._latlngs,h?2:l?1:0,!0,a);return l||(g=[g]),Or(this,{type:(h?"Multi":"")+"Polygon",coordinates:g})}}),U.include({toMultiPoint:function(a){var l=[];return this.eachLayer(function(h){l.push(h.toGeoJSON(a).geometry.coordinates)}),Or(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(a){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===l)return this.toMultiPoint(a);var h="GeometryCollection"===l,g=[];return this.eachLayer(function(m){if(m.toGeoJSON){var v=m.toGeoJSON(a);if(h)g.push(v.geometry);else{var I=zi(v);"FeatureCollection"===I.type?g.push.apply(g,I.features):g.push(I)}}}),h?Or(this,{geometries:g,type:"GeometryCollection"}):{type:"FeatureCollection",features:g}}});var u_=jt,$t=dt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,l,h){this._url=a,this._bounds=qe(l),ot(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(de(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ut(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Me(this._image),this},bringToBack:function(){return this._map&&li(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=qe(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a="IMG"===this._url.tagName,l=this._image=a?this._url:De("img");de(l,"leaflet-image-layer"),this._zoomAnimated&&de(l,"leaflet-zoom-animated"),this.options.className&&de(l,this.options.className),l.onselectstart=Ze,l.onmousemove=Ze,l.onload=$e(this.fire,this,"load"),l.onerror=$e(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(l.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a?this._url=l.src:(l.src=this._url,l.alt=this.options.alt)},_animateZoom:function(a){var l=this._map.getZoomScale(a.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;kr(this._image,h,l)},_reset:function(){var a=this._image,l=new at(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=l.getSize();q(a,l.min),a.style.width=h.x+"px",a.style.height=h.y+"px"},_updateOpacity:function(){An(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Ka=$t.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a="VIDEO"===this._url.tagName,l=this._image=a?this._url:De("video");if(de(l,"leaflet-image-layer"),this._zoomAnimated&&de(l,"leaflet-zoom-animated"),this.options.className&&de(l,this.options.className),l.onselectstart=Ze,l.onmousemove=Ze,l.onloadeddata=$e(this.fire,this,"load"),a){for(var h=l.getElementsByTagName("source"),g=[],m=0;m<h.length;m++)g.push(h[m].src);this._url=h.length>0?g:[l.src]}else{Jt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var v=0;v<this._url.length;v++){var I=De("source");I.src=this._url[v],l.appendChild(I)}}}});var Co=$t.extend({_initImage:function(){var a=this._image=this._url;de(a,"leaflet-image-layer"),this._zoomAnimated&&de(a,"leaflet-zoom-animated"),this.options.className&&de(a,this.options.className),a.onselectstart=Ze,a.onmousemove=Ze}});var Lr=dt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0},initialize:function(a,l){ot(this,a),this._source=l},openOn:function(a){return(a=arguments.length?a:this._source._map).hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&An(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&An(this._container,1),this.bringToFront(),this.options.interactive&&(de(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(An(this._container,0),this._removeTimeout=setTimeout($e(ut,void 0,this._container),200)):ut(this._container),this.options.interactive&&(pt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=et(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Me(this._container),this},bringToBack:function(){return this._map&&li(this._container),this},_prepareOpen:function(a){var l=this._source;if(!l._map)return!1;if(l instanceof je){l=null;var h=this._source._layers;for(var g in h)if(h[g]._map){l=h[g];break}if(!l)return!1;this._source=l}if(!a)if(l.getCenter)a=l.getCenter();else if(l.getLatLng)a=l.getLatLng();else{if(!l.getBounds)throw new Error("Unable to get source layer LatLng.");a=l.getBounds().getCenter()}return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,l="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof l)a.innerHTML=l;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),l=Ie(this.options.offset),h=this._getAnchor();this._zoomAnimated?q(this._container,a.add(h)):l=l.add(a).add(h);var g=this._containerBottom=-l.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=g+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}});Ce.include({_initOverlay:function(a,l,h,g){var m=l;return m instanceof a||(m=new a(g).setContent(l)),h&&m.setLatLng(h),m}}),dt.include({_initOverlay:function(a,l,h,g){var m=h;return m instanceof a?(ot(m,g),m._source=this):(m=l&&!g?l:new a(g,this)).setContent(h),m}});var Kc=Lr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return!(a=arguments.length?a:this._source._map).hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Lr.prototype.openOn.call(this,a)},onAdd:function(a){Lr.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof re||this._source.on("preclick",bs))},onRemove:function(a){Lr.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof re||this._source.off("preclick",bs))},getEvents:function(){var a=Lr.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",l=this._container=De("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=De("div",a+"-content-wrapper",l);if(this._contentNode=De("div",a+"-content",h),ce(l),qh(this._contentNode),ge(l,"contextmenu",bs),this._tipContainer=De("div",a+"-tip-container",l),this._tip=De("div",a+"-tip",this._tipContainer),this.options.closeButton){var g=this._closeButton=De("a",a+"-close-button",l);g.setAttribute("role","button"),g.setAttribute("aria-label","Close popup"),g.href="#close",g.innerHTML='<span aria-hidden="true">&#215;</span>',ge(g,"click",this.close,this)}},_updateLayout:function(){var a=this._contentNode,l=a.style;l.width="",l.whiteSpace="nowrap";var h=a.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),l.width=h+1+"px",l.whiteSpace="",l.height="";var m=this.options.maxHeight,v="leaflet-popup-scrolled";m&&a.offsetHeight>m?(l.height=m+"px",de(a,v)):pt(a,v),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var l=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),h=this._getAnchor();q(this._container,l.add(h))},_adjustPan:function(a){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var l=this._map,h=parseInt(vo(this._container,"marginBottom"),10)||0,g=this._container.offsetHeight+h,m=this._containerWidth,v=new ue(this._containerLeft,-g-this._containerBottom);v._add(Ee(this._container));var I=l.layerPointToContainerPoint(v),D=Ie(this.options.autoPanPadding),x=Ie(this.options.autoPanPaddingTopLeft||D),R=Ie(this.options.autoPanPaddingBottomRight||D),W=l.getSize(),Te=0,J=0;I.x+m+R.x>W.x&&(Te=I.x+m-W.x+R.x),I.x-Te-x.x<0&&(Te=I.x-x.x),I.y+g+R.y>W.y&&(J=I.y+g-W.y+R.y),I.y-J-x.y<0&&(J=I.y-x.y),(Te||J)&&l.fire("autopanstart").panBy([Te,J],{animate:a&&"moveend"===a.type})}},_getAnchor:function(){return Ie(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ce.mergeOptions({closePopupOnClick:!0}),Ce.include({openPopup:function(a,l,h){return this._initOverlay(Kc,a,l,h).openOn(this),this},closePopup:function(a){return(a=arguments.length?a:this._popup)&&a.close(),this}}),dt.include({bindPopup:function(a,l){return this._popup=this._initOverlay(Kc,this._popup,a,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&this._popup._prepareOpen(a)&&this._popup.openOn(this._map),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(this._popup&&this._map){Xt(a);var l=a.layer||a.target;if(this._popup._source===l&&!(l instanceof re))return void(this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng));this._popup._source=l,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){13===a.originalEvent.keyCode&&this._openPopup(a)}});var Qa=Lr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Lr.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Lr.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Lr.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){this._contentNode=this._container=De("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var l,h,g=this._map,m=this._container,v=g.latLngToContainerPoint(g.getCenter()),I=g.layerPointToContainerPoint(a),D=this.options.direction,x=m.offsetWidth,R=m.offsetHeight,W=Ie(this.options.offset),Te=this._getAnchor();"top"===D?(l=x/2,h=R):"bottom"===D?(l=x/2,h=0):"center"===D?(l=x/2,h=R/2):"right"===D?(l=0,h=R/2):"left"===D?(l=x,h=R/2):I.x<v.x?(D="right",l=0,h=R/2):(D="left",l=x+2*(W.x+Te.x),h=R/2),a=a.subtract(Ie(l,h,!0)).add(W).add(Te),pt(m,"leaflet-tooltip-right"),pt(m,"leaflet-tooltip-left"),pt(m,"leaflet-tooltip-top"),pt(m,"leaflet-tooltip-bottom"),de(m,"leaflet-tooltip-"+D),q(m,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&An(this._container,a)},_animateZoom:function(a){var l=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(l)},_getAnchor:function(){return Ie(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ce.include({openTooltip:function(a,l,h){return this._initOverlay(Qa,a,l,h).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),dt.include({bindTooltip:function(a,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Qa,this._tooltip,a,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(a||!this._tooltipHandlersAdded){var l=a?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[l](h),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&this._tooltip._prepareOpen(a)&&this._tooltip.openOn(this._map),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_openTooltip:function(a){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0))},_moveTooltip:function(a){var h,g,l=a.latlng;this._tooltip.options.sticky&&a.originalEvent&&(h=this._map.mouseEventToContainerPoint(a.originalEvent),g=this._map.containerPointToLayerPoint(h),l=this._map.layerPointToLatLng(g)),this._tooltip.setLatLng(l)}});var l_=er.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var l=a&&"DIV"===a.tagName?a:document.createElement("div"),h=this.options;if(h.html instanceof Element?(Ts(l),l.appendChild(h.html)):l.innerHTML=!1!==h.html?h.html:"",h.bgPos){var g=Ie(h.bgPos);l.style.backgroundPosition=-g.x+"px "+-g.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});er.Default=pr;var Ya=dt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Z.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){ot(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),ut(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Me(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(li(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=Pc(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof ue?a:new ue(a,a)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var v,l=this.getPane().children,h=-a(-1/0,1/0),g=0,m=l.length;g<m;g++)v=l[g].style.zIndex,l[g]!==this._container&&v&&(h=a(h,+v));isFinite(h)&&(this.options.zIndex=h+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Z.ielt9){An(this._container,this.options.opacity);var a=+new Date,l=!1,h=!1;for(var g in this._tiles){var m=this._tiles[g];if(m.current&&m.loaded){var v=Math.min(1,(a-m.loaded)/200);An(m.el,v),v<1?l=!0:(m.active?h=!0:this._onOpaqueTile(m),m.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),l&&(Jn(this._fadeFrame),this._fadeFrame=Ut(this._updateOpacity,this))}},_onOpaqueTile:Ze,_initContainer:function(){this._container||(this._container=De("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,l=this.options.maxZoom;if(void 0!==a){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===a?(this._levels[h].el.style.zIndex=l-Math.abs(a-h),this._onUpdateLevel(h)):(ut(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var g=this._levels[a],m=this._map;return g||((g=this._levels[a]={}).el=De("div","leaflet-tile-container leaflet-zoom-animated",this._container),g.el.style.zIndex=l,g.origin=m.project(m.unproject(m.getPixelOrigin()),a).round(),g.zoom=a,this._setZoomTransform(g,m.getCenter(),m.getZoom()),this._onCreateLevel(g)),this._level=g,g}},_onUpdateLevel:Ze,_onRemoveLevel:Ze,_onCreateLevel:Ze,_pruneTiles:function(){if(this._map){var a,l,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom)return void this._removeAllTiles();for(a in this._tiles)(l=this._tiles[a]).retain=l.current;for(a in this._tiles)if((l=this._tiles[a]).current&&!l.active){var g=l.coords;this._retainParent(g.x,g.y,g.z,g.z-5)||this._retainChildren(g.x,g.y,g.z,g.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var l in this._tiles)this._tiles[l].coords.z===a&&this._removeTile(l)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)ut(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,l,h,g){var m=Math.floor(a/2),v=Math.floor(l/2),I=h-1,D=new ue(+m,+v);D.z=+I;var x=this._tileCoordsToKey(D),R=this._tiles[x];return R&&R.active?(R.retain=!0,!0):(R&&R.loaded&&(R.retain=!0),I>g&&this._retainParent(m,v,I,g))},_retainChildren:function(a,l,h,g){for(var m=2*a;m<2*a+2;m++)for(var v=2*l;v<2*l+2;v++){var I=new ue(m,v);I.z=h+1;var D=this._tileCoordsToKey(I),x=this._tiles[D];x&&x.active?x.retain=!0:(x&&x.loaded&&(x.retain=!0),h+1<g&&this._retainChildren(m,v,h+1,g))}},_resetView:function(a){var l=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var l=this.options;return void 0!==l.minNativeZoom&&a<l.minNativeZoom?l.minNativeZoom:void 0!==l.maxNativeZoom&&l.maxNativeZoom<a?l.maxNativeZoom:a},_setView:function(a,l,h,g){var m=Math.round(l);m=void 0!==this.options.maxZoom&&m>this.options.maxZoom||void 0!==this.options.minZoom&&m<this.options.minZoom?void 0:this._clampZoom(m),(!g||this.options.updateWhenZooming&&m!==this._tileZoom)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==m&&this._update(a),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(a,l)},_setZoomTransforms:function(a,l){for(var h in this._levels)this._setZoomTransform(this._levels[h],a,l)},_setZoomTransform:function(a,l,h){var g=this._map.getZoomScale(h,a.zoom),m=a.origin.multiplyBy(g).subtract(this._map._getNewPixelOrigin(l,h)).round();Z.any3d?kr(a.el,m,g):q(a.el,m)},_resetGrid:function(){var a=this._map,l=a.options.crs,h=this._tileSize=this.getTileSize(),g=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,l.wrapLng[0]],g).x/h.x),Math.ceil(a.project([0,l.wrapLng[1]],g).x/h.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([l.wrapLat[0],0],g).y/h.x),Math.ceil(a.project([l.wrapLat[1],0],g).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var l=this._map,h=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),g=l.getZoomScale(h,this._tileZoom),m=l.project(a,this._tileZoom).floor(),v=l.getSize().divideBy(2*g);return new at(m.subtract(v),m.add(v))},_update:function(a){var l=this._map;if(l){var h=this._clampZoom(l.getZoom());if(void 0===a&&(a=l.getCenter()),void 0!==this._tileZoom){var g=this._getTiledPixelBounds(a),m=this._pxBoundsToTileRange(g),v=m.getCenter(),I=[],D=this.options.keepBuffer,x=new at(m.getBottomLeft().subtract([D,-D]),m.getTopRight().add([D,-D]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var R in this._tiles){var W=this._tiles[R].coords;(W.z!==this._tileZoom||!x.contains(new ue(W.x,W.y)))&&(this._tiles[R].current=!1)}if(Math.abs(h-this._tileZoom)>1)return void this._setView(a,h);for(var Te=m.min.y;Te<=m.max.y;Te++)for(var J=m.min.x;J<=m.max.x;J++){var Fr=new ue(J,Te);if(Fr.z=this._tileZoom,this._isValidTile(Fr)){var Gi=this._tiles[this._tileCoordsToKey(Fr)];Gi?Gi.current=!0:I.push(Fr)}}if(I.sort(function(_i,of){return _i.distanceTo(v)-of.distanceTo(v)}),0!==I.length){this._loading||(this._loading=!0,this.fire("loading"));var ct=document.createDocumentFragment();for(J=0;J<I.length;J++)this._addTile(I[J],ct);this._level.el.appendChild(ct)}}}},_isValidTile:function(a){var l=this._map.options.crs;if(!l.infinite){var h=this._globalTileRange;if(!l.wrapLng&&(a.x<h.min.x||a.x>h.max.x)||!l.wrapLat&&(a.y<h.min.y||a.y>h.max.y))return!1}if(!this.options.bounds)return!0;var g=this._tileCoordsToBounds(a);return qe(this.options.bounds).overlaps(g)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var l=this._map,h=this.getTileSize(),g=a.scaleBy(h),m=g.add(h);return[l.unproject(g,a.z),l.unproject(m,a.z)]},_tileCoordsToBounds:function(a){var l=this._tileCoordsToNwSe(a),h=new Cn(l[0],l[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var l=a.split(":"),h=new ue(+l[0],+l[1]);return h.z=+l[2],h},_removeTile:function(a){var l=this._tiles[a];!l||(ut(l.el),delete this._tiles[a],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){de(a,"leaflet-tile");var l=this.getTileSize();a.style.width=l.x+"px",a.style.height=l.y+"px",a.onselectstart=Ze,a.onmousemove=Ze,Z.ielt9&&this.options.opacity<1&&An(a,this.options.opacity)},_addTile:function(a,l){var h=this._getTilePos(a),g=this._tileCoordsToKey(a),m=this.createTile(this._wrapCoords(a),$e(this._tileReady,this,a));this._initTile(m),this.createTile.length<2&&Ut($e(this._tileReady,this,a,null,m)),q(m,h),this._tiles[g]={el:m,coords:a,current:!0},l.appendChild(m),this.fire("tileloadstart",{tile:m,coords:a})},_tileReady:function(a,l,h){l&&this.fire("tileerror",{error:l,tile:h,coords:a});var g=this._tileCoordsToKey(a);(h=this._tiles[g])&&(h.loaded=+new Date,this._map._fadeAnimated?(An(h.el,0),Jn(this._fadeFrame),this._fadeFrame=Ut(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),l||(de(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Z.ielt9||!this._map._fadeAnimated?Ut(this._pruneTiles,this):setTimeout($e(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var l=new ue(this._wrapX?ws(a.x,this._wrapX):a.x,this._wrapY?ws(a.y,this._wrapY):a.y);return l.z=a.z,l},_pxBoundsToTileRange:function(a){var l=this.getTileSize();return new at(a.min.unscaleBy(l).floor(),a.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});var So=Ya.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,l){this._url=a,(l=ot(this,l)).detectRetina&&Z.retina&&l.maxZoom>0&&(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom++):(l.zoomOffset++,l.maxZoom--),l.minZoom=Math.max(0,l.minZoom)),"string"==typeof l.subdomains&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,l){return this._url===a&&void 0===l&&(l=!0),this._url=a,l||this.redraw(),this},createTile:function(a,l){var h=document.createElement("img");return ge(h,"load",$e(this._tileOnLoad,this,l,h)),ge(h,"error",$e(this._tileOnError,this,l,h)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(h.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.setAttribute("role","presentation"),h.src=this.getTileUrl(a),h},getTileUrl:function(a){var l={r:Z.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-a.y;this.options.tms&&(l.y=h),l["-y"]=h}return Ma(this._url,Be(l,this.options))},_tileOnLoad:function(a,l){Z.ielt9?setTimeout($e(a,this,null,l),0):a(null,l)},_tileOnError:function(a,l,h){var g=this.options.errorTileUrl;g&&l.getAttribute("src")!==g&&(l.src=g),a(h,l)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom;return this.options.zoomReverse&&(a=this.options.maxZoom-a),a+this.options.zoomOffset},_getSubdomain:function(a){var l=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var a,l;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&((l=this._tiles[a].el).onload=Ze,l.onerror=Ze,!l.complete)){l.src=ka;var h=this._tiles[a].coords;ut(l),delete this._tiles[a],this.fire("tileabort",{tile:l,coords:h})}},_removeTile:function(a){var l=this._tiles[a];if(l)return l.el.setAttribute("src",ka),Ya.prototype._removeTile.call(this,a)},_tileReady:function(a,l,h){if(this._map&&(!h||h.getAttribute("src")!==ka))return Ya.prototype._tileReady.call(this,a,l,h)}});function d_(a,l){return new So(a,l)}var h_=So.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,l){this._url=a;var h=Be({},this.defaultWmsParams);for(var g in l)g in this.options||(h[g]=l[g]);var m=(l=ot(this,l)).detectRetina&&Z.retina?2:1,v=this.getTileSize();h.width=v.x*m,h.height=v.y*m,this.wmsParams=h},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,So.prototype.onAdd.call(this,a)},getTileUrl:function(a){var l=this._tileCoordsToNwSe(a),h=this._crs,g=lr(h.project(l[0]),h.project(l[1])),m=g.min,v=g.max,I=(this._wmsVersion>=1.3&&this._crs===tn?[m.y,m.x,v.y,v.x]:[m.x,m.y,v.x,v.y]).join(","),D=So.prototype.getTileUrl.call(this,a);return D+Ih(this.wmsParams,D,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+I},setParams:function(a,l){return Be(this.wmsParams,a),l||this.redraw(),this}});So.WMS=h_,d_.wms=function yS(a,l){return new h_(a,l)};var pi=dt.extend({options:{padding:.1},initialize:function(a){ot(this,a),xe(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&de(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,l){var h=this._map.getZoomScale(l,this._zoom),g=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,l),v=g.multiplyBy(-h).add(m).subtract(this._map._getNewPixelOrigin(a,l));Z.any3d?kr(this._container,v,h):q(this._container,v)},_reset:function(){for(var a in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,l=this._map.getSize(),h=this._map.containerPointToLayerPoint(l.multiplyBy(-a)).round();this._bounds=new at(h,h.add(l.multiplyBy(1+2*a)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),f_=pi.extend({options:{tolerance:0},getEvents:function(){var a=pi.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){pi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");ge(a,"mousemove",this._onMouseMove,this),ge(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ge(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){Jn(this._redrawRequest),delete this._ctx,ut(this._container),Qe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var l in this._redrawBounds=null,this._layers)this._layers[l]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){pi.prototype._update.call(this);var a=this._bounds,l=this._container,h=a.getSize(),g=Z.retina?2:1;q(l,a.min),l.width=g*h.x,l.height=g*h.y,l.style.width=h.x+"px",l.style.height=h.y+"px",Z.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){pi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[xe(a)]=a;var l=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var l=a._order,h=l.next,g=l.prev;h?h.prev=g:this._drawLast=g,g?g.next=h:this._drawFirst=h,delete a._order,delete this._layers[xe(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if("string"==typeof a.options.dashArray){var g,m,l=a.options.dashArray.split(/[, ]+/),h=[];for(m=0;m<l.length;m++){if(g=Number(l[m]),isNaN(g))return;h.push(g)}a.options._dashArray=h}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){!this._map||(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||Ut(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var l=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new at,this._redrawBounds.extend(a._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(a._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var l=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,l=this._redrawBounds;if(this._ctx.save(),l){var h=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var g=this._drawFirst;g;g=g.next)a=g.layer,(!l||a._pxBounds&&a._pxBounds.intersects(l))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,l){if(this._drawing){var h,g,m,v,I=a._parts,D=I.length,x=this._ctx;if(D){for(x.beginPath(),h=0;h<D;h++){for(g=0,m=I[h].length;g<m;g++)x[g?"lineTo":"moveTo"]((v=I[h][g]).x,v.y);l&&x.closePath()}this._fillStroke(x,a)}}},_updateCircle:function(a){if(this._drawing&&!a._empty()){var l=a._point,h=this._ctx,g=Math.max(Math.round(a._radius),1),m=(Math.max(Math.round(a._radiusY),1)||g)/g;1!==m&&(h.save(),h.scale(1,m)),h.beginPath(),h.arc(l.x,l.y/m,g,0,2*Math.PI,!1),1!==m&&h.restore(),this._fillStroke(h,a)}},_fillStroke:function(a,l){var h=l.options;h.fill&&(a.globalAlpha=h.fillOpacity,a.fillStyle=h.fillColor||h.color,a.fill(h.fillRule||"evenodd")),h.stroke&&0!==h.weight&&(a.setLineDash&&a.setLineDash(l.options&&l.options._dashArray||[]),a.globalAlpha=h.opacity,a.lineWidth=h.weight,a.strokeStyle=h.color,a.lineCap=h.lineCap,a.lineJoin=h.lineJoin,a.stroke())},_onClick:function(a){for(var h,g,l=this._map.mouseEventToLayerPoint(a),m=this._drawFirst;m;m=m.next)(h=m.layer).options.interactive&&h._containsPoint(l)&&("click"!==a.type&&"preclick"!==a.type||!this._map._draggableMoved(h))&&(g=h);this._fireEvent(!!g&&[g],a)},_onMouseMove:function(a){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var l=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,l)}},_handleMouseOut:function(a){var l=this._hoveredLayer;l&&(pt(this._container,"leaflet-interactive"),this._fireEvent([l],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,l){if(!this._mouseHoverThrottled){for(var h,g,m=this._drawFirst;m;m=m.next)(h=m.layer).options.interactive&&h._containsPoint(l)&&(g=h);g!==this._hoveredLayer&&(this._handleMouseOut(a),g&&(de(this._container,"leaflet-interactive"),this._fireEvent([g],a,"mouseover"),this._hoveredLayer=g)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],a),this._mouseHoverThrottled=!0,setTimeout($e(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,l,h){this._map._fireDOMEvent(l,h||l.type,a)},_bringToFront:function(a){var l=a._order;if(l){var h=l.next,g=l.prev;if(!h)return;h.prev=g,g?g.next=h:h&&(this._drawFirst=h),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(a)}},_bringToBack:function(a){var l=a._order;if(l){var h=l.next,g=l.prev;if(!g)return;g.next=h,h?h.prev=g:g&&(this._drawLast=g),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(a)}}});function p_(a){return Z.canvas?new f_(a):null}var Ja=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),vS={_initContainer:function(){this._container=De("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(pi.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var l=a._container=Ja("shape");de(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",a._path=Ja("path"),l.appendChild(a._path),this._updateStyle(a),this._layers[xe(a)]=a},_addPath:function(a){var l=a._container;this._container.appendChild(l),a.options.interactive&&a.addInteractiveTarget(l)},_removePath:function(a){var l=a._container;ut(l),a.removeInteractiveTarget(l),delete this._layers[xe(a)]},_updateStyle:function(a){var l=a._stroke,h=a._fill,g=a.options,m=a._container;m.stroked=!!g.stroke,m.filled=!!g.fill,g.stroke?(l||(l=a._stroke=Ja("stroke")),m.appendChild(l),l.weight=g.weight+"px",l.color=g.color,l.opacity=g.opacity,l.dashStyle=g.dashArray?Jt(g.dashArray)?g.dashArray.join(" "):g.dashArray.replace(/( *, *)/g," "):"",l.endcap=g.lineCap.replace("butt","flat"),l.joinstyle=g.lineJoin):l&&(m.removeChild(l),a._stroke=null),g.fill?(h||(h=a._fill=Ja("fill")),m.appendChild(h),h.color=g.fillColor||g.color,h.opacity=g.fillOpacity):h&&(m.removeChild(h),a._fill=null)},_updateCircle:function(a){var l=a._point.round(),h=Math.round(a._radius),g=Math.round(a._radiusY||h);this._setPath(a,a._empty()?"M0 0":"AL "+l.x+","+l.y+" "+h+","+g+" 0,23592600")},_setPath:function(a,l){a._path.v=l},_bringToFront:function(a){Me(a._container)},_bringToBack:function(a){li(a._container)}},Ao=Z.vml?Ja:Vm,Hi=pi.extend({_initContainer:function(){this._container=Ao("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ao("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ut(this._container),Qe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){pi.prototype._update.call(this);var a=this._bounds,l=a.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,h.setAttribute("width",l.x),h.setAttribute("height",l.y)),q(h,a.min),h.setAttribute("viewBox",[a.min.x,a.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(a){var l=a._path=Ao("path");a.options.className&&de(l,a.options.className),a.options.interactive&&de(l,"leaflet-interactive"),this._updateStyle(a),this._layers[xe(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){ut(a._path),a.removeInteractiveTarget(a._path),delete this._layers[xe(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var l=a._path,h=a.options;!l||(h.stroke?(l.setAttribute("stroke",h.color),l.setAttribute("stroke-opacity",h.opacity),l.setAttribute("stroke-width",h.weight),l.setAttribute("stroke-linecap",h.lineCap),l.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?l.setAttribute("stroke-dasharray",h.dashArray):l.removeAttribute("stroke-dasharray"),h.dashOffset?l.setAttribute("stroke-dashoffset",h.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),h.fill?(l.setAttribute("fill",h.fillColor||h.color),l.setAttribute("fill-opacity",h.fillOpacity),l.setAttribute("fill-rule",h.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(a,l){this._setPath(a,Bm(a._parts,l))},_updateCircle:function(a){var l=a._point,h=Math.max(Math.round(a._radius),1),m="a"+h+","+(Math.max(Math.round(a._radiusY),1)||h)+" 0 1,0 ",v=a._empty()?"M0 0":"M"+(l.x-h)+","+l.y+m+2*h+",0 "+m+2*-h+",0 ";this._setPath(a,v)},_setPath:function(a,l){a._path.setAttribute("d",l)},_bringToFront:function(a){Me(a._path)},_bringToBack:function(a){li(a._path)}});function g_(a){return Z.svg||Z.vml?new Hi(a):null}Z.vml&&Hi.include(vS),Ce.include({getRenderer:function(a){var l=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(a){if("overlayPane"===a||void 0===a)return!1;var l=this._paneRenderers[a];return void 0===l&&(l=this._createRenderer({pane:a}),this._paneRenderers[a]=l),l},_createRenderer:function(a){return this.options.preferCanvas&&p_(a)||g_(a)}});var m_=gr.extend({initialize:function(a,l){gr.prototype.initialize.call(this,this._boundsToLatLngs(a),l)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return[(a=qe(a)).getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});Hi.create=Ao,Hi.pointsToPath=Bm,xn.geometryToLayer=qa,xn.coordsToLatLng=Wc,xn.coordsToLatLngs=Wa,xn.latLngToCoords=xs,xn.latLngsToCoords=Ms,xn.getFeature=Or,xn.asFeature=zi,Ce.mergeOptions({boxZoom:!0});var gi=St.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){ge(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Qe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ut(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||1!==a.which&&1!==a.button)return!1;this._clearDeferredResetState(),this._resetState(),Io(),dn(),this._startPoint=this._map.mouseEventToContainerPoint(a),ge(document,{contextmenu:Xt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=De("div","leaflet-zoom-box",this._container),de(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var l=new at(this._point,this._startPoint),h=l.getSize();q(this._box,l.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(ut(this._box),pt(this._container,"leaflet-crosshair")),Ua(),$h(),Qe(document,{contextmenu:Xt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if((1===a.which||1===a.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout($e(this._resetState,this),0);var l=new Cn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(a){27===a.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ce.addInitHook("addHandler","boxZoom",gi),Ce.mergeOptions({doubleClickZoom:!0});var rf=St.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var l=this._map,h=l.getZoom(),g=l.options.zoomDelta,m=a.originalEvent.shiftKey?h-g:h+g;"center"===l.options.doubleClickZoom?l.setZoom(m):l.setZoomAround(a.containerPoint,m)}});Ce.addInitHook("addHandler","doubleClickZoom",rf),Ce.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var mi=St.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Bi(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}de(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){pt(this._map._container,"leaflet-grab"),pt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=qe(this._map.options.maxBounds);this._offsetLimit=lr(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var l=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(l),this._prunePositions(l)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,l){return a-(a-l)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var a=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;a.x<l.min.x&&(a.x=this._viscousLimit(a.x,l.min.x)),a.y<l.min.y&&(a.y=this._viscousLimit(a.y,l.min.y)),a.x>l.max.x&&(a.x=this._viscousLimit(a.x,l.max.x)),a.y>l.max.y&&(a.y=this._viscousLimit(a.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,l=Math.round(a/2),h=this._initialWorldOffset,g=this._draggable._newPos.x,m=(g-l+h)%a+l-h,v=(g+l+h)%a-l-h,I=Math.abs(m+h)<Math.abs(v+h)?m:v;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=I},_onDragEnd:function(a){var l=this._map,h=l.options,g=!h.inertia||a.noInertia||this._times.length<2;if(l.fire("dragend",a),g)l.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),I=h.easeLinearity,D=m.multiplyBy(I/((this._lastTime-this._times[0])/1e3)),x=D.distanceTo([0,0]),R=Math.min(h.inertiaMaxSpeed,x),W=D.multiplyBy(R/x),Te=R/(h.inertiaDeceleration*I),J=W.multiplyBy(-Te/2).round();J.x||J.y?(J=l._limitOffset(J,l.options.maxBounds),Ut(function(){l.panBy(J,{duration:Te,easeLinearity:I,noMoveStart:!0,animate:!0})})):l.fire("moveend")}}});Ce.addInitHook("addHandler","dragging",mi),Ce.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Zc=St.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),ge(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Qe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,l=document.documentElement,h=a.scrollTop||l.scrollTop,g=a.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(g,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var g,m,l=this._panKeys={},h=this.keyCodes;for(g=0,m=h.left.length;g<m;g++)l[h.left[g]]=[-1*a,0];for(g=0,m=h.right.length;g<m;g++)l[h.right[g]]=[a,0];for(g=0,m=h.down.length;g<m;g++)l[h.down[g]]=[0,a];for(g=0,m=h.up.length;g<m;g++)l[h.up[g]]=[0,-1*a]},_setZoomDelta:function(a){var g,m,l=this._zoomKeys={},h=this.keyCodes;for(g=0,m=h.zoomIn.length;g<m;g++)l[h.zoomIn[g]]=a;for(g=0,m=h.zoomOut.length;g<m;g++)l[h.zoomOut[g]]=-a},_addHooks:function(){ge(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Qe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var g,l=a.keyCode,h=this._map;if(l in this._panKeys)(!h._panAnim||!h._panAnim._inProgress)&&(g=this._panKeys[l],a.shiftKey&&(g=Ie(g).multiplyBy(3)),h.panBy(g),h.options.maxBounds&&h.panInsideBounds(h.options.maxBounds));else if(l in this._zoomKeys)h.setZoom(h.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[l]);else{if(27!==l||!h._popup||!h._popup.options.closeOnEscapeKey)return;h.closePopup()}Xt(a)}}});Ce.addInitHook("addHandler","keyboard",Zc),Ce.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var sf=St.extend({addHooks:function(){ge(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Qe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var l=Kh(a),h=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var g=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout($e(this._performZoom,this),g),Xt(a)},_performZoom:function(){var a=this._map,l=a.getZoom(),h=this._map.options.zoomSnap||0;a._stop();var m=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,v=h?Math.ceil(m/h)*h:m,I=a._limitZoom(l+(this._delta>0?v:-v))-l;this._delta=0,this._startTime=null,I&&("center"===a.options.scrollWheelZoom?a.setZoom(l+I):a.setZoomAround(this._lastMousePos,l+I))}});Ce.addInitHook("addHandler","scrollWheelZoom",sf);Ce.mergeOptions({tapHold:Z.touchNative&&Z.safari&&Z.mobile,tapTolerance:15});var Qc=St.extend({addHooks:function(){ge(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Qe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),1===a.touches.length){var l=a.touches[0];this._startPos=this._newPos=new ue(l.clientX,l.clientY),this._holdTimeout=setTimeout($e(function(){this._cancel(),this._isTapValid()&&(ge(document,"touchend",fn),ge(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),600),ge(document,"touchend touchcancel contextmenu",this._cancel,this),ge(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){Qe(document,"touchend",fn),Qe(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),Qe(document,"touchend touchcancel contextmenu",this._cancel,this),Qe(document,"touchmove",this._onMove,this)},_onMove:function(a){var l=a.touches[0];this._newPos=new ue(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,l){var h=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});h._simulated=!0,l.target.dispatchEvent(h)}});Ce.addInitHook("addHandler","tapHold",Qc),Ce.mergeOptions({touchZoom:Z.touch,bounceAtZoomLimits:!0});var Yc=St.extend({addHooks:function(){de(this._map._container,"leaflet-touch-zoom"),ge(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){pt(this._map._container,"leaflet-touch-zoom"),Qe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var l=this._map;if(a.touches&&2===a.touches.length&&!l._animatingZoom&&!this._zooming){var h=l.mouseEventToContainerPoint(a.touches[0]),g=l.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),"center"!==l.options.touchZoom&&(this._pinchStartLatLng=l.containerPointToLatLng(h.add(g)._divideBy(2))),this._startDist=h.distanceTo(g),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ge(document,"touchmove",this._onTouchMove,this),ge(document,"touchend touchcancel",this._onTouchEnd,this),fn(a)}},_onTouchMove:function(a){if(a.touches&&2===a.touches.length&&this._zooming){var l=this._map,h=l.mouseEventToContainerPoint(a.touches[0]),g=l.mouseEventToContainerPoint(a.touches[1]),m=h.distanceTo(g)/this._startDist;if(this._zoom=l.getScaleZoom(m,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&m<1||this._zoom>l.getMaxZoom()&&m>1)&&(this._zoom=l._limitZoom(this._zoom)),"center"===l.options.touchZoom){if(this._center=this._startLatLng,1===m)return}else{var v=h._add(g)._divideBy(2)._subtract(this._centerPoint);if(1===m&&0===v.x&&0===v.y)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(v),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),Jn(this._animRequest);var I=$e(l._move,l,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=Ut(I,this,!0),fn(a)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,Jn(this._animRequest),Qe(document,"touchmove",this._onTouchMove,this),Qe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ce.addInitHook("addHandler","touchZoom",Yc),Ce.BoxZoom=gi,Ce.DoubleClickZoom=rf,Ce.Drag=mi,Ce.Keyboard=Zc,Ce.ScrollWheelZoom=sf,Ce.TapHold=Qc,Ce.TouchZoom=Yc,V.Bounds=at,V.Browser=Z,V.CRS=Je,V.Canvas=f_,V.Circle=bo,V.CircleMarker=ji,V.Class=Gr,V.Control=hr,V.DivIcon=l_,V.DivOverlay=Lr,V.DomEvent=Zh,V.DomUtil=fS,V.Draggable=Bi,V.Evented=Ra,V.FeatureGroup=je,V.GeoJSON=xn,V.GridLayer=Ya,V.Handler=St,V.Icon=er,V.ImageOverlay=$t,V.LatLng=ze,V.LatLngBounds=Cn,V.Layer=dt,V.LayerGroup=U,V.LineUtil=Kr,V.Map=Ce,V.Marker=fi,V.Mixin=He,V.Path=re,V.Point=ue,V.PolyUtil=nf,V.Polygon=gr,V.Polyline=rt,V.Popup=Kc,V.PosAnimation=Eo,V.Projection=We,V.Rectangle=m_,V.Renderer=pi,V.SVG=Hi,V.SVGOverlay=Co,V.TileLayer=So,V.Tooltip=Qa,V.Transformation=_o,V.Util=Nc,V.VideoOverlay=Ka,V.bind=$e,V.bounds=lr,V.canvas=p_,V.circle=function $i(a,l,h){return new bo(a,l,h)},V.circleMarker=function As(a,l){return new ji(a,l)},V.control=X,V.divIcon=function mS(a){return new l_(a)},V.extend=Be,V.featureGroup=function(a,l){return new je(a,l)},V.geoJSON=jt,V.geoJson=u_,V.gridLayer=function _S(a){return new Ya(a)},V.icon=function Pt(a){return new er(a)},V.imageOverlay=function(a,l,h){return new $t(a,l,h)},V.latLng=et,V.latLngBounds=qe,V.layerGroup=function(a,l){return new U(a,l)},V.map=function Qh(a,l){return new Ce(a,l)},V.marker=function Ss(a,l){return new fi(a,l)},V.point=Ie,V.polygon=function mr(a,l){return new gr(a,l)},V.polyline=function Do(a,l){return new rt(a,l)},V.popup=function(a,l){return new Kc(a,l)},V.rectangle=function wS(a,l){return new m_(a,l)},V.setOptions=ot,V.stamp=xe,V.svg=g_,V.svgOverlay=function yr(a,l,h){return new Co(a,l,h)},V.tileLayer=d_,V.tooltip=function(a,l){return new Qa(a,l)},V.transformation=Na,V.version="1.8.0",V.videoOverlay=function Za(a,l,h){return new Ka(a,l,h)};var y_=window.L;V.noConflict=function(){return window.L=y_,this},window.L=V}(wh)}},vh=>{vh(vh.s=796)}]);